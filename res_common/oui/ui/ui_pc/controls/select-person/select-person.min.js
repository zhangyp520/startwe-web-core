
!function(I1I11III,l11l1lll){l11l1lll.ORG_TYPE_ENUM={all:"all",person:"person",department:"department",company:"company",group:"group",level:"level",post:"post",role:"role",relativeRole:"relativeRole",orgTeam:"orgTeam",team:"team",contact:"contact"},l11l1lll.RANGE_TYPE={company:"company",currentDept:"currentDept"},l11l1lll.selectPerson=function(I1I11IIl){var l11I1II1={includeChildType:1,showType:0,isAll:!0,allowCompany:!1,onlyRange:!1,rangeId:"company",defaultTabIndex:1,tabs:"3,4,5,6,7,8,1,2",chooseType:null,filterSelf:!0,enableSelectNoGroup:!0,fillback:[],isMulti:!0,maxSize:-1,isFlow:!1,extend:null,afterInit:l11l1lll._noop,beforeSelect:l11l1lll._noop,afterSelect:l11l1lll._noop,callbackOk:l11l1lll._noop,callbackCancel:l11l1lll._noop};l11I1II1=I1I11III.extend(!0,l11I1II1,I1I11IIl);var l11ll111=l11I1II1.chooseType,I1III1I1l=[];switch(parseInt(l11I1II1.showType||"0")){case 0:I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.contact);break;case 1:I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.team);break;case 2:I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.contact),I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.team);break;case 3:I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.person),l11I1II1.allowCompany=!1;break;case 4:I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.department),I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.relativeRole),I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.level),I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.post),I1III1I1l.push(l11l1lll.ORG_TYPE_ENUM.role),l11I1II1.isAll=!1;break;case 5:break;case 6:I1III1I1l=[];var l1I1IIII1=[];l11ll111&&l11ll111.length>0&&(l1I1IIII1=l11ll111.split(","));for(var l1I1I111=0,I1ll111lI=l1I1IIII1.length;I1ll111lI>l1I1I111;l1I1I111++){var l1IIIIIII=l1I1IIII1[l1I1I111];"all"!==l1IIIIIII&&"company"!==l1IIIIIII&&"group"!==l1IIIIIII&&"orgTeam"!==l1IIIIIII&&l11l1lll.ORG_TYPE_ENUM[l1IIIIIII]&&I1III1I1l.push(l1IIIIIII)}if(!I1III1I1l||I1III1I1l.length<=0)return void l11l1lll.getTop().oui.alert("请传入选择类型")}l11I1II1=I1I11III.extend(!0,l11I1II1,{chooseType:I1III1I1l}),l11I1II1.defaultTabIndex=parseInt(l11I1II1.defaultTabIndex||"1");var I1ll1l111=l11l1lll.$.ctrl.dialog.SelectPersonDialog;return I1ll1l111=l11l1lll.showUrlDialog({contentStyle:"width:808px;height:547px",url:oui_url.selectPerson+"&d="+(new Date).getTime(),isHideFooter:!0,isHideHeader:!0}),setTimeout(function(){I1I11III(I1ll1l111.getEl()).find(".oui-dialog-area").css("background","none"),I1I11III(I1ll1l111.getEl()).find(".oui-dialog-iframe-content").css("background","none")},10),I1ll1l111.attr("selectPersonOptions",l11I1II1),I1ll1l111.attr(l11I1II1),l11l1lll.getTop().oui.$.ctrl.dialog.SelectPersonDialog=I1ll1l111,I1ll1l111},l11l1lll.selectPerson.TypeEnum={COMMON:0,FLOW:1}}(jQuery,oui),function(l1I11II1){var I11l1lll=oui.$.ctrl,I11II11I=I11l1lll.ouiformcontrol,l1lll1l11="includeChildType,enableSelectNoGroup,tabs,chooseType,defaultTabIndex,maxSize,isMulti,isAll,allowCompany",l1I1IIIII=function(l1I11II1){I11II11I.call(this,l1I11II1),this.attrs=this.attrs+",otherAttrs,fillback,filterSelf,tabs,chooseType,isMulti,extend,isAll,allowCompany,includeChildType",this.init=l1I1I11l,this.showSelectPerson=l1ll111ll,this.getData4DB=l11IIII1,this.getDisplay4readOnly=l1II1I111,this.setValue=I1IIIIIII};I11l1lll.selectperson=l1I1IIIII,l1I1IIIII.FullName="oui.$.ctrl.selectperson",l1I1IIIII.templateHtml=[],l1I1IIIII.templateHtml[0]='<input type="hidden" validate="{{validate}}" targetHighBorderEl="#oui_selectperson_{{id}}" id="{{id}}" name="{{name}}" value="{{value}}" />        <div id="oui_selectperson_{{id}}" class="{{isMulti?\'multi-\':\'\'}}personarea" onclick="oui.getByOuiId({{ouiId}}).showSelectPerson(this);">{{oui.getByOuiId(ouiId).getDisplay4readOnly();}}</div>        ',l1I1IIIII.templateHtml[1]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml[2]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml[3]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml[4]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml[5]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml[6]=l1I1IIIII.templateHtml[0],l1I1IIIII.templateHtml4readOnly=[],l1I1IIIII.templateHtml4readOnly[0]="{{oui.getByOuiId(ouiId).getDisplay4readOnly();}}",l1I1IIIII.templateHtml4readOnly[1]=l1I1IIIII.templateHtml4readOnly[0],l1I1IIIII.templateHtml4readOnly[2]=l1I1IIIII.templateHtml4readOnly[0],l1I1IIIII.templateHtml4readOnly[3]=l1I1IIIII.templateHtml4readOnly[0],l1I1IIIII.templateHtml4readOnly[4]=l1I1IIIII.templateHtml4readOnly[0],l1I1IIIII.templateHtml4readOnly[5]=l1I1IIIII.templateHtml4readOnly[0],l1I1IIIII.templateHtml4readOnly[6]=l1I1IIIII.templateHtml4readOnly[0],I11II11I.buildTemplate(l1I1IIIII,"edit4ReadOnly,edit4View","0,1,2,3,4,5,6",l1I1IIIII.templateHtml4readOnly[0]);var l1I1I11l=function(){var I1I11IIl=this.attr("data");I1I11IIl||(I1I11IIl="[]"),I1I11IIl=oui.parseJson(I1I11IIl),this.attr("data",I1I11IIl);var l11l1lll=this.attr("value");if(l11l1lll){var I11II11I=this.attr("data4DB");I11II11I=oui.parseJson(I11II11I||"{}"),"object"==typeof I11II11I&&(I11II11I=I11II11I.items),I11II11I||(I11II11I=[]),I11II11I&&I11II11I.length>0&&this.attr("data",I11II11I)}var I1III1I1l=this.attr("fillback");(void 0===I1III1I1l||"undefined"===I1III1I1l||""===I1III1I1l)&&this.attr("fillback",!0);var l1I1IIII1=oui.parseJson(this.attr("otherAttrs")||"{}"),I1l1l111=this.attr("isMulti");"undefined"!=typeof I1l1l111&&(I1l1l111+"").length>0?this.attr("isMulti",I1l1l111+""=="true"):this.attr("isMulti",l1I1IIII1.isMulti+""=="true"),this.attr("isAll",l1I1IIII1.isAll+""=="true"),this.attr("allowCompany",l1I1IIII1.allowCompany+""=="true")},l1ll111ll=function(I1l11llI){var l11I1IIl=this,l11II111=parseInt(this.attr("showType")||0),I1III1I1I=(this.attr("value"),oui.parseJson(this.attr("data")||"[]")),l1l1llll1=this.attr("fillback"),I1I1I11l=this.attr("filterSelf"),I1II111I1=this.attr("tabs")||"",l1llllll1=this.attr("extend")||"{}",I1II1I11l=this.attr("otherAttrs")||"{}",I11IIII1=l11I1IIl.attr("right");if("preview"===I11IIII1||"design"===I11IIII1)return!1;l1l1llll1=("true"===l1l1llll1||"fillback"===l1l1llll1||l1l1llll1===!0)&&I1III1I1I.length>0?I1III1I1I:[];for(var I1ll11llI=l1lll1l11.split(","),I1IIII1l={},l1II1I1I1=0,I1l1111l1=I1ll11llI.length;I1l1111l1>l1II1I1I1;l1II1I1I1++)"undefined"!=typeof this.attr(I1ll11llI[l1II1I1I1])&&(this.attr(I1ll11llI[l1II1I1I1])+"").length>0&&(I1IIII1l[I1ll11llI[l1II1I1I1]]=this.attr(I1ll11llI[l1II1I1I1]));I1II1I11l=oui.parseJson(I1II1I11l);for(var l1l1l11l1 in I1II1I11l)"undefined"!=typeof I1II1I11l[l1l1l11l1]&&(I1II1I11l[l1l1l11l1]+"").length>0&&(I1IIII1l[l1l1l11l1]=I1II1I11l[l1l1l11l1]);var l1IIII1Il=oui.getTop().oui||oui,I1I11II1I={};I1II111I1.length>0&&(I1I11II1I.tabs=I1II111I1),I1I1I11l.length>0&&(I1I11II1I.filterSelf=I1I1I11l),l1llllll1&&(I1I11II1I.extend=oui.parseJson(l1llllll1)),l11II111+""=="3"?I1IIII1l.isAll=!1:l11II111+""=="4"&&(I1IIII1l.allowCompany=!1);var I1III1Il=I1II1I11l.rangeType;if("company"===I1III1Il)I1IIII1l.onlyRange=!1,I1IIII1l.rangeId=oui.RANGE_TYPE.currentDept;else if("currentDept"===I1III1Il)I1IIII1l.onlyRange=!0,I1IIII1l.rangeId=oui.RANGE_TYPE.currentDept;else if("formControl"===I1III1Il){I1IIII1l.onlyRange=!0;var I11II1I1="",l1I1III11=!1,I1II1II1l=null,l1III111l=null,I1III11I1=oui.getById(I1II1I11l.rangeId);if(I1III11I1){if(I11II1I1=I1III11I1.getValue()){I1II1II1l=I1III11I1.getData4DB();try{l1III111l=I1II1II1l.items[0]}catch(I1lll1llI){}l1III111l&&l1III111l.typeFlag!==oui.ORG_TYPE_ENUM.company&&(l1I1III11=!0,I1IIII1l.rangeId=I1III11I1.getValue())}}else{var I11I1I1l=l11I1IIl.attr("tableOuiId"),I1l11l11I=oui.getByOuiId(I11I1I1l),I1I11111=$(l11I1IIl.getEl()).closest(".oui-table-grid-row");if(I1l11l11I&&I1I11111.length>0){var I11III11=I1I11111.index(),l1lllll1=I11III11-1,l1l11llll=I1l11l11I.attr("data"),I1I111Il=l1l11llll[l1lllll1];if(I1I111Il[I1II1I11l.rangeId]&&(I1III11I1=oui.getByOuiId(I1I111Il[I1II1I11l.rangeId].controlOuiId),I1III11I1&&(I11II1I1=I1III11I1.getValue()))){I1II1II1l=I1III11I1.getData4DB();try{l1III111l=I1II1II1l.items[0]}catch(I1lll1llI){}l1III111l&&l1III111l.typeFlag!==oui.ORG_TYPE_ENUM.company&&(l1I1III11=!0,I1IIII1l.rangeId=I1III11I1.getValue())}}}l1I1III11||(I1IIII1l.onlyRange=!1,I1IIII1l.rangeId=oui.RANGE_TYPE.currentDept)}else"fixedDept"===I1III1Il?(I1IIII1l.onlyRange=!0,I1IIII1l.rangeId=I1II1I11l.rangeId):(I1IIII1l.onlyRange=!1,I1IIII1l.rangeId=oui.RANGE_TYPE.currentDept);return this.attr("isMulti")+""=="true"&&(I1IIII1l.maxSize=50),l1IIII1Il.selectPerson($.extend(!0,{showType:l11II111,fillback:l1l1llll1,callbackOk:function(I1I11III){var l11l1lll=I1I11III.data,l11ll111=[];if(l11l1lll&&l11l1lll.length>0)for(var I1III1I11=0,l1I1IIIII=l11l1lll.length;l1I1IIIII>I1III1I11;I1III1I11++)l11ll111.push(l11l1lll[I1III1I11].id);l11I1IIl.attr("value",l11ll111.join(",")),l11I1IIl.attr("data",l11l1lll),l11I1IIl.render(),l11I1IIl.triggerUpdate(),l11I1IIl.triggerAfterUpdate(),oui.validate($(l11I1IIl.getEl()).find("#"+l11I1IIl.attr("id"))[0])}},I1I11II1I,I1IIII1l)),!1},I1IIIIIII=function(I1l11ll1){this.attr("value",I1l11ll1),I1l11ll1||this.attr("data","[]"),this.render(),this.triggerAfterUpdate()},l1II1I111=function(){var I1l11llI=this.attr("data"),l11l1llI=this.attr("value");I1l11llI=oui.parseJson(I1l11llI);for(var l11II11l=[],l1III1I1l=0,l1I1IIIII=I1l11llI.length;l1I1IIIII>l1III1I1l;l1III1I1l++)l11l1llI.indexOf(I1l11llI[l1III1I1l].id)>-1&&l11II11l.push(oui.escapeStringToHTML(I1l11llI[l1III1I1l].name));return l11II11l.join(",")},l11IIII1=function(){var I1I11III=I11II11I.getProtoType().getData4DB.call(this),l11I1IIl=this.attr("data"),l11ll11I=this.attr("value");l11I1IIl=oui.parseJson(l11I1IIl||"[]");for(var l1lll1l11=[],l1l1llll1=0,I1I1I111=l11I1IIl.length;I1I1I111>l1l1llll1;l1l1llll1++)l11ll11I.indexOf(l11I1IIl[l1l1llll1].id)>-1&&l1lll1l11.push(l11I1IIl[l1l1llll1]);return I1I11III.items=l1lll1l11,I1I11III}}(window);





