
!function(I1I111Il){var l1I1I11l=I1I111Il._jsns_=I1I111Il._jsns_||{};I1I111Il._jsns_.Ns_Data={};var l1I11II1I=new Date,I1IIIIII=l1I11II1I.getFullYear()+""+(l1I11II1I.getMonth()+1)+l1I11II1I.getDate()+l1I11II1I.getHours(),l1l1ll11I=I1I111Il.__jsclazz_=I1I111Il.__jsclazz_||{};I1I111Il.__jsclazz_.Clz_Data={};var I1I1111I1={};try{I1I1111I1=I1I111Il.parent}catch(I1III1II1){I1I1111I1={}}var l1l1l1l1=function(I1l111lI){if(l1I1I11l.Ns_Data[I1l111lI])return l1I1I11l.Ns_Data[I1l111lI];for(var l1I1I111=I1l111lI.split("."),I1I11II11=I1I111Il,l1IIIIII=0;l1IIIIII<l1I1I111.length;l1IIIIII++){var l1l1ll11I=l1I1I111[l1IIIIII];I1I11II11[l1l1ll11I]||(I1I11II11[l1l1ll11I]={}),I1I11II11=I1I11II11[l1l1ll11I]}var l1l1111l1=I1I11II11;return l1l1111l1.NAME=I1l111lI,l1I1I11l.Ns_Data[I1l111lI]=l1l1111l1},I1111I11=function(){if(oui_context&&oui_context.contextPath)return oui_context.contextPath;var I1l111l1=document.location.pathname,l1I1I11I=I1l111l1.substr(1).indexOf("/"),l1l11ll1l=I1l111l1.substr(0,l1I1I11I+1)+"/";return oui_context||(oui_context={}),oui_context.contextPath=l1l11ll1l,l1l11ll1l};l1l1l1l1("oui_context"),"undefined"==typeof I1I111Il.oui_context.bizPackage&&(I1I111Il.oui_context.bizPackage="oui"),I1111I11();var l1I1111l=l1l1l1l1(I1I111Il.oui_context.bizPackage);l1I1111l.loadStartTime=I1IIIIII,I1I111Il._tool_pkg_=l1I1111l,I1I111Il._tool_pkg_._map_={},I1I111Il._tool_pkg_.set=function(l1I111II,l1I1I11I){if("string"==typeof l1I111II)return void(I1I111Il._tool_pkg_._map_[l1I111II]=l1I1I11I);if("object"==typeof l1I111II&&"undefined"==typeof l1I1I11I)for(var I1l11ll11 in l1I111II)I1I111Il._tool_pkg_._map_[I1l11ll11]=l1I111II[I1l11ll11]},I1I111Il._tool_pkg_.set({contextPath:I1I111Il.oui_context.contextPath||"",bizPackage:I1I111Il.oui_context.bizPackage||"oui",prefix:I1I111Il.oui_context.prefix||"oui-",controlPrefix:I1I111Il.oui_context.controlPrefix||"oui-c-",eventPrefix:I1I111Il.oui_context.eventPrefix||"oui-e-",validatePrefix:I1I111Il.oui_context.validatePrefix||"oui-v-",beforePrifix:I1I111Il.oui_context.beforePrifix||"oui-c-before-",afterPrifix:I1I111Il.oui_context.afterPrifix||"oui-c-after-"}),I1I111Il._tool_pkg_.get=function(I1l111lI){return I1I111Il._tool_pkg_._map_[I1l111lI]},I1I111Il._tool_pkg_.getCtxMap=function(){return I1I111Il._tool_pkg_._map_};var l1ll111l1=function(I1l111lI){return"undefined"!=typeof I1I111Il._tool_pkg_[I1l111lI]?(alert("已经定义了全局api:"+I1l111lI+",请检测代码"+I1I111Il._tool_pkg_.NAME+".reg()调用,定义的同名api;或者检测手动写"+I1I111Il._tool_pkg_.NAME+"."+I1l111lI+"=**的代码"),!0):!1};I1I111Il._tool_pkg_.reg=function(l1l111lI,I1l1l11l){if("string"==typeof l1l111lI){if("undefined"==typeof I1l1l11l)return void alert("不能注册未定义的函数到全局api上");if(l1ll111l1(l1l111lI))return;return void(this[l1l111lI]=I1l1l11l)}if("object"==typeof l1l111lI&&"undefined"==typeof I1l1l11l)for(var I1l11ll11 in l1l111lI)l1ll111l1(I1l11ll11)||(this[I1l11ll11]=l1l111lI[I1l11ll11])},l1I1111l.NS=l1l1l1l1,l1I1111l.Class=function(l1I111I1){var I1I1I111=l1I111I1.pkg||l1I111I1["package"],l1l11ll11=l1I111I1.clazzName||l1I111I1["class"],l1lllll1=l1l1l1l1(I1I1I111);if(1==l1I111I1.use_par_def)try{var l1I1II111=I1I1111I1._jsns_[I1I1I111];l1I1II111&&I1I1111I1.__jsclazz_.Clz_Data[I1I1I111+"."+l1l11ll11]&&(l1lllll1[l1l11ll11]=l1I1II111),l1l1ll11I.Clz_Data[I1I1I111+"."+l1l11ll11]=l1I1II111}catch(l1I1111I1){}if(l1l1ll11I.Clz_Data[I1I1I111+"."+l1l11ll11])return l1l1ll11I.Clz_Data[I1I1I111+"."+l1l11ll11];var l1III1IIl=l1I111I1.Cons,I1l1l1ll=l1I111I1.Stat||{},l1111I1l=l1I111I1.Publ||{},I1I1111I=l1I111I1.Priv||{},l1II111II=l1lllll1[l1l11ll11]=function(){for(var l1l111lI in this._priv)this._priv[l1l111lI]&&this._priv[l1l111lI].constructor&&this._priv[l1l111lI].constructor.Package&&this!==this._priv?this[l1l111lI]=I1I111Il._tool_pkg_.newObject(this._priv[l1l111lI].constructor,this._priv[l1l111lI]):this[l1l111lI]=this._priv[l1l111lI];this._const.apply(this,arguments)};l1II111II.prototype=l1111I1l,l1II111II.prototype._priv=I1I1111I,l1II111II.prototype._const=l1III1IIl||function(l1I111II){for(var l1I1I11I in l1I111II)this[l1I1I11I]=l1I111II[l1I1I11I]};for(var l1ll1lllI in I1l1l1ll)l1II111II[l1ll1lllI]=I1l1l1ll[l1ll1lllI];return l1II111II.Package=I1I1I111,l1II111II.ClazzName=l1l11ll11,l1II111II.FullName=I1I1I111+"."+l1l11ll11,l1II111II.FULLNAME=l1II111II.FullName,l1II111II.CLASSNAME=l1l11ll11,l1II111II.PACKAGE=I1I1I111,l1II111II.prototype.constructor=l1II111II,l1l1ll11I.Clz_Data[I1I1I111+"."+l1l11ll11]=l1II111II}}(window),function(l1I111Il,l1I1I11l){var I1I11II1I={};try{I1I11II1I=l1I111Il.parent}catch(I1IIIIIl){I1I11II1I={}}var l1l1ll111=function(I1I111Il,l1l1l11I){try{if(I1I111Il.scop===l1l1l11I)for(var I1I11II11 in l1l1l11I)l1l1l11I[I1I11II11]===I1I111Il&&(l1l1l11I[I1I11II11]=l1I1I11l,delete l1l1l11I[I1I11II11])}catch(l1llllll){}for(var I1I11II11 in I1I111Il)delete I1I111Il[I1I11II11]},I1l1111l1=function(I1l111lI){var I1l1l111=I1lll1llI(I1l111lI.constructor,I1l111lI);return I1l1l111},I1lll1llI=function(I1l111lI,I1I1I11l){var l1l11ll1l=new l1I111Il._tool_pkg_.Object({});if("object"==typeof I1I1I11l){if(I1I1I11l instanceof Array){l1l11ll1l=new l1I111Il._tool_pkg_.Array([]);for(var I1IIIIIl=0,I1I1II11I=I1I1I11l.length;I1I1II11I>I1IIIIIl;I1IIIIIl++)"_const"!=I1IIIIIl&&"_priv"!=I1IIIIIl&&("object"==typeof I1I1I11l[I1IIIIIl]&&I1I1I11l[I1IIIIIl].constructor&&(I1I1I11l[I1IIIIIl].constructor.Package||I1I1I11l[I1IIIIIl]instanceof Array)?I1I1I11l[I1IIIIIl]instanceof Array?l1l11ll1l[I1IIIIIl]=I1lll1llI(l1I111Il._tool_pkg_.Array,I1I1I11l[I1IIIIIl]):l1l11ll1l[I1IIIIIl]=I1lll1llI(I1I1I11l[I1IIIIIl].constructor,I1I1I11l[I1IIIIIl]):l1l11ll1l[I1IIIIIl]=I1I1I11l[I1IIIIIl])}else for(var I1IIIIIl in I1I1I11l)"_const"!=I1IIIIIl&&"_priv"!=I1IIIIIl&&("object"==typeof I1I1I11l[I1IIIIIl]&&I1I1I11l[I1IIIIIl].constructor&&(I1I1I11l[I1IIIIIl].constructor.Package||I1I1I11l[I1IIIIIl]instanceof Array)?I1I1I11l[I1IIIIIl]instanceof Array?l1l11ll1l[I1IIIIIl]=I1lll1llI(l1I111Il._tool_pkg_.Array,I1I1I11l[I1IIIIIl]):l1l11ll1l[I1IIIIIl]=I1lll1llI(I1I1I11l[I1IIIIIl].constructor,I1I1I11l[I1IIIIIl]):l1l11ll1l[I1IIIIIl]=I1I1I11l[I1IIIIIl]);return l1l11ll1l}return I1I1I11l&&"number"==typeof I1I1I11l?l1l11ll1l=I1I1I11l:I1I1I11l&&"string"==typeof I1I1I11l?l1l11ll1l=I1I1I11l:I1I1I11l&&"boolean"==typeof I1I1I11l?l1l11ll1l=I1I1I11l:I1I1I11l&&"undefined"==typeof I1I1I11l?l1l11ll1l=I1I1I11l:I1I1I11l&&"function"==typeof I1I1I11l?l1l11ll1l=I1I1I11l:I1l111lI?new I1l111lI:I1I1I11l},l1l1l1l1=function(l1l111ll,l1I1I111){if("undefined"==typeof l1l111ll)return{};var I1l11ll1I=l1I1I111.Stat||{},l1IIIIIl=l1I1I111.Priv||{};for(var l1l1ll11I in l1IIIIIl)l1l111ll.prototype._priv[l1l1ll11I]?l1I111Il._tool_pkg_.Tool.log("extend class["+l1l111ll.FullName+"] object property or function ["+l1l1ll11I+"] has defined!!!"):l1l111ll.prototype._priv[l1l1ll11I]=l1IIIIIl[l1l1ll11I];for(var l1l1ll11I in I1l11ll1I)"undefined"==typeof l1l111ll[l1l1ll11I]||"buildClass"===l1l1ll11I?l1l111ll[l1l1ll11I]=I1l11ll1I[l1l1ll11I]:l1I111Il._tool_pkg_.Tool.log("extend class["+l1l111ll.FullName+"] static property or function ["+l1l1ll11I+"] has defined!!!");return l1l111ll},l1111I11=function(l1I111I1){var l1l1l111=l1I111Il._tool_pkg_.Class({pkg:l1I111I1["package"]||l1I111I1.pkg,clazzName:l1I111I1["class"]||l1I111I1.clazzName});return l1I111Il._tool_pkg_.Extend(l1l1l111,{Stat:l1I111I1})};l1I111Il._tool_pkg_.Extend=l1l1l1l1,l1I111Il._tool_pkg_.Clear=l1l1ll111,l1I111Il._tool_pkg_.cloneObject=I1l1111l1,l1I111Il._tool_pkg_.newObject=I1lll1llI,l1I111Il._tool_pkg_.createClass=l1111I11}(window),function(I1l111lI){I1l111lI._tool_pkg_.Class({pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Tool",Stat:{contextPath:I1l111lI.oui_context?I1l111lI.oui_context.contextPath:"",creating:{},debug:!1,PACKAGE_PREFIX:null,log:function(l1I111Il){var l1I1I11l=I1l111lI._tool_pkg_.Tool;1==l1I1I11l.debug&&("string"==typeof l1I111Il&&(l1I111Il={type:"info",msg:l1I111Il,write:function(){alert(this.msg)}}),"undefined"!=typeof l1I111Il&&("undefined"==typeof l1I111Il.msg&&(l1I111Il.msg=""),"undefined"==typeof l1I111Il.type&&(l1I111Il.type="info"),"function"!=typeof l1I111Il.write&&(l1I111Il.write=function(){alert(this.msg)}),l1I111Il.write()))},Class:function(l1l111l1){if(1==I1l111lI._tool_pkg_.Tool.creating[l1l111l1.pkg+"."+l1l111l1.clazzName])return void alert("class ["+(l1l111l1.pkg||l1l111l1["package"])+"."+(l1l111l1.clazzName||l1l111l1["class"])+"] has defined !!!");var l1l1l111=I1l111lI._tool_pkg_.Class(l1l111l1);return I1l111lI._tool_pkg_.Tool.creating[(l1l111l1.pkg||l1l111l1["package"])+"."+(l1l111l1.clazzName||l1l111l1["class"])]=!0,l1l1l111},Extend:function(l1l111ll,I1l1l111){return I1l111lI._tool_pkg_.Extend(l1l111ll,I1l1l111)},createClass:function(I1I111Il){return I1l111lI._tool_pkg_.createClass(I1I111Il)},getFullPath:function(I1I111Il,l1l1l11l){var I1l11ll1l;return I1l11ll1l=I1I111Il.indexOf("http")>=0||I1I111Il.indexOf("https")>=0?I1I111Il:"undefined"!=typeof l1l1l11l?l1l1l11l+I1I111Il:I1l111lI._tool_pkg_.Tool.contextPath+I1I111Il}}}),I1l111lI._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Object",Cons:function(I1l111lI){if(I1l111lI)for(var l1l1l11l in I1l111lI)this[l1l1l11l]=I1l111lI[l1l1l11l]}}),I1l111lI._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Array",Cons:function(l1I111I1){if(this.__arr=new Array,this.__arr.constructor=Array,l1I111I1){for(var l1l1l11l=0,l1I11II11=l1I111I1.length;l1I11II11>l1l1l11l;l1l1l11l++)this.__arr.push(I1l111lI._tool_pkg_.newObject(l1I111I1[l1l1l11l].constructor,l1I111I1[l1l1l11l]));this.length=l1I111I1.length}},Stat:{},Publ:{},Priv:{getArray:function(){return this.__arr},getLength:function(){return this.length}}}),I1l111lI._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Runner",Cons:function(l1I111Il){for(var I1I1I111 in l1I111Il)this[I1I1I111]=l1I111Il[I1I1I111]},Priv:{isClose:!1,thread:null,time:1,run:function(){},init:function(){},onStop:function(){},start:function(){if(this.isClose=!1,this.init(),null==this.thread){var l1l111lI=this;this.thread=window.setInterval(function(){l1l111lI.update()},this.time)}},stop:function(){this.isClose=!0,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.onStop())},update:function(l1l111l1){this.run(),0!=this.isClose&&1==this.isClose&&this.stop()}}}),I1l111lI._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Queue",Cons:function(l1l111l1){for(var I1I1I11I in l1l111l1)this[I1I1I11I]=l1l111l1[I1I1I11I]},Stat:{queue:null,queues:[],createNewQueue:function(){var l1l111lI=new I1l111lI._tool_pkg_.Queue({queues:[],id:I1l111lI._tool_pkg_.Queue.queues.length});return I1l111lI._tool_pkg_.Queue.queues.push(l1l111lI),l1l111lI},getQueue:function(){return null==I1l111lI._tool_pkg_.Queue.queue&&(I1l111lI._tool_pkg_.Queue.queue=new I1l111lI._tool_pkg_.Queue({queues:[]})),I1l111lI._tool_pkg_.Queue.queue}},Publ:{},Priv:{queues:[],add:function(l1l111ll){if(!l1l111ll)return this;if(!l1l111ll.run)return this;var I1l1l11I=this,l1I11II11={inited:!1,created:!1,run:l1l111ll.run||function(){},runFirst:function(){if(1==this.created)return this;this.created=!0;try{this.run()}catch(l1I111I1){this.inited=!0}return this},id:I1l1l11I.queues.length};for(var I1IIIII1 in l1l111ll)"run"!=I1IIIII1&&(l1I11II11[I1IIIII1]=l1l111ll[I1IIIII1]);return I1l1l11I.queues.push(l1I11II11),I1l1l11I},addAll:function(I1l111lI){for(var I1l1l11l=I1l111lI.length,l1l11ll1I=0;I1l1l11l>l1l11ll1I;l1l11ll1I++)this.add(I1l111lI[l1l11ll1I]);return this},runQueue:function(l1I1I111){var I1l11ll1I=this;return null==I1l11ll1I.queues||0==I1l11ll1I.queues.length?void I1l11ll1I.callback():void I1l111lI.setTimeout(function(){var I1l111ll=I1l11ll1I.queues.shift();null!=I1l111ll&&(I1l111ll.runFirst(),I1l11ll1I.runQueue(l1I1I111))},null==I1l11ll1I.queues[0].time?l1I1I111||10:I1l11ll1I.queues[0].time)},runAuto:function(I1l111lI,I1I1I111){var l1I11II1I=this,I1IIIIIl=l1I11II1I.queues.length;0>=I1IIIIIl||(l1I11II1I.callback=I1l111lI,l1I11II1I.runQueue(I1I1I111))},start:function(I1I111II,I1l1l11I){var l1I11II1l=this,l1llllll=new I1l111lI._tool_pkg_.Runner({time:I1l1l11I||10,startTime:new Date,idx:0,queue:l1I11II1l,callback:I1I111II||function(){},onStop:function(){l1llllll.callback(),this.queue.queues.length=0,I1l111lI._tool_pkg_.Clear(l1llllll),l1llllll=void 0},run:function(){return"undefined"==typeof this.queue?void this.stop():(this.queue.idx=this.idx,"undefined"==typeof this.queue.queues||this.idx>=this.queue.queues.length?void this.stop():void(1==this.queue.queues[this.idx].runFirst().inited&&this.idx++))}});return l1llllll.start(),this}}}),I1l111lI._tool_pkg_.Tool.Class({use_par_def:!0,pkg:I1l111lI._tool_pkg_.NAME,clazzName:"Data",Stat:{objs:[]}})}(window),function(win){function getBrowser(I1l111ll){function I1l1l111(l1l111l1,I1I1I111){return l1l111l1=(""+l1l111l1).replace(/_/g,"."),I1I1I111=I1I1I111||1,l1l111l1=String(l1l111l1).split("."),l1l111l1=l1l111l1[0]+"."+(l1l111l1[1]||"0"),l1l111l1=Number(l1l111l1).toFixed(I1I1I111)}function I1I11II1I(I1I111II,l1I1I11l){l1l1l1ll=I1I111II,I1111l1l=l1I1I11l}function I1IIIII1(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1}function l1l1ll111(){var I1l111lI=-1;if("Microsoft Internet Explorer"==navigator.appName){var I1I1I11I=navigator.userAgent,l1l11ll1I=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=l1l11ll1I.exec(I1I1I11I)&&(I1l111lI=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var I1I1I11I=navigator.userAgent,l1l11ll1I=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=l1l11ll1I.exec(I1I1I11I)&&(I1l111lI=parseFloat(RegExp.$1))}return I1l111lI}var l1l1111l1,l1lll1llI=navigator.userAgent.toLowerCase(),l1l1l1ll="",I1111l1l=0;if((l1l1111l1=l1lll1llI.match(/msie ([\d.]+)/))?I1I11II1I("ie",I1l1l111(l1l1111l1[1])):(l1l1111l1=l1lll1llI.match(/firefox\/([\d.]+)/))?I1I11II1I("firefox",I1l1l111(l1l1111l1[1])):(l1l1111l1=l1lll1llI.match(/chrome\/([\d.]+)/))?I1I11II1I("chrome",I1l1l111(l1l1111l1[1])):(l1l1111l1=l1lll1llI.match(/opera.([\d.]+)/))?I1I11II1I("opera",I1l1l111(l1l1111l1[1])):(l1l1111l1=l1lll1llI.match(/version\/([\d.]+).*safari/))?I1I11II1I("safari",I1l1l111(l1l1111l1[1])):0,"ie"!=l1l1l1ll){var I1I11111=I1IIIII1();I1I11111&&I1I11II1I("ie",l1l1ll111())}return l1lll1llI.indexOf("edge")>-1&&(oui.browser.edge=l1lll1llI.substring(l1lll1llI.indexOf("edge")+5),oui.browser.isEdge=!0),"n"==I1l111ll?l1l1l1ll:"v"==I1l111ll?I1111l1l:l1l1l1ll+I1111l1l}var __jsclazz_=win.__jsclazz_,_tool_pkg_=win._tool_pkg_,Clz_Data=win.__jsclazz_.Clz_Data,Tool=_tool_pkg_.Tool;_tool_pkg_.browser={},_tool_pkg_.browser[getBrowser("n")]=getBrowser("v"),Tool.Class({pkg:_tool_pkg_.NAME+".biz",clazzName:"Tool",Stat:{controllerFullName:"",controllerClz:"",getControllerClass:function(fullName){if("string"==typeof fullName&&fullName){var clz=_tool_pkg_.biz.Tool.getClass(fullName);if(clz)return clz;try{clz=eval(fullName)}catch(e){}return clz}if(_tool_pkg_.biz.Tool.controllerFullName&&_tool_pkg_.biz.Tool.controllerClz)return _tool_pkg_.biz.Tool.controllerClz;if(_tool_pkg_.biz.Tool.controllerFullName||(_tool_pkg_.biz.Tool.controllerFullName=$("body").attr(_tool_pkg_.get("prefix")+"controller"),_tool_pkg_.biz.Tool.controllerFullName||(_tool_pkg_.biz.Tool.controllerFullName="window")),"window"==_tool_pkg_.biz.Tool.controllerFullName)return _tool_pkg_.biz.Tool.controllerClz=window,window;var clz=_tool_pkg_.biz.Tool.getClass(_tool_pkg_.biz.Tool.controllerFullName);if(clz)return _tool_pkg_.biz.Tool.controllerClz=clz,clz;try{clz=eval(_tool_pkg_.biz.Tool.controllerFullName),_tool_pkg_.biz.Tool.controllerClz=clz}catch(e){}return clz},getClassAndFun:function(funName,cfg){var fun="";if(!funName)return{clz:"",fun:"",funName:""};if(funName.indexOf(".")>0){var lastIndex=funName.lastIndexOf("."),fullName=funName.substring(0,lastIndex);fun=funName.substring(lastIndex+1,funName.length);var clz=_tool_pkg_.biz.Tool.getClass(fullName);if(clz)return{clz:clz||"",fun:clz[fun]||"",funName:fun};try{clz=eval(fullName)}catch(e){return{clz:clz,fun:""}}return{clz:clz||"",fun:clz[fun]||"",funName:fun}}var clsFullName=$(cfg.el).closest("["+_tool_pkg_.get("prefix")+"controller]").attr(_tool_pkg_.get("prefix")+"controller"),clz=_tool_pkg_.biz.Tool.getControllerClass(clsFullName);return{clz:clz,fun:clz[funName]||"",funName:funName}},buildSuper:function(l1l111l1){"undefined"!=typeof l1l111l1.superClass&&l1l111l1.superClass&&(l1l111l1.getSuper=_tool_pkg_.biz.Tool.getSuper,l1l111l1.create=_tool_pkg_.biz.Tool.createObject)},getSuper:function(){return Clz_Data[this.superClass]},createObject:function(I1l111ll){var l1l1l111=this.getSuper().create(this);return l1l1l111._initObject(I1l111ll),l1l1l111},getUrlsByRefs:function(I1l111ll){I1l111ll=I1l111ll||[];for(var l1l1l111=[],l1I11II1I=0,l1IIIII1=I1l111ll.length;l1IIIII1>l1I11II1I;l1I11II1I++)if("undefined"==typeof __jsclazz_.Clz_Data[I1l111ll[l1I11II1I]]){var l1I1II111=_tool_pkg_.cfg.JsClassPath.get(I1l111ll[l1I11II1I]);"undefined"!=typeof l1I1II111&&l1I1II111||!(I1l111ll[l1I11II1I].lastIndexOf(".js")<0)?(l1I1II111=l1I1II111||I1l111ll[l1I11II1I],l1l1l111.push(l1I1II111)):alert("在"+_tool_pkg_.NAME+".cfg.JsClassPath中获取不到[js类:"+I1l111ll[l1I11II1I]+"的url配置]")}return l1l1l111},crateOrUpdateClass:function(l1l111ll){var l1l1l111=null;if("undefined"==typeof l1l111ll.refs)"undefined"==typeof l1l111ll.buildClass?(l1l1l111=_tool_pkg_.biz.Tool.Class({"package":l1l111ll["package"],"class":l1l111ll["class"]}),_tool_pkg_.biz.Tool.createStatic(l1l1l111,l1l111ll),_tool_pkg_.biz.Tool.buildSuper(l1l1l111)):(l1l1l111=l1l111ll.buildClass(),"undefined"!=typeof l1l1l111&&l1l1l111.FullName&&l1l1l111.Package&&_tool_pkg_.biz.Tool.createStatic(l1l1l111,l1l111ll)),l1l111ll=l1l1l111;else{"string"==typeof l1l111ll.refs&&(l1l111ll.refs=l1l111ll.refs.split(","));var l1l11ll1l=_tool_pkg_.biz.Tool.getUrlsByRefs(l1l111ll.refs);_tool_pkg_.biz.Tool.require(l1l11ll1l,function(){"undefined"==typeof l1l111ll.buildClass?(l1l1l111=_tool_pkg_.biz.Tool.Class({"package":l1l111ll["package"],"class":l1l111ll["class"]}),_tool_pkg_.biz.Tool.createStatic(l1l1l111,l1l111ll),_tool_pkg_.biz.Tool.buildSuper(l1l1l111)):(l1l1l111=l1l111ll.buildClass(),"undefined"!=typeof l1l1l111&&l1l1l111.FullName&&l1l1l111.Package&&_tool_pkg_.biz.Tool.createStatic(l1l1l111,l1l111ll)),l1l111ll=l1l1l111})}return l1l111ll},loadSortState:{},requireWithSort:function(I1I111II,I1l1l11I){if("undefined"!=typeof I1I111II&&I1I111II?"string"==typeof I1I111II&&(I1I111II=I1I111II.split(",")):I1I111II=[],_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!1,0==I1I111II.length)return I1l1l11I&&I1l1l11I(),void(_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!0);for(var I1I11II1I=[],l1lllllI=0,l1I1II111=I1I111II.length;l1I1II111>l1lllllI;l1lllllI++)I1I11II1I[l1lllllI]={idx:l1lllllI,url:I1I111II[l1lllllI],lastUrl:l1lllllI>0?I1I111II[l1lllllI-1]:"",len:l1I1II111,run:function(){var I1l111lI=this,l1I1I11l=this.lastUrl;return l1I1I11l?void(I1l111lI.inter=window.setInterval(function(){"undefined"!=typeof _tool_pkg_.biz.Tool.Loader.loadStates[I1l111lI.lastUrl]&&(window.clearInterval(I1l111lI.inter),delete I1l111lI.inter,_tool_pkg_.biz.Tool.require([I1l111lI.url],function(){I1l111lI.callback()}))},1)):void _tool_pkg_.biz.Tool.require([I1l111lI.url],function(){I1l111lI.callback()})},callback:function(){this.idx==this.len-1?(I1l1l11I&&I1l1l11I(),_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!0):this.idx>=0&&I1I11II1I[this.idx+1].run()}};I1I11II1I[0].run()},loadedAll4config:function(l1l111l1){var l1I1I11I=_tool_pkg_.biz.Tool.loadSortState;for(var I1l11ll11 in l1I1I11I)if(l1I1I11I[I1l11ll11]!==!0)return window.setTimeout(function(){_tool_pkg_.biz.Tool.loadedAll4config(l1l111l1)},10),!1;return l1l111l1&&l1l111l1(),!0},cssLoaderOver:!0,requireCssConfig:function(l1I111Il){_tool_pkg_.biz.Tool.cssLoaderOver=!1;var I1l1l111=l1I111Il.baseConfigUrl||"",l1l11ll11=l1I111Il.configUrls||[],I1IIIIII=l1I111Il.callback;return I1l1l111?void _tool_pkg_.biz.Tool.require([I1l1l111],function(){_tool_pkg_.cfg.CssClassPath.init(),_tool_pkg_.biz.Tool.require(l1l11ll11,function(){var l1l111lI=_tool_pkg_.cfg.CssClassPath.getRequireUrls(),l1I1I11I=l1l111lI.urls||[];_tool_pkg_.biz.Tool.require(l1I1I11I,function(){I1IIIIII&&I1IIIIII(),_tool_pkg_.biz.Tool.cssLoaderOver=!0})})}):(_tool_pkg_.cfg.CssClassPath.init(),void _tool_pkg_.biz.Tool.require(l1l11ll11,function(){var l1I111Il=_tool_pkg_.cfg.CssClassPath.getRequireUrls(),I1l1l111=l1I111Il.urls||[];_tool_pkg_.biz.Tool.require(I1l1l111,function(){I1IIIIII&&I1IIIIII(),_tool_pkg_.biz.Tool.cssLoaderOver=!0})}))},requireConfig:function(I1l111l1){if(console.log("css is over:"+_tool_pkg_.biz.Tool.cssLoaderOver),0==_tool_pkg_.biz.Tool.cssLoaderOver)return void window.setTimeout(function(){_tool_pkg_.biz.Tool.requireConfig(I1l111l1)},10);var l1l1l11I=I1l111l1.baseConfigUrl||"",I1I11II11=I1l111l1.configUrls||[],l1IIIII1=I1l111l1.callback;return l1l1l11I?void _tool_pkg_.biz.Tool.require([l1l1l11I],function(){_tool_pkg_.cfg.JsClassPath.init(),_tool_pkg_.biz.Tool.require(I1I11II11,function(){var I1I111Il=_tool_pkg_.cfg.JsClassPath.getRequireUrls(),I1I1I11I=I1I111Il.urls||[],I1I11II11=I1I111Il.pluginUrls||[];_tool_pkg_.biz.Tool.require(I1I1I11I,function(){_tool_pkg_.biz.Tool.require(I1I11II11,function(){_tool_pkg_.biz.Tool.loadedAll4config(l1IIIII1)})})})}):(_tool_pkg_.cfg.JsClassPath.init(),void _tool_pkg_.biz.Tool.require(I1I11II11,function(){var l1l111lI=_tool_pkg_.cfg.JsClassPath.getRequireUrls(),l1l1l11I=l1l111lI.urls||[],I1I11II1I=l1l111lI.pluginUrls||[];_tool_pkg_.biz.Tool.require(l1l1l11I,function(){_tool_pkg_.biz.Tool.require(I1I11II1I,function(){_tool_pkg_.biz.Tool.loadedAll4config(l1IIIII1)})})}))},requiredData:{},getHasNotRequireUrls:function(I1l111ll){for(var l1l1l11I=_tool_pkg_.biz.Tool.requiredData,I1I11II1I=[],l1llllll=0,I1I1II11l=I1l111ll.length;I1I1II11l>l1llllll;l1llllll++)"undefined"==typeof l1l1l11I[I1l111ll[l1llllll]]&&(l1l1l11I[I1l111ll[l1llllll]]=!0,I1I11II1I.push(I1l111ll[l1llllll]));return I1I11II1I},sortUrls:[],require:function(l1l111lI,I1l1l11I){var I1I11II1I=_tool_pkg_.biz.Tool.getHasNotRequireUrls(l1l111lI);_tool_pkg_.biz.Tool.concatSortUrls(I1I11II1I),_tool_pkg_.biz.Tool.Loader.require(I1I11II1I,I1l1l11I)},concatSortUrls:function(l1l111ll){"undefined"!=typeof l1l111ll&&0!=l1l111ll.length&&(_tool_pkg_.biz.Tool.sortUrls=_tool_pkg_.biz.Tool.sortUrls.concat(l1l111ll))},Class:function(I1l111ll){return"undefined"==typeof I1l111ll.pkg&&(I1l111ll.pkg=I1l111ll["package"]),"undefined"==typeof I1l111ll.clazzName&&(I1l111ll.clazzName=I1l111ll["class"]),Tool.Class(I1l111ll),_tool_pkg_.biz.Tool.currentJsClass=__jsclazz_.Clz_Data[I1l111ll.pkg+"."+I1l111ll.clazzName],_tool_pkg_.biz.Tool.currentJsClass},getClass:function(I1I111II){return __jsclazz_.Clz_Data[I1I111II]},Clear:_tool_pkg_.Clear,PACKAGE_PREFIX:Tool.PACKAGE_PREFIX,isClassWithPackage:function(l1I111I1){try{if("undefined"==typeof l1I111I1||null==l1I111I1)return!1;var l1I1I111=_tool_pkg_.biz.Tool.PACKAGE_PREFIX;if("undefined"==typeof l1I1I111)return alert("请技术经理配置coframe/tools/skins/common.jsp中"+Tool.FULLNAME+".PACKAGE_PREFIX 的值;构建包必须以该属性值为前缀,若存在多个请以英文逗号隔开"),!1;if(""==l1I1I111||null==l1I1I111)return alert("请技术经理配置coframe/tools/skins/common.jsp中"+Tool.FULLNAME+".PACKAGE_PREFIX 的值;构建包必须以该属性值为前缀,若存在多个请以英文逗号隔开"),!1;if("string"==typeof l1I111I1["package"]&&l1I111I1["package"].indexOf(l1I1I111)>=0)return!0;if("string"==typeof l1I111I1["package"]&&l1I1I111.indexOf(",")>0)for(var I1I11II11=l1I1I111.split(","),I1llllll=I1I11II11.length,I1I1II111=0;I1llllll>I1I1II111;I1I1II111++)if(l1I111I1["package"].indexOf(I1I11II11[I1I1II111])>=0)return!0}catch(l1l1111lI){}return!1},pache:{},loadPache:function(l1I111Il){var l1l1l11I=_tool_pkg_.biz.Tool.pache;for(var l1I11II1I in l1I111Il)l1l1l11I[l1I11II1I]=l1I111Il[l1I11II1I]},log:Tool.log,contextPath:Tool.contextPath,createStatic:function(I1I111I1,I1l1l11I){Tool.Extend(I1I111I1,{Stat:I1l1l11I})},NS:_tool_pkg_.NS,ThirdResPath:"statics/js/",evalPath:function(I1I111Il){var l1I1I11l=Tool.getFullPath(I1I111Il.url);"undefined"==typeof I1I111Il.async&&(I1I111Il.async=!0),$.ajax({url:l1I1I11l,data:_tool_pkg_.biz.Tool.encode(I1I111Il.data||{}),success:function(I1I111II){var l1I1I111=_tool_pkg_.biz.Tool.decode(I1I111II);return null!=l1I1I111.exception?void(I1I111Il.exception&&I1I111Il.exception(l1I1I111)):void(I1I111Il.callBack?I1I111Il.callBack(l1I1I111):I1I111Il.callback&&I1I111Il.callback(l1I1I111))},error:I1I111Il.error||function(l1I111Il){_tool_pkg_.biz.Tool.log("网络连接异常:请求失败或者超时,"+_tool_pkg_.biz.Tool.encode(l1I111Il))},type:"POST",cache:!1,contentType:"text/json",dataType:"json",async:I1I111Il.async})},trim:function(l1I111Il){return(l1I111Il||"").replace(/^\s+|\s+$/g,"")}}}),Tool.Class({pkg:_tool_pkg_.NAME+".biz.Tool",clazzName:"Loader",Priv:{init:function(){this.over=!1,this.doc=document,this.IS_CSS_REG=/\.css(?:\?|$)/i,this.READY_STATE_REG=/^(?:loaded|complete|undefined)$/,this.isOldWebKit=1*window.navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")<536,this.currentlyAddingScript="",this.head=this.doc.getElementsByTagName("head")[0],this.baseElement=this.head.getElementsByTagName("base")[0],this.idx=-1},isFunction:function(l1l111l1){return"[object Function]"===Object.prototype.toString.call(l1l111l1)},pollCss:function(l1I111Il,I1l1l111){var I1l11ll1l=this,I1IIIIIl=l1I111Il.sheet,l1I1II111=!1;if(I1l11ll1l.isOldWebKit)I1IIIIIl&&(l1I1II111=!0);else if(I1IIIIIl)try{I1IIIIIl.cssRules&&(l1I1II111=!0)}catch(l1I1111II){"NS_ERROR_DOM_SECURITY_ERR"===l1I1111II.name&&(l1I1II111=!0)}setTimeout(function(){if(l1I1II111){var I1I1I111=I1l11ll1l.urls[parseInt(l1I111Il.getAttribute("load_js_idx"))];_tool_pkg_.biz.Tool.Loader.loadStates[I1I1I111]=!0,I1l11ll1l.isFunction(I1l1l111)&&I1l1l111()}else I1l11ll1l.pollCss(l1I111Il,I1l1l111)},50)},addOnload:function(l1I111II,l1l1l111,I1l11ll11){var I1IIIII1=this,I1I1II111=I1l11ll11&&(I1IIIII1.isOldWebKit||!("onload"in l1I111II));return I1I1II111?void setTimeout(function(){I1IIIII1.pollCss(l1I111II,l1l1l111)},10):(l1I111II.setAttribute("done","false"),void(l1I111II.onload=l1I111II.onerror=l1I111II.onreadystatechange=function(){if(null!=I1IIIII1.READY_STATE_REG&&"false"==l1I111II.getAttribute("done")&&I1IIIII1.READY_STATE_REG.test(l1I111II.readyState)){var I1I111Il=I1IIIII1.urls[parseInt(l1I111II.getAttribute("load_js_idx"))];_tool_pkg_.biz.Tool.Loader.loadStates[I1I111Il]=!0,l1I111II.setAttribute("done","true"),l1I111II.onload=l1I111II.onerror=l1I111II.onreadystatechange=null,I1l11ll11||I1IIIII1.head.removeChild(l1I111II),l1I111II=null,I1IIIII1.isFunction(l1l1l111)&&l1l1l111()}}))},use:function(l1l111l1,I1I1I11I,I1l11ll1I){var l1IIIIIl=this.IS_CSS_REG.test(l1l111l1),l1I1II11l=this.doc.createElement(l1IIIIIl?"link":"script");l1I1II11l.setAttribute("load_js_idx",++this.idx),void 0!=I1l11ll1I&&(l1I1II11l.charset=I1l11ll1I),this.addOnload(l1I1II11l,function(){I1I1I11I(l1I1II11l.getAttribute("load_js_idx"))},l1IIIIIl),l1IIIIIl?(l1I1II11l.rel="stylesheet",l1l111l1&&l1l111l1.indexOf("?")>0?l1I1II11l.href=l1l111l1+"&_t="+_tool_pkg_.loadStartTime:l1I1II11l.href=l1l111l1+"?_t="+_tool_pkg_.loadStartTime):(l1I1II11l.async=!0,l1l111l1&&l1l111l1.indexOf("?")>0?l1I1II11l.src=l1l111l1+"&_t="+_tool_pkg_.loadStartTime:l1I1II11l.src=l1l111l1+"?_t="+_tool_pkg_.loadStartTime),this.currentlyAddingScript=l1I1II11l,this.baseElement?this.head.insertBefore(l1I1II11l,this.baseElement):this.head.appendChild(l1I1II11l),this.currentlyAddingScript=null}},Cons:function(I1I111Il){if(this.init(),I1I111Il)for(var l1l1l111 in I1I111Il)this[l1l1l111]=I1I111Il[l1l1l111]},Stat:{allLoaders:[],loadStates:{},callOver:function(){},clearLoaders:function(){for(var l1I111I1=_tool_pkg_.biz.Tool.Loader.allLoaders,l1I1I11I=0,l1l11ll1I=l1I111I1.length;l1l11ll1I>l1I1I11I;l1I1I11I++)_tool_pkg_.biz.Tool.Clear(l1I111I1[l1I1I11I]),l1I111I1[l1I1I11I]=null;l1I111I1.length=0},stoped:!1,onStop:function(){if(1!=_tool_pkg_.biz.Tool.Loader.stoped){_tool_pkg_.biz.Tool.Loader.stoped=!0,_tool_pkg_.biz.Tool.Loader.clearLoaders();var l1l111lI=_tool_pkg_.biz.Tool.Loader.callOver;return l1l111lI&&l1l111lI()}},hasStop:function(){for(var I1l111l1=_tool_pkg_.biz.Tool.Loader.allLoaders,I1l1l11I=I1l111l1.length,l1I11II1l=0;I1l1l11I>l1I11II1l;l1I11II1l++){if("undefined"==typeof I1l111l1[l1I11II1l].over)return!1;if(0==I1l111l1[l1I11II1l].over)return!1}return!0},require:function(I1l111ll,I1l1l111){if(null==I1l111ll||0==I1l111ll.length)return I1l1l111&&I1l1l111();var l1l11ll1l="";0==_tool_pkg_.biz.Tool.Loader.allLoaders.length?(_tool_pkg_.biz.Tool.Loader.stoped=!1,_tool_pkg_.biz.Tool.Loader.callOver=I1l1l111,l1l11ll1l=function(){1==_tool_pkg_.biz.Tool.Loader.hasStop()&&_tool_pkg_.biz.Tool.Loader.onStop()}):l1l11ll1l=function(){I1l1l111(),1==_tool_pkg_.biz.Tool.Loader.hasStop()&&_tool_pkg_.biz.Tool.Loader.onStop()};var l1lllllI=_tool_pkg_.biz.Tool.contextPath,I1l1ll11l=new _tool_pkg_.biz.Tool.Loader;_tool_pkg_.biz.Tool.Loader.allLoaders.push(I1l1ll11l),I1l1ll11l.count=0,I1l1ll11l.len=I1l111ll.length,I1l1ll11l.currFun=l1l11ll1l,I1l1ll11l.urls=I1l111ll;for(var I1l1111ll=0,l1lll1llI=I1l111ll.length;l1lll1llI>I1l1111ll;I1l1111ll++){var I1l1l1lI=l1lllllI+I1l111ll[I1l1111ll];(0==I1l111ll[I1l1111ll].indexOf("http://")||0==I1l111ll[I1l1111ll].indexOf("https://"))&&(I1l1l1lI=I1l111ll[I1l1111ll]),I1l1ll11l.use(I1l1l1lI,function(){I1l1ll11l.count++,I1l1ll11l.count==I1l1ll11l.len?(I1l1ll11l.over=!0,null!=I1l1ll11l.currFun&&I1l1ll11l.currFun()):I1l1ll11l.over=!1},"utf-8")}}}})}(window),function(l1l111lI){var l1I1I11l=l1l111lI._tool_pkg_,I1l11ll11={"package":l1I1I11l.NAME+".cfg","class":"JsClassPath",getCfgs:function(){return"undefined"!=typeof I1l11ll11.cfgs&&I1l11ll11.cfgs||I1l11ll11.init(),I1l11ll11.cfgs},get:function(I1l111ll){return I1l11ll11.getCfgs()[I1l111ll]},requiredData:{},preRequireRefs:function(l1l111ll){"string"==typeof l1l111ll?l1l111ll=l1l111ll.split(","):l1l111ll||(l1l111ll=[]);for(var l1l1l11l=I1l11ll11.requiredData,I1l11ll1l=0,l1lllllI=l1l111ll.length;l1lllllI>I1l11ll1l;I1l11ll1l++)"undefined"==typeof l1l1l11l[l1l111ll[I1l11ll1l]]&&(l1l1l11l[l1l111ll[I1l11ll1l]]=!0,I1l11ll11.preRequireRefs(I1l11ll11.refs[l1l111ll[I1l11ll1l]]||[]))},getRequireUrls:function(){var I1I111I1=I1l11ll11.requires;I1l11ll11.preRequireRefs(I1I111I1),I1l11ll11.preRequireRefs(I1l11ll11.requirePlugins);var l1I1I11I=I1l11ll11.requiredData,l1IIIIIl=[],I1l1ll11l=I1l11ll11.cfgs,l1l1111ll=[];for(var l1lll1ll1 in l1I1I11I)"undefined"!=typeof I1l1ll11l[l1lll1ll1]&&I1l1ll11l[l1lll1ll1]?I1l1ll11l[l1lll1ll1].lastIndexOf("Plugin.js")>0?l1l1111ll.push(I1l1ll11l[l1lll1ll1]):l1IIIIIl.push(I1l1ll11l[l1lll1ll1]):alert("请检查你的配置文件;没有配置["+l1lll1ll1+" 的js路径]");return{urls:l1IIIIIl,pluginUrls:l1l1111ll}},createConfig:function(I1l111lI){if("undefined"!=typeof I1l111lI)for(var l1l1l11I in I1l111lI){if("undefined"!=typeof I1l11ll11.cfgs[l1l1l11I])return void alert("你的资源配置文件中配置了重复别名:可能原因1:当前页面引入的资源配置文件中存在与公共资源中相同的别名:["+l1l1l11I+"]");I1l11ll11.cfgs[l1l1l11I]=I1l111lI[l1l1l11I]}},createRefs:function(l1I111II){if("undefined"!=typeof l1I111II)for(var I1l1l111 in l1I111II){if("undefined"!=typeof I1l11ll11.refs[I1l1l111])return void alert("你的资源配置文件中配置了重复依赖:可能原因1:当前页面引入的资源配置文件中存在与公共资源依赖配置中相同的别名:["+I1l1l111+"]");I1l11ll11.refs[I1l1l111]=l1I111II[I1l1l111]}},imports:function(I1I111I1){if("undefined"!=typeof I1I111I1&&I1I111I1){"string"==typeof I1l11ll11.requires?I1l11ll11.requires=I1l11ll11.requires.split(","):I1l11ll11.requires||(I1l11ll11.requires=[]),"string"==typeof I1I111I1&&(I1I111I1=I1I111I1.split(","));for(var I1l1l11l=0,l1l11ll1I=I1I111I1.length;l1l11ll1I>I1l1l11l;I1l1l11l++)I1l11ll11.requires.push(I1I111I1[I1l1l11l])}},importPlugins:function(l1l111l1){if("undefined"!=typeof l1l111l1&&l1l111l1){"string"==typeof I1l11ll11.requirePlugins?I1l11ll11.requirePlugins=I1l11ll11.requirePlugins.split(","):I1l11ll11.requirePlugins||(I1l11ll11.requirePlugins=[]),"string"==typeof l1l111l1&&(l1l111l1=l1l111l1.split(","));for(var I1l1l111=0,l1I11II1I=l1l111l1.length;l1I11II1I>I1l1l111;I1l1l111++)I1l11ll11.requirePlugins.push(l1l111l1[I1l1l111])}},config:function(){I1l11ll11.createConfig({}),I1l11ll11.createRefs({}),I1l11ll11.imports([]),I1l11ll11.importPlugins([]);
},init:function(){I1l11ll11.cfgs={},I1l11ll11.refs={},I1l11ll11.requires=[],I1l11ll11.requirePlugins=[],I1l11ll11.config()}};I1l11ll11=l1I1I11l.biz.Tool.crateOrUpdateClass(I1l11ll11)}(window),function(l1l111ll){var l1l1l11l=l1l111ll._tool_pkg_,l1I11II1I={"package":l1l1l11l.NAME+".cfg","class":"CssClassPath",getCfgs:function(){return"undefined"!=typeof l1I11II1I.cfgs&&l1I11II1I.cfgs||l1I11II1I.init(),l1I11II1I.cfgs},get:function(I1l111ll){return l1I11II1I.getCfgs()[I1l111ll]},requiredData:{},preRequireRefs:function(I1l111l1){"string"==typeof I1l111l1?I1l111l1=I1l111l1.split(","):I1l111l1||(I1l111l1=[]);for(var l1l1l111=l1I11II1I.requiredData,l1I11II11=0,l1llllll=I1l111l1.length;l1llllll>l1I11II11;l1I11II11++)"undefined"==typeof l1l1l111[I1l111l1[l1I11II11]]&&(l1l1l111[I1l111l1[l1I11II11]]=!0,l1I11II1I.preRequireRefs(l1I11II1I.refs[I1l111l1[l1I11II11]]||[]))},getRequireUrls:function(){var l1l111lI=l1I11II1I.requires;l1I11II1I.preRequireRefs(l1l111lI),l1I11II1I.preRequireRefs(l1I11II1I.requirePlugins);var l1l1l111=l1I11II1I.requiredData,I1I11II1l=[],I1llllll=l1I11II1I.cfgs,I1l1ll111=[];for(var I1I1111Il in l1l1l111)"undefined"!=typeof I1llllll[I1I1111Il]&&I1llllll[I1I1111Il]?I1llllll[I1I1111Il].lastIndexOf("Plugin.js")>0?I1l1ll111.push(I1llllll[I1I1111Il]):I1I11II1l.push(I1llllll[I1I1111Il]):alert("请检查你的配置文件;没有配置["+I1I1111Il+" 的js路径]");return{urls:I1I11II1l,pluginUrls:I1l1ll111}},createConfig:function(l1I111Il){if("undefined"!=typeof l1I111Il)for(var l1l1l111 in l1I111Il){if("undefined"!=typeof l1I11II1I.cfgs[l1l1l111])return void alert("你的资源配置文件中配置了重复别名:可能原因1:当前页面引入的资源配置文件中存在与公共资源中相同的别名:["+l1l1l111+"]");l1I11II1I.cfgs[l1l1l111]=l1I111Il[l1l1l111]}},createRefs:function(I1I111I1){if("undefined"!=typeof I1I111I1)for(var I1I1I11l in I1I111I1){if("undefined"!=typeof l1I11II1I.refs[I1I1I11l])return void alert("你的资源配置文件中配置了重复依赖:可能原因1:当前页面引入的资源配置文件中存在与公共资源依赖配置中相同的别名:["+I1I1I11l+"]");l1I11II1I.refs[I1I1I11l]=I1I111I1[I1I1I11l]}},imports:function(l1I111II){if("undefined"!=typeof l1I111II&&l1I111II){"string"==typeof l1I11II1I.requires?l1I11II1I.requires=l1I11II1I.requires.split(","):l1I11II1I.requires||(l1I11II1I.requires=[]),"string"==typeof l1I111II&&(l1I111II=l1I111II.split(","));for(var l1l1l11I=0,I1l11ll1l=l1I111II.length;I1l11ll1l>l1l1l11I;l1l1l11I++)l1I11II1I.requires.push(l1I111II[l1l1l11I])}},importPlugins:function(I1I111Il){if("undefined"!=typeof I1I111Il&&I1I111Il){"string"==typeof l1I11II1I.requirePlugins?l1I11II1I.requirePlugins=l1I11II1I.requirePlugins.split(","):l1I11II1I.requirePlugins||(l1I11II1I.requirePlugins=[]),"string"==typeof I1I111Il&&(I1I111Il=I1I111Il.split(","));for(var l1I1I111=0,I1l11ll1I=I1I111Il.length;I1l11ll1I>l1I1I111;l1I1I111++)l1I11II1I.requirePlugins.push(I1I111Il[l1I1I111])}},config:function(){l1I11II1I.createConfig({}),l1I11II1I.createRefs({}),l1I11II1I.imports([]),l1I11II1I.importPlugins([])},init:function(){l1I11II1I.cfgs={},l1I11II1I.refs={},l1I11II1I.requires=[],l1I11II1I.requirePlugins=[],l1I11II1I.config()}};l1I11II1I=l1l1l11l.biz.Tool.crateOrUpdateClass(l1I11II1I)}(window),function(win){var _tool_pkg_=win._tool_pkg_;_tool_pkg_.biz.Tool.JSON=new function(){var sb=[],_dateFormat=null,useHasOwn=!!{}.hasOwnProperty,replaceString=function(I1l111ll,l1I1I11I){var l1l11ll1l=m[l1I1I11I];return l1l11ll1l?l1l11ll1l:(l1l11ll1l=l1I1I11I.charCodeAt(),"\\u00"+Math.floor(l1l11ll1l/16).toString(16)+(l1l11ll1l%16).toString(16))},doEncode=function(l1I111Il,l1I1I11I){if(null===l1I111Il)return void(sb[sb.length]="null");var I1l11ll1l=typeof l1I111Il;if("undefined"==I1l11ll1l)return void(sb[sb.length]="null");if(l1I111Il.push){sb[sb.length]="[";var I1IIIIIl,I1l1ll11I,I1l1111ll,I1III1III=l1I111Il.length;for(I1l1ll11I=0;I1III1III>I1l1ll11I;I1l1ll11I+=1)I1l1111ll=l1I111Il[I1l1ll11I],I1l11ll1l=typeof I1l1111ll,"undefined"==I1l11ll1l||"function"==I1l11ll1l||"unknown"==I1l11ll1l||(I1IIIIIl&&(sb[sb.length]=","),doEncode(I1l1111ll),I1IIIIIl=!0);return void(sb[sb.length]="]")}{if(!l1I111Il.getFullYear){if("string"==I1l11ll1l)return strReg1.test(l1I111Il)?(sb[sb.length]='"',sb[sb.length]=l1I111Il.replace(strReg2,replaceString),void(sb[sb.length]='"')):void(sb[sb.length]='"'+l1I111Il+'"');if("number"==I1l11ll1l)return void(sb[sb.length]=l1I111Il);if("boolean"==I1l11ll1l)return void(sb[sb.length]=String(l1I111Il));sb[sb.length]="{";var I1IIIIIl,I1l1ll11I,I1l1111ll;for(I1l1ll11I in l1I111Il)(!useHasOwn||Object.prototype.hasOwnProperty.call(l1I111Il,I1l1ll11I))&&(I1l1111ll=l1I111Il[I1l1ll11I],I1l11ll1l=typeof I1l1111ll,"undefined"==I1l11ll1l||"function"==I1l11ll1l||"unknown"==I1l11ll1l||(I1IIIIIl&&(sb[sb.length]=","),doEncode(I1l1ll11I),sb[sb.length]=":",doEncode(I1l1111ll,I1l1ll11I),I1IIIIIl=!0));return void(sb[sb.length]="}")}if(_dateFormat)sb[sb.length]='"',"function"==typeof _dateFormat?sb[sb.length]=_dateFormat(l1I111Il,l1I1I11I):sb[sb.length]=_tool_pkg_.biz.Tool.formatDate(l1I111Il,_dateFormat),sb[sb.length]='"';else{var I1I1I1I1;sb[sb.length]='"',sb[sb.length]=l1I111Il.getFullYear(),sb[sb.length]="-",I1I1I1I1=l1I111Il.getMonth()+1,sb[sb.length]=10>I1I1I1I1?"0"+I1I1I1I1:I1I1I1I1,sb[sb.length]="-",I1I1I1I1=l1I111Il.getDate(),sb[sb.length]=10>I1I1I1I1?"0"+I1I1I1I1:I1I1I1I1,sb[sb.length]="T",I1I1I1I1=l1I111Il.getHours(),sb[sb.length]=10>I1I1I1I1?"0"+I1I1I1I1:I1I1I1I1,sb[sb.length]=":",I1I1I1I1=l1I111Il.getMinutes(),sb[sb.length]=10>I1I1I1I1?"0"+I1I1I1I1:I1I1I1I1,sb[sb.length]=":",I1I1I1I1=l1I111Il.getSeconds(),sb[sb.length]=10>I1I1I1I1?"0"+I1I1I1I1:I1I1I1I1,sb[sb.length]='"'}}},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},strReg1=/["\\\x00-\x1f]/,strReg2=/([\x00-\x1f\\"])/g;this.encode=function(){return function(I1l111l1,I1I1I11l){return sb=[],_dateFormat=I1I1I11l,doEncode(I1l111l1),_dateFormat=null,sb.join("")}}(),this.decode=function(){var dateRe1=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.*\d*)?)Z*$/,dateRe2=new RegExp("^/+Date\\((-?[0-9]+).*\\)/+$","g"),re=/[\"\'](\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})[\"\']/g;return function(json,parseDate){function evalParse(json){return parseDate!==!1&&(json=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx,"$1new Date($2)"),json=json.replace(re,"new Date($1,$2-1,$3,$4,$5,$6)"),json=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx2,"new Date($1)")),eval("("+json+")")}if(""===json||null===json||void 0===json)return json;"object"==typeof json&&(json=this.encode(json));var data=null;if(window.JSON&&window.JSON.parse){var dateReviver=function(I1l111lI,l1I1I11I){if("string"==typeof l1I1I11I&&parseDate!==!1){dateRe1.lastIndex=0;var I1I11II11=dateRe1.exec(l1I1I11I);if(I1I11II11)return l1I1I11I=new Date(I1I11II11[1],I1I11II11[2]-1,I1I11II11[3],I1I11II11[4],I1I11II11[5],I1I11II11[6]);dateRe2.lastIndex=0;var I1I11II11=dateRe2.exec(l1I1I11I);if(I1I11II11)return l1I1I11I=new Date(parseInt(I1I11II11[1]))}return l1I1I11I};try{var json2=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx,'$1"/Date($2)/"');data=window.JSON.parse(json2,dateReviver)}catch(ex){data=evalParse(json)}}else data=evalParse(json);return data}}()},_tool_pkg_.biz.Tool.dateInfo={monthsLong:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],daysLong:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["日","一","二","三","四","五","六"],quarterLong:["一季度","二季度","三季度","四季度"],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["上半年","下半年"],patterns:{d:"yyyy-M-d",D:"yyyy年M月d日",f:"yyyy年M月d日 H:mm",F:"yyyy年M月d日 H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd日",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyy年M月d日 HH:mm:ss",y:"yyyy年MM月"},tt:{AM:"上午",PM:"下午"},ten:{Early:"上旬",Mid:"中旬",Late:"下旬"},today:"今天",clockType:24},_tool_pkg_.biz.Tool.__js_dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g"),_tool_pkg_.biz.Tool.__js_dateRegEx2=new RegExp("[\"']/Date\\(([0-9]+)\\)/[\"']","g"),_tool_pkg_.biz.Tool.encode=_tool_pkg_.biz.Tool.JSON.encode,_tool_pkg_.biz.Tool.decode=_tool_pkg_.biz.Tool.JSON.decode,_tool_pkg_.biz.Tool.formatDate=function(l1I111I1,l1l1l111,I1I11II11){if(!l1I111I1||!l1I111I1.getFullYear||isNaN(l1I111I1))return"";var I1lllllI=l1I111I1.toString(),I1I1II11I=_tool_pkg_.biz.Tool.dateInfo;if("undefined"!=typeof I1I1II11I){var I1l1111lI="undefined"!=typeof I1I1II11I.patterns[l1l1l111]?I1I1II11I.patterns[l1l1l111]:l1l1l111,I1III1III=l1I111I1.getFullYear(),I1l1l1l1=l1I111I1.getMonth(),I1111I1l=l1I111I1.getDate();if("yyyy-MM-dd"==l1l1l111)return I1l1l1l1=10>I1l1l1l1+1?"0"+(I1l1l1l1+1):I1l1l1l1+1,I1111I1l=10>I1111I1l?"0"+I1111I1l:I1111I1l,I1III1III+"-"+I1l1l1l1+"-"+I1111I1l;if("MM/dd/yyyy"==l1l1l111)return I1l1l1l1=10>I1l1l1l1+1?"0"+(I1l1l1l1+1):I1l1l1l1+1,I1111I1l=10>I1111I1l?"0"+I1111I1l:I1111I1l,I1l1l1l1+"/"+I1111I1l+"/"+I1III1III;I1lllllI=I1l1111lI.replace(/yyyy/g,I1III1III),I1lllllI=I1lllllI.replace(/yy/g,(I1III1III+"").substring(2));var l1l1111I=l1I111I1.getHalfYear();I1lllllI=I1lllllI.replace(/hy/g,I1I1II11I.halfYearLong[l1l1111I]);var l1II111Il=l1I111I1.getQuarter();I1lllllI=I1lllllI.replace(/Q/g,I1I1II11I.quarterLong[l1II111Il]),I1lllllI=I1lllllI.replace(/q/g,I1I1II11I.quarterShort[l1II111Il]),I1lllllI=I1lllllI.replace(/MMMM/g,I1I1II11I.monthsLong[I1l1l1l1].escapeDateTimeTokens()),I1lllllI=I1lllllI.replace(/MMM/g,I1I1II11I.monthsShort[I1l1l1l1].escapeDateTimeTokens()),I1lllllI=I1lllllI.replace(/MM/g,10>I1l1l1l1+1?"0"+(I1l1l1l1+1):I1l1l1l1+1),I1lllllI=I1lllllI.replace(/(\\)?M/g,function(l1I111Il,l1I1I11I){return l1I1I11I?l1I111Il:I1l1l1l1+1});var I1II1IIIl=l1I111I1.getDay();I1lllllI=I1lllllI.replace(/dddd/g,I1I1II11I.daysLong[I1II1IIIl].escapeDateTimeTokens()),I1lllllI=I1lllllI.replace(/ddd/g,I1I1II11I.daysShort[I1II1IIIl].escapeDateTimeTokens()),I1lllllI=I1lllllI.replace(/dd/g,10>I1111I1l?"0"+I1111I1l:I1111I1l),I1lllllI=I1lllllI.replace(/(\\)?d/g,function(I1I111Il,I1l1l11I){return I1l1l11I?I1I111Il:I1111I1l});var I11I1III=l1I111I1.getHours(),l111I11I=I11I1III>12?I11I1III-12:I11I1III;12==I1I1II11I.clockType&&I11I1III>12&&(I11I1III-=12),I1lllllI=I1lllllI.replace(/HH/g,10>I11I1III?"0"+I11I1III:I11I1III),I1lllllI=I1lllllI.replace(/(\\)?H/g,function(I1I111Il,I1I1I111){return I1I1I111?I1I111Il:I11I1III}),I1lllllI=I1lllllI.replace(/hh/g,10>l111I11I?"0"+l111I11I:l111I11I),I1lllllI=I1lllllI.replace(/(\\)?h/g,function(l1l111lI,l1I1I111){return l1I1I111?l1l111lI:l111I11I});var I1llll1I=l1I111I1.getMinutes();I1lllllI=I1lllllI.replace(/mm/g,10>I1llll1I?"0"+I1llll1I:I1llll1I),I1lllllI=I1lllllI.replace(/(\\)?m/g,function(l1I111I1,I1I1I11l){return I1I1I11l?l1I111I1:I1llll1I});var l1lllll1l=l1I111I1.getSeconds();I1lllllI=I1lllllI.replace(/ss/g,10>l1lllll1l?"0"+l1lllll1l:l1lllll1l),I1lllllI=I1lllllI.replace(/(\\)?s/g,function(I1l111ll,l1l1l111){return l1l1l111?I1l111ll:l1lllll1l}),I1lllllI=I1lllllI.replace(/fff/g,l1I111I1.getMilliseconds()),I1lllllI=I1lllllI.replace(/tt/g,l1I111I1.getHours()>12||0==l1I111I1.getHours()?I1I1II11I.tt.PM:I1I1II11I.tt.AM);var l1I111I1=l1I111I1.getDate(),l1I111II1="";l1I111II1=10>=l1I111I1?I1I1II11I.ten.Early:20>=l1I111I1?I1I1II11I.ten.Mid:I1I1II11I.ten.Late,I1lllllI=I1lllllI.replace(/ten/g,l1I111II1)}return I1lllllI.replace(/\\/g,"")},_tool_pkg_.biz.Tool.clone=function(l1I111I1,l1I1I11I){function l1l11ll1l(l1l111lI){for(var I1l1l11I=0,I1l11ll1I=l1l111lI.length;I1l11ll1I>I1l1l11I;I1l1l11I++){var l1IIIIIl=l1l111lI[I1l1l11I];delete l1IIIIIl._state,delete l1IIIIIl._id,delete l1IIIIIl._pid,delete l1IIIIIl._uid;for(var I1l1ll111 in l1IIIIIl){var I1l1111ll=l1IIIIIl[I1l1ll111];I1l1111ll instanceof Array&&l1l11ll1l(I1l1111ll)}}}if(null===l1I111I1||void 0===l1I111I1)return l1I111I1;var I1IIIII1=_tool_pkg_.biz.Tool.encode(l1I111I1),l1l1ll111=_tool_pkg_.biz.Tool.decode(I1IIIII1);return l1I1I11I!==!1&&l1l11ll1l(l1l1ll111 instanceof Array?l1l1ll111:[l1l1ll111]),l1l1ll111},_tool_pkg_.encode=_tool_pkg_.biz.Tool.encode,_tool_pkg_.decode=_tool_pkg_.biz.Tool.decode,_tool_pkg_.clone=_tool_pkg_.biz.Tool.clone}(window),function(I1I111I1){var l1l1l11l=(I1I111I1.__jsclazz_,I1I111I1._tool_pkg_),l1l11ll1I=(I1I111I1.__jsclazz_.Clz_Data,l1l1l11l.Tool,{"package":l1l1l11l.NAME+".biz","class":"Events",prefix:l1l1l11l.get("eventPrefix"),suffix:"",controllPrefix:l1l1l11l.get("controlPrefix"),init:function(){l1l11ll1I.bindGlobalEvents()},getEventTarget:function(I1I111I1){var l1I1I111=I1I111I1.target?I1I111I1.target:I1I111I1.srcElement;return l1I1I111},bindEvents:function(I1l111lI,l1I1I11l,I1l11ll11){var l1lllllI=I1l11ll11||"["+l1l11ll1I.prefix+I1l111lI+l1l11ll1I.suffix+"]";return"propertychange"==I1l111lI?l1l1l11l.browser.ie&&(""+l1l1l11l.browser.ie).indexOf("9")>=0?void $(document).on("mouseover",l1lllllI,function(l1I111I1){if(this===l1l11ll1I.getEventTarget(l1I111I1)&&!$(this).data("__hasBindChange")){var l1l1l11l=null,l1l11ll1l=function(I1I111Il){var l1I1I11I=l1l1l11l||l1l11ll1I.getEventTarget(I1I111Il),I1l11ll1I=$(l1I1I11I).data("data-oval")||"";I1l11ll1I!==l1I1I11I.value&&($(l1I1I11I).data("data-oval",l1I1I11I.value),l1I1I11l&&l1I1I11l.call(l1I1I11I,I1I111Il))},I1IIIIIl=function(l1I111I1){l1l1l11l=this,"focus"===l1I111I1.type?($(this).data("data-oval",this.value),document.addEventListener("propertychange",l1l11ll1l,!1)):document.removeEventListener("propertychange",l1l11ll1l,!1)};this.addEventListener("input",l1l11ll1l,!1),this.addEventListener("mouseup",l1l11ll1l,!1),this.addEventListener("cut",l1l11ll1l,!1),this.addEventListener("focus",I1IIIIIl,!1),this.addEventListener("blur",I1IIIIIl,!1),this.addEventListener("keyup",l1l11ll1l,!1),$(this).on("cut",function(){window.setTimeout(l1l11ll1l,5)}),$(this).data("__hasBindChange",!0)}}):void $(document).on("input propertychange",l1lllllI,l1I1I11l):void $(document).on(I1l111lI,l1lllllI,l1I1I11l)},getEvFun:function(l1I111II){return"undefined"==typeof l1l11ll1I[l1l11ll1I.prefix+"_"+l1I111II]&&(l1l11ll1I[l1l11ll1I.prefix+"_"+l1I111II]=function(I1I111II){var l1l1l11l=$(this).attr(l1l11ll1I.prefix+l1I111II+l1l11ll1I.suffix),I1l11ll1l=$(this).attr(l1l11ll1I.controllPrefix+"own"),l1llllll=$(this).attr(l1l11ll1I.prefix+"param")||"";I1l11ll1l?l1l11ll1I.runObjectFunByFun({fun:l1l1l11l,el:this,e:I1I111II,controllId:I1l11ll1l,param:l1llllll}):l1l11ll1I.runGlobalFunByFun({fun:l1l1l11l,el:this,e:I1I111II,param:l1llllll})}),l1l11ll1I[l1l11ll1I.prefix+"_"+l1I111II]},bindGlobalEvents:function(l1l111lI){for(var l1l111lI=l1l111lI||"move,load,tap,touchstart,touchmove,touchend,oninput,toggle,propertychange,hover,blur,change,click,dblclick,focus,focusin,focusout,keydown,keypress,keyup,mousedown,mousewheel,contextmenu,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload",I1l1l11I=l1l111lI.split(","),l1l11ll11="",l1lllll1=0,I1I1II11l=I1l1l11I.length;I1I1II11l>l1lllll1;l1lllll1++)l1l11ll11=I1l1l11I[l1lllll1],l1l11ll1I[l1l11ll1I.prefix+"_"+l1l11ll11]||l1l11ll1I.bindEvents(I1l1l11I[l1lllll1],l1l11ll1I.getEvFun(I1l1l11I[l1lllll1]));l1l1l11l.browser.ie&&(l1l1l11l.browser.ie+"").indexOf("9")>=0&&($(document).on("keydown",function(l1I111I1){return l1I111I1=l1I111I1||event,l1I111I1.ctrlKey&&90==l1I111I1.keyCode?(l1I111I1.returnValue=!1,!1):void 0}),$(document).on("cut",function(I1I111II){I1I111II=I1I111II||event}))},runObjectFunByFun:function(I1l111lI){var l1I1I111=I1l111lI.fun,l1I11II1I=I1l111lI.el,l1IIIII1=I1l111lI.e,I1I1II11I=I1l111lI.controllId,I1l1111lI=I1l111lI.param||"";if(l1I1I111){var I1III1II1=l1l1l11l.getByControllId(I1I1II11I);l1l11ll1I.runObjectFun({object:I1III1II1,fun:l1I1I111,el:l1I11II1I,e:l1IIIII1,controllId:I1I1II11I,param:I1l1111lI})}},runGlobalFunByFun:function(l1I111II){var l1l1l11I=l1I111II.fun,l1l11ll1l=l1I111II.el,l1IIIIIl=l1I111II.e,I1l1ll11l=l1I111II.param||"";if(l1l1l11I){var l1I1111II=l1l1l11l.biz.Tool.getClassAndFun(l1l1l11I,l1I111II);l1l11ll1I.runGlobalFun({clz:l1I1111II.clz||"",fun:l1I1111II.funName||"",el:l1l11ll1l,e:l1IIIIIl,runFun:l1I1111II.fun||"",param:I1l1ll11l})}},runObjectFun:function(I1I111II){var I1l1l11l=I1I111II.object,l1l11ll1l=I1I111II.fun;I1I111II.el;if(I1l1l11l){l1l11ll1I.runGlobalFunTestStart(I1I111II,"");var l1IIIIIl=$("["+l1l1l11l.get("controlPrefix")+"controllId="+I1I111II.controllId+"]").attr(l1l1l11l.get("beforePrifix")+l1l11ll1l),I1I1II11l=l1l1l11l.biz.Tool.getClassAndFun(l1IIIIIl,I1I111II);if(I1I1II11l.clz&&I1I1II11l.fun){var l1I1111I1=I1I1II11l.fun.call(I1I1II11l.clz,I1I111II);if("undefined"!=typeof l1I1111I1&&l1I1111I1===!1)return void l1l11ll1I.runGlobalFunTestEnd(I1I111II,"")}I1l1l11l[l1l11ll1l]&&I1l1l11l[l1l11ll1l](I1I111II);var I1lll1llI=$("["+l1l1l11l.get("controlPrefix")+"controllId="+I1I111II.controllId+"]").attr(l1l1l11l.get("afterPrifix")+l1l11ll1l),I1l1l1l1=l1l1l11l.biz.Tool.getClassAndFun(I1lll1llI,I1I111II);I1l1l1l1.clz&&I1l1l1l1.fun&&I1l1l1l1.fun.call(I1l1l1l1.clz,I1I111II),l1l11ll1I.runGlobalFunTestEnd(I1I111II,"")}},runGlobalFun:function(l1I111Il){var I1I1I11I=l1I111Il.clz,I1l11ll1l=l1I111Il.fun;if(I1I1I11I){l1l11ll1I.runGlobalFunTestStart(l1I111Il,"");l1I111Il.el;if(I1I1I11I[I1l11ll1l+"Before"]){var I1llllll=I1I1I11I[I1l11ll1l+"Before"](l1I111Il);if("undefined"!=typeof I1llllll&&I1llllll===!1)return void l1l11ll1I.runGlobalFunTestEnd(l1I111Il,"")}I1I1I11I[I1l11ll1l]&&I1I1I11I[I1l11ll1l](l1I111Il),I1I1I11I[I1l11ll1l+"After"]&&I1I1I11I[I1l11ll1l+"After"](l1I111Il),l1l11ll1I.runGlobalFunTestEnd(l1I111Il,"")}},runGlobalFunTestStart:function(I1I111Il,l1l1l11l){var l1l11ll11=I1I111Il.clz,I1lllllI=I1I111Il.fun;if(l1l11ll11)return l1l11ll11[I1lllllI+l1l1l11l+"_start"]&&l1l11ll11[I1lllllI+l1l1l11l+"_start"]?void l1l11ll11[I1lllllI+l1l1l11l+"_start"](I1I111Il):void 0},runGlobalFunTestEnd:function(l1I111Il,I1l1l11I){var l1l11ll1I=l1I111Il.clz,I1llllll=l1I111Il.fun,l1I1II11I=l1I111Il.ownClz;if(l1l11ll1I)return l1I1II11I&&l1I1II11I[I1llllll+I1l1l11I+"_end"]?void l1I1II11I[I1llllll+I1l1l11I+"_end"](l1I111Il):l1l11ll1I[I1llllll+I1l1l11I+"_end"]&&l1l11ll1I[I1llllll+I1l1l11I+"_end"]?void l1l11ll1I[I1llllll+I1l1l11I+"_end"](l1I111Il):void 0}});l1l11ll1I=l1l1l11l.biz.Tool.crateOrUpdateClass(l1l11ll1I),oui.os.mobile||l1l11ll1I.init()}(window);var test4Date=new Date;!function(){var FlowBiz={"package":"oui.flow","class":"FlowCommon",flowData:{},isNotCheckSaved:!1,newId:0,toProcessProps:!1,isVertical:!0,zoomScale:1,themeId:1,newId4server:2,contextMenus:{},eventBefore2hideTipsOrActionSheetFunNames:"event2setAutoBranch,event2setSelectBranch,event2deleteBranch,event2replaceNode,event2editProp,event2addNode,event2delNode,event2addBrotherNode,event2delCurrNode,event2trans,event2vertical,event2renderByThemeId",eventBefore2validateFunNames:"saveWorkFlow,event2addNode,event2addBrotherNode,event2replaceNode,event2editProp,event2trans,event2vertical,event2processProps,event2processGraph",setInterceptFuns:function(I1l111l1,I1I1I111){var I1l11ll1I,l1llllll=this;I1l11ll1I="string"==typeof I1l111l1?I1l111l1.split(","):I1l111l1||[];for(var l1l1ll11l,I1l1111l1=0,I1III1III=I1l11ll1I.length;I1III1III>I1l1111l1;I1l1111l1++)l1l1ll11l=I1l11ll1I[I1l1111l1],l1l1ll11l&&(l1llllll[l1l1ll11l+"Before"]=I1I1I111)},getFlowUi:function(){throw new Error("未实现getFlowUi方法")},getFlowBiz:function(){throw new Error("未实现getFlowBiz方法")},nodeIdMap:{},initStart:function(l1l111ll){var l1l1l11l=this;l1l1l11l.design4Runtime="true"==oui.getParam("design4Runtime")?!0:!1,l1l1l11l.offsetY=100,l1l1l11l.x_distance_S=60,l1l1l11l.x_distance=180-l1l1l11l.offsetY,l1l1l11l.y_distance=100,l1l1l11l.rootPosX=150,l1l1l11l.nodeWidth=65,l1l1l11l.nodeHeight=65,l1l1l11l.nodeSplitWidth=16,l1l1l11l.rootPosY=10,l1l1l11l.Events={click:"click",actionMenu:"contextmenu"},oui.os.mobile?(l1l1l11l.Events={click:"tap",actionMenu:"tap"},l1l1l11l.isVertical=!0):(l1l1l11l.isFlowNew&&(l1l1l11l.flowData.viewType=l1l1l11l.ViewType.horizontal.value),l1l1l11l.isVertical=!1);var l1l11ll1l=this.getFlowUi();l1l11ll1l.setBiz(l1l1l11l),l1l1l11l.initAttrsByUrlParam(),l1l11ll1l.config=$.extend(!0,l1l11ll1l.config,l1l11ll1l.themes[l1l1l11l.themeId]||{}),template.helper("oui",oui),template.helper("FlowBiz",l1l1l11l),template.helper("console",console),oui.parse(),l1l11ll1l.render(),l1l1l11l.setInterceptFuns(l1l1l11l.eventBefore2validateFunNames,function(l1l111l1){l1l1l11l.updateWorkFlowProps();var I1I1I11I=l1l1l11l.validate();return I1I1I11I?void 0:!1})},initAttrsByUrlParam:function(){var l1I111II=oui.getParam(),l1l1l111=this;for(var I1I11II1I in l1I111II)l1I111II[I1I11II1I]&&"true"==l1I111II[I1I11II1I]?l1l1l111[I1I11II1I]=!0:l1I111II[I1I11II1I]&&"false"==l1I111II[I1I11II1I]?l1l1l111[I1I11II1I]=!1:l1l1l111[I1I11II1I]=l1I111II[I1I11II1I]},initEnd:function(){var I1I111II=this;I1I111II.inited=!0,data=I1I111II.flowData,I1I111II.oldProcessPropData={name:data.name||"",importance:data.importance}},changeView:function(){},serverData2Model:function(){var I1l111ll=this,I1I1I11I=I1l111ll.flowData.workFlowNodeList||[],I1I11II1I="",l1llllll="";I1l111ll.flowData.viewType==I1l111ll.ViewType.vertical.value?I1l111ll.isVertical=!0:I1l111ll.isVertical=!1,I1l111ll.isPreview&&I1I1I11I&&I1I1I11I[0]&&(I1I1I11I[0].nodeDisplayName=I1l111ll.currLoginNodeName,I1I1I11I[0].nodeName=I1l111ll.currLoginNodeName,I1I1I11I[0].nodeId=I1l111ll.currLoginNodeId);for(var l1l1ll11I=0,l1l1111lI=I1I1I11I.length;l1l1111lI>l1l1ll11I;l1l1ll11I++)I1I1I11I[l1l1ll11I].name=I1I1I11I[l1l1ll11I].nodeDisplayName,I1I11II1I=I1I1I11I[l1l1ll11I].parentId||[],"object"!=typeof I1I11II1I&&(I1I11II1I=[I1I11II1I]),l1llllll=I1I1I11I[l1l1ll11I].nodeType,l1llllll&&"join"==l1llllll&&(I1I1I11I[l1l1ll11I].isJoin=!0),l1llllll&&"split"==l1llllll&&(I1I1I11I[l1l1ll11I].isSplit=!0),l1llllll&&"end"==l1llllll&&(I1I1I11I[l1l1ll11I].isEnd=!0),I1I1I11I[l1l1ll11I].id=I1I1I11I[l1l1ll11I].id+"",I1I1I11I[l1l1ll11I].pid=I1I11II1I?I1I11II1I.join(","):"",I1l111ll.nodePersonMap2nodePersonList(I1I1I11I[l1l1ll11I])},nodePersonMap2nodePersonList:function(I1l111lI){var I1I1I11I=this;if(I1I1I11I.isIndex){var I1I11II11=[];I1l111lI.nodePersonList=I1l111lI.nodePersonList||I1I11II11;for(var l1IIIII1=[],I1I1II111=I1l111lI.nodePersonList,l1l1111l1=0,I1III1III=I1I1II111.length;I1III1III>l1l1111l1;l1l1111l1++)I1I1II111[l1l1111l1].comment&&l1IIIII1.push(I1I1II111[l1l1111l1].comment);I1l111lI.comments=l1IIIII1}},model2ServerData:function(){for(var l1l111lI=this,I1l1l11I=l1l111lI.workFlowNodeList||[],l1l11ll1l="",I1lllllI=[],I1l1ll11l=0,I1I1111I1=I1l1l11I.length;I1I1111I1>I1l1ll11l;I1l1ll11l++)I1l1l11I[I1l1ll11l].nodeDisplayName=I1l1l11I[I1l1ll11l].name||I1l1l11I[I1l1ll11l].nodeName,l1l11ll1l=I1l1l11I[I1l1ll11l].pid+""||"",I1l1l11I[I1l1ll11l].isSplit&&(I1l1l11I[I1l1ll11l].nodeType="split",I1l1l11I[I1l1ll11l].nodeName=void 0,I1l1l11I[I1l1ll11l].nodeDisplayName=void 0,I1l1l11I[I1l1ll11l].nodeId=void 0),I1l1l11I[I1l1ll11l].isJoin&&(I1l1l11I[I1l1ll11l].nodeType="join",I1l1l11I[I1l1ll11l].nodeName=void 0,I1l1l11I[I1l1ll11l].nodeDisplayName=void 0,I1l1l11I[I1l1ll11l].nodeId=void 0),I1l1l11I[I1l1ll11l].isEnd&&(I1l1l11I[I1l1ll11l].nodeType="end",I1l1l11I[I1l1ll11l].nodeName=void 0,I1l1l11I[I1l1ll11l].nodeDisplayName=void 0,I1l1l11I[I1l1ll11l].nodeId=void 0),I1l1l11I[I1l1ll11l].nodeName&&I1lllllI.push(I1l1l11I[I1l1ll11l].nodeName),I1l1l11I[I1l1ll11l].parentId=l1l11ll1l?l1l11ll1l.split(","):void 0;l1l111lI.flowData.workFlowNodeNames=I1lllllI.join(","),l1l111lI.flowData.bizId||(l1l111lI.flowData.bizId=l1l111lI.flowData.moduleId,l1l111lI.flowData.bizType=l1l111lI.flowData.moduleType)},getFlowData:function(){var l1l111l1=this;l1l111l1.model2ServerData();var l1I1I11I=l1l111l1.flowData;return l1I1I11I.workFlowNodeList=l1l111l1.workFlowNodeList,l1I1I11I},saveWorkFlowCallback:function(msg,cfg){console.log("save workflow callback...");var _self=this,id=msg.id;if(msg.isNew=_self.isFlowNew,_self.flowData.id=id,cfg){var saveType=$(cfg.el).attr("saveType"),saveWorkFlowCallbackBiz=_self.moduleBizController||$(cfg.el).attr("saveWorkFlowCallbackBiz");if(saveWorkFlowCallbackBiz&&"save4test"==saveType){var successFun=function(I1l111lI){_self.getWorkFlowFromServerCallback(I1l111lI,cfg,id)},errorFun=function(l1I111II){_self.getWorkFlowFromServerError(l1I111II,cfg,id)},saveSuccess=function(msg){eval(saveWorkFlowCallbackBiz+".getWorkFlowFromServer(successFun,errorFun);")},saveError=function(msg){eval(saveWorkFlowCallbackBiz+".getWorkFlowFromServer(successFun,errorFun);")};try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowSuccess(msg,cfg,saveSuccess,saveError)")}catch(eve){throw eve}}if(saveWorkFlowCallbackBiz)try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowSuccess(msg,cfg);")}catch(eve){throw eve}}},saveWorkFlowError:function(msg,cfg){var _self=this;if("string"==typeof msg&&console.log(msg),console.log("保存流程模板失败"),cfg){var saveWorkFlowCallbackBiz=_self.moduleBizController||$(cfg.el).attr("saveWorkFlowCallbackBiz");if(saveWorkFlowCallbackBiz){if(eval(saveWorkFlowCallbackBiz)==_self)return;try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowError(msg,cfg);")}catch(eve){throw eve}}}},getWorkFlowFromServerCallback:function(I1I111I1,l1l1l11l,I1l11ll1l){var l1lllllI=this;if(l1l1l11l&&l1l1l11l.el){var l1I1II11I=$(l1l1l11l.el).attr("saveType");if("save4test"==l1I1II11I){var l1I1111Il=l1lllllI.getFlowData();l1lllllI.testCompareJson(l1I1111Il,I1I111I1)}}},testCompareJson:function(l1l111lI,l1l1l111){var l1l11ll1I=oui.biz.Tool,I1lllllI=this,l1I1II11l=l1l11ll1I.encode(l1l111lI),I1l1111l1=l1l11ll1I.encode(l1l1l111);return"undefined"==typeof oui.showCompareJsonDialog?void l1l11ll1I.require(["res_engine/workflow/compareJson.js"],function(){I1lllllI.testCompareJson4recuired(l1I1II11l,I1l1111l1)}):void I1lllllI.testCompareJson4recuired(l1I1II11l,I1l1111l1)},testCompareJson4recuired:function(l1I111Il,I1l1l111){oui.getTop().oui.showCompareJsonDialog({leftJson:l1I111Il,rightJson:I1l1l111})},getWorkFlowFromServerError:function(I1l111lI,I1I1I11l,I1I11II1l){console.log("加载服务端流程数据数据失败;id="+I1I11II1l),console.log(I1l111lI)},getWorkFlowFromServer:function(l1I111Il){oui.getTop().oui.alert("流程图 没有实现getWorkFlowFromServer接口")},updateWorkFlowProps:function(){var I1I111I1=this;if($.trim($("#flow-ui-processProp").html())){var l1I1I111=I1I111I1.getFlowData(),I1l11ll11=oui.getFormValue(),I1lllllI=oui.getFormData();I1l11ll11.selectPerson4right&&(I1l11ll11.selectPerson4right=I1lllllI.selectPerson4right),$.extend(!0,l1I1I111,I1l11ll11);for(var I1I1II111=I1l11ll11.selectPerson4right||"[]",l1I1111II=oui.parseJson(I1I1II111),l1III1IIl=[],l1l1l1ll=0,I1111l11=l1I1111II.length;I1111l11>l1l1l1ll;l1l1l1ll++)l1III1IIl.push({toId:l1I1111II[l1l1l1ll].id,toName:l1I1111II[l1l1l1ll].name,toType:l1I1111II[l1l1l1ll].typeFlag});l1I1I111.rights=l1III1IIl}},changed:function(){this.isEdit&&this.inited&&(this.hasChange=!0,this.changeView())},hasSaveData:function(){var I1l111ll=this;return I1l111ll.isNotCheckSaved?!0:!this.hasChange},clear4topDialog:function(){try{var l1I111II=this;if(l1I111II.editPropDialog){var l1l1l11I=l1I111II.editPropDialog.getEl();oui.getTop().oui.clearByContainer(l1l1l11I),oui.getTop().$(l1l1l11I).remove()}if(l1I111II.editBranchDialog){var l1l1l11I=l1I111II.editBranchDialog.getEl();oui.getTop().oui.clearByContainer(l1l1l11I),oui.getTop().$(l1l1l11I).remove()}}catch(l1I11II1l){}},saveWorkFlow:function(I1l111ll){var l1I1I111=this,l1I11II1l=l1I1I111.getFlowData(),I1IIIII1=(oui.getContextPath(),oui.validate4value(l1I11II1l.workFlowNodeList.length,{failMsg:"流程节点数不能小于{{validateValue}}",minValue:l1I1I111.ValidateConfig.workFlowNodeListMinSize,failMode:l1I1I111.ValidateConfig.failMode}));if(!I1IIIII1)return!1;l1I1I111.clear4topDialog();var I1l1ll11l=oui.getPageParam("saveWorkFlowUrl");oui.postData(I1l1ll11l,l1I11II1l,function(l1I111I1){if(l1I111I1.success){l1I1I111.hasChange=!1,l1I1I111.isNotCheckSaved=!0;var I1I1I111=oui.parseJson(l1I111I1.msg);l1I1I111.saveWorkFlowCallback.call(l1I1I111,I1I1I111,I1l111ll)}},function(l1I111I1){l1I1I111.saveWorkFlowError.call(l1I1I111,l1I111I1,I1l111ll)})},init4default:function(){var I1l111l1=this;$.extend(!0,I1l111l1,{flowData:{state:I1l111l1.StateEnum.enable.value,viewType:I1l111l1.ViewType.vertical.value,importance:I1l111l1.WorkFlowImportance.normal.value}})},event2formList:function(){var I1l111lI=this;I1l111lI.clear4topDialog();var I1I1I11l=oui.getPageParam("returnFormListUrl"),I1I11II1l={formType:"bizForm"};return I1I1I11l=oui.addParams(I1I1I11l,I1I11II1l),oui.getTopMain().oui.go(I1I1I11l,{},!0),!1},clearNodes:function(l1I111I1){var l1l1l11I=this;l1l1l11I.workFlowNodeList=[],$.each(l1l1l11I.emptyNodes,function(){l1l1l11I.workFlowNodeList.push($.extend(!0,{},this))}),l1l1l11I.workFlowNodeList[0].formRight="-2",l1l1l11I.flowData.workFlowNodeList=l1l1l11I.workFlowNodeList,l1l1l11I.serverData2Model(),l1l1l11I.refresh()},initEmptyNodes:function(l1l111ll,l1I1I11I){var l1I11II1I=this,I1IIIII1=[{id:"jsuuid-1",nodeType:"person",nodeDisplayName:"发起人",formRight:"-2",nodeRight:l1I11II1I.WorkFlowNodeRight.cancel.name,nodeName:l1I1I11I.currLoginNodeName,nodeId:l1I1I11I.currLoginNodeId},{id:"jsuuid-2",nodeType:"end",nodeName:"end",nodeId:"end",parentId:["jsuuid-1"]}];return!l1l111ll||!l1l111ll.workFlowNodeList||l1l111ll.workFlowNodeList.length<2?(l1I11II1I.emptyNodes=I1IIIII1,l1I11II1I.emptyNodes):(l1I11II1I.emptyNodes=[{id:l1l111ll.workFlowNodeList[0].id,nodeType:"person",nodeDisplayName:"发起人",nodeRight:l1l111ll.workFlowNodeList[0].nodeRight||"",nodeName:l1I1I11I.currLoginNodeName,nodeId:l1I1I11I.currLoginNodeId},{id:l1l111ll.workFlowNodeList[l1l111ll.workFlowNodeList.length-1].id,nodeType:"end",nodeName:"end",nodeId:"end",parentId:[l1l111ll.workFlowNodeList[0].id]}],l1I11II1I.emptyNodes)},findNodeRightValue:function(l1l111ll){var l1I1I111=this;return l1l111ll&&l1l111ll.nodeRight?l1l111ll.nodeRight:[l1I1I111.WorkFlowNodeRight.addNodes.name,l1I1I111.WorkFlowNodeRight.rollBack.name,l1I1I111.WorkFlowNodeRight.stop.name,l1I1I111.WorkFlowNodeRight.notify.name].join(",")},init:function(param){var ouiInDialog=oui.getParam("ouiInDialog"),ouiDialogId=oui.getParam("ouiDialogId");if(ouiDialogId&&ouiInDialog){var currDialog=oui.getCurrUrlDialog();if(currDialog){var workflowJSON=currDialog.attr("workflowJSON");workflowJSON&&("object"==typeof workflowJSON&&(workflowJSON=oui.parseString(workflowJSON),workflowJSON=workflowJSON.replace(/jsuuid-/gi,oui.getUUIDLong())),param.workFlowJSONStr=workflowJSON)}}if(!param||"object"!=typeof param)throw new Error("oui.flow.FlowBiz.init流程初始化必须传入对象参数");var sd=new Date,_self=this;_self.init4default(),_self.urlParam=oui.getParam()||{},_self.urlParam.method&&"viewFlowDiagram"!=_self.urlParam.method?_self.isIndex=!1:_self.isIndex=!0,_self.urlParam.hideSaveButton&&"true"==_self.urlParam.hideSaveButton?_self.isHideSaveButton=!0:_self.isHideSaveButton=!1,_self.isIndex&&(_self.isHideSaveButton=!0);var workFlowJson=null;if(param.workFlowJSONStr&&"null"!=param.workFlowJSONStr)workFlowJson=oui.parseJson(param.workFlowJSONStr),_self.initEmptyNodes(workFlowJson,param);else{_self.initEmptyNodes(null,param);var arr=[];$.each(_self.emptyNodes,function(){arr.push($.extend(!0,{},this))}),workFlowJson={workFlowNodeList:arr}}param.flowData=workFlowJson,param.isPreview&&(param.isHideSaveButton=!0);var controller=$("body",window.parent.document).attr("oui-controller"),moduleBizController=controller;moduleBizController=controller&&window!=window.parent?"window.parent."+controller:window.FlowBizModuleController;try{if(!param.workFlowJSONStr||"null"==param.workFlowJSONStr){var json=eval(moduleBizController+".getWorkFlowJson4String()"),moduleJson=oui.parseJson(json);$.extend(!0,param.flowData,moduleJson)}}catch(e){}if($.extend(!0,_self,param),_self.moduleBizController=moduleBizController,_self.serverData2Model(),_self.initStart(param),_self.isEdit&&(_self.chooseTypeItemsJson=oui.parseString([{display:_self.WorkFlowChooseType.single.desc,value:_self.WorkFlowChooseType.single.value},{display:_self.WorkFlowChooseType.multi.desc,value:_self.WorkFlowChooseType.multi.value},{display:_self.WorkFlowChooseType.all.desc,value:_self.WorkFlowChooseType.all.value},{display:_self.WorkFlowChooseType.competition.desc,value:_self.WorkFlowChooseType.competition.value}]),_self.nodeRightItemsJson=oui.parseString([{display:_self.WorkFlowNodeRight.addNodes.desc,value:_self.WorkFlowNodeRight.addNodes.name
},{display:_self.WorkFlowNodeRight.rollBack.desc,value:_self.WorkFlowNodeRight.rollBack.name},{display:_self.WorkFlowNodeRight.stop.desc,value:_self.WorkFlowNodeRight.stop.name},{display:_self.WorkFlowNodeRight.notify.desc,value:_self.WorkFlowNodeRight.notify.name}]),_self.nodeRightItemsJson4notify=oui.parseString([{display:_self.WorkFlowNodeRight.notify.desc,value:_self.WorkFlowNodeRight.notify.name}]),_self.nodeRightItemsJson4cancel=oui.parseString([{display:_self.WorkFlowNodeRight.cancel.desc,value:_self.WorkFlowNodeRight.cancel.name}]),_self.otherAttrs4notifyNodeJson=oui.parseString({notifyJson:oui.parseJson(_self.nodeRightItemsJson4notify),nodeRightItemsJson:oui.parseJson(_self.nodeRightItemsJson)}),_self.nodePropDialogActions=[{text:"确定",id:"confirm-ok",cls:"oui-dialog-ok",action:function(){var l1I111II=_self.updateNodeProp();l1I111II&&(_self.clearNodePropOuiControls(),_self.editPropDialog.hide())}},{cls:"oui-dialog-cancel",text:"取消",id:"cancel",action:function(){_self.clearNodePropOuiControls(),_self.editPropDialog.hide()}}],_self.branchEditActions=[{text:"确定",id:"confirm-ok",cls:"oui-dialog-ok",action:function(){var I1I111I1=_self.updateNodeBranch();("boolean"!=typeof I1I111I1||I1I111I1)&&_self.editBranchDialog.hide()}},{cls:"oui-dialog-cancel",text:"取消",id:"cancel",action:function(){_self.editBranchDialog.hide()}}],!_self.formRightHtml&&oui.os.mobile)){var cellRightUrl=oui.getPageParam("cellRightUrl");_self.design4Runtime||(_self.formRightHtml=oui.loadUrl(cellRightUrl,!0,!1))}var workFlowNodeList=_self.flowData.workFlowNodeList?_self.flowData.workFlowNodeList:arr;_self.workFlowNodeList=workFlowNodeList,"undefined"!=typeof _self.currentNodeIdx&&_self.currentNodeIdx>=0?_self.currentNodeId=_self.workFlowNodeList[_self.currentNodeIdx].id||null:_self.currentNodeId=null,_self.refresh(),_self.bindEvents(),this.initEnd()},setModuleBizController:function(I1I111Il){var I1l1l11l=this;I1l1l11l.moduleBizController=I1I111Il},ADD_TYPE:oui.SelectPerson_ADD_TYPE,bindEvents:function(){},event2showEditIcon:function(l1l111l1){var l1l1l11l=this,I1l11ll1l=$(l1l111l1.el).attr("nodeid"),l1IIIIII=l1l1l11l.nodeIdMap[I1l11ll1l];l1l1l11l.isEdit&&l1IIIIII&&"end"!=l1IIIIII.nodeType&&$(l1l111l1.el).attr("href",$(l1l111l1.el).attr("node-img-high-src"))},event2hideEditIcon:function(I1l111lI){var I1I1I11l=this,I1l11ll1I=$(I1l111lI.el).attr("nodeid"),l1lllll1=I1I1I11l.nodeIdMap[I1l11ll1I];I1I1I11l.isEdit&&l1lllll1&&"end"!=l1lllll1.nodeType&&$(I1l111lI.el).attr("href",$(I1l111lI.el).attr("node-img-src"))},event2contextMenuBefore:function(I1I111Il){var I1I1I11I,l1I11II1I=this,I1llllll=$(I1I111Il.el).attr("toId");if(l1I11II1I.isPreview&&!I1llllll)return!1;if(I1llllll){if(l1I11II1I.design4Runtime)return!1;if(oui.os.mobile)return!1;I1I1I11I=I1llllll;var I1l1ll11I=$(I1I111Il.el).attr("fromId");if(!I1l1ll11I)return!1;var l1l1111lI=l1I11II1I.nodeIdMap[I1l1ll11I];if(!l1l1111lI)return!1;var I1III1III=l1I11II1I.nodeIdMap[I1I1I11I];return I1III1III&&I1III1III.notifyNode?!1:I1III1III&&I1III1III.isSplit?!1:l1l1111lI.isSplit||l1I11II1I.isIndex||l1I11II1I.isPreview?!0:!1}I1I1I11I=$(I1I111Il.el).attr("nodeId");var I1III1III=l1I11II1I.nodeIdMap[I1I1I11I];if(l1I11II1I.isIndex){if(I1III1III.isJoin)return!1;if(!I1III1III.state)return!1;if(I1III1III.state==l1I11II1I.WorkFlowNodeState.state_done.value){if(!I1III1III.nodePersonList)return!1;if(!I1III1III.nodePersonList.length)return!1}if(I1III1III.state===l1I11II1I.WorkFlowNodeState.state_none.value)return!1;if(!(I1III1III.comments&&0!=I1III1III.comments.length||I1III1III.nodePersonList&&0!=I1III1III.nodePersonList.length&&"person"!=I1III1III.nodeType)&&"person"==I1III1III.nodeType&&I1III1III.state!=l1I11II1I.WorkFlowNodeState.state_done.value)return!1}return"undefined"!=typeof I1III1III.isSplit&&I1III1III.isSplit?!1:void 0},updateNodeProp:function(){var l1l111ll=this,I1I1I11l=l1l111ll.editPropDialog.getEl(),I1I11II11=($(I1I1I11l),oui.getTop().oui.getById("chooseType")),l1IIIIII=I1I11II11.attr("value");l1IIIIII=parseInt(l1IIIIII);var l1l1ll111=oui.getTop().oui.getById("nodeRight"),I1I1111II=oui.getTop().oui.getById("notifyNode"),l1lll1lll="";l1l1ll111&&(l1lll1lll=l1l1ll111.attr("value"));var l1l1l1l1=oui.getTop().oui.getById("nodeDisplayName"),I1111l1l=l1l1l1l1.attr("value");I1111l1l=$.trim(I1111l1l);var I1I1111l=l1l111ll.editPropDialog.attr("nodeId"),l1II111II=l1l111ll.getIndexByNodeId(I1I1111l),I1II1III1=l1l111ll.flowData.workFlowNodeList[l1II111II].nodeDisplayName;if(l1l111ll.flowData.workFlowNodeList[l1II111II].nodeDisplayName=I1111l1l||l1l111ll.flowData.workFlowNodeList[l1II111II].nodeName,l1l111ll.flowData.workFlowNodeList[l1II111II].chooseType=l1IIIIII,l1l1ll111&&(l1l111ll.flowData.workFlowNodeList[l1II111II].nodeRight=l1lll1lll),I1I1111II){var l11I1IIl=I1I1111II.attr("value")||!1;"string"==typeof l11I1IIl&&(l11I1IIl="true"==l11I1IIl?!0:!1),l11I1IIl&&(l1l111ll.flowData.workFlowNodeList[l1II111II].branchObject=null),l1l111ll.flowData.workFlowNodeList[l1II111II].notifyNode=l11I1IIl}l1l111ll.flowData.workFlowNodeList[l1II111II].name=I1111l1l||l1l111ll.flowData.workFlowNodeList[l1II111II].nodeName;try{var I111l11I=l1l111ll.findFormRightByUI();l1l111ll.flowData.workFlowNodeList[l1II111II].formRight=I111l11I}catch(l1llll1I){}var I1lllll1l=l1l111ll.validateWorkFlowNode(l1l111ll.flowData.workFlowNodeList[l1II111II]);return I1lllll1l?(l1l111ll.refresh(),!0):(l1l111ll.flowData.workFlowNodeList[l1II111II].nodeDisplayName=I1II1III1,l1l111ll.flowData.workFlowNodeList[l1II111II].name=I1II1III1,!1)},findFormRightByUI:function(){var I1l111lI="";try{I1l111lI=oui.os.mobile?oui.getTop().formBizControls.getData4string():oui.getTop().$("#form-right-iframe-flow")[0].contentWindow.formBizControls.getData4string()}catch(I1l1l11l){}return I1l111lI||(I1l111lI="-1"),I1l111lI},fillbackFormRight:function(l1I111Il){try{oui.getTop().formBizControls.fillbackRight(l1I111Il)}catch(l1l1l11I){}},clearNodePropOuiControls:function(){var l1I111II=this,l1l1l11l=l1I111II.editPropDialog.attr("chooseTypeOuiId"),I1I11II11=l1I111II.editPropDialog.attr("nodeDisplayNameOuiId");l1l1l11l&&oui.getTop().oui.clearByOuiId(l1l1l11l),I1I11II11&&oui.getTop().oui.clearByOuiId(I1I11II11)},updateNodePropOuiIds:function(){var l1l111l1=this,I1l1l11I=oui.getTop().oui.getById("chooseType"),I1I11II1I=oui.getTop().oui.getById("nodeDisplayName");I1l1l11I&&l1l111l1.editPropDialog.attr("chooseTypeOuiId",I1l1l11I.attr("ouiId")),I1I11II1I&&l1l111l1.editPropDialog.attr("nodeDisplayNameOuiId",I1I11II1I.attr("ouiId"));var I1lllll1=l1l111l1.editPropDialog.attr("nodeId"),l1l1ll11I=l1l111l1.getIndexByNodeId(I1lllll1),I1l1111ll=l1l111l1.flowData.workFlowNodeList[l1l1ll11I].formRight;if(I1l1111ll||(I1l1111ll="-1",0==l1l1ll11I&&(I1l1111ll="-2")),l1l111l1.flowData.workFlowNodeList[l1l1ll11I].formRight=I1l1111ll,oui.os.mobile){l1l111l1.fillbackFormRight(I1l1111ll);var I1lll1lll=$(l1l111l1.editPropDialog.getEl()),I1l1l1l1=I1lll1lll.find(".oui-html-dialog-content");I1l1l1l1.hasClass("flow-ui-nodeProps-dialog-box")||I1l1l1l1.addClass("flow-ui-nodeProps-dialog-box")}},event2cancelEditProp:function(l1I111Il){var l1l1l11l=this;return l1l1l11l.hideContextMenu&&l1l1l11l.hideContextMenu(),!1},event2setLineCondition:function(l1I111II){var I1l1l11l=this,l1I11II1I=$(l1I111II.el).attr("fromId"),l1llllll=$(l1I111II.el).attr("toId");if(l1I11II1I&&l1llllll){var I1l1ll111=I1l1l11l.nodeIdMap[l1I11II1I],l1I1111Il=I1l1l11l.nodeIdMap[l1llllll];I1l1ll111&&l1I1111Il&&!I1l1ll111.isSplit}},event2mouseenterJoin:function(l1l111l1){var I1I1I11I=this,l1l11ll11=I1I1I11I.getFlowUi(),l1IIIIII=l1l111l1.el;$(l1IIIIII).attr("href",l1l11ll11.config.basePath+I1I1I11I.getJoinImgSrc(!0));var I1I1II11I=$(l1l111l1.el).attr("nodeId"),l1l1111ll=(I1I1I11I.nodeIdMap[I1I1II11I],I1I1I11I.hasElWidth(l1l111l1.el));oui.showTips({el:l1l111l1.el,content:"添加节点",left:l1l1111ll?0:8,top:l1l1111ll?8:26,mustRender:!0,singleton:!0})},event2leaveJoin:function(I1I111II){var I1l1l11I=this,I1I11II1I=I1l1l11I.getFlowUi(),I1lllllI=I1I111II.el;$(I1lllllI).attr("href",I1I11II1I.config.basePath+I1l1l11I.getJoinImgSrc(!1)),oui.hideTips()},hasElWidth:function(l1I111II){var I1I1I111=$(l1I111II).width();return 0==I1I1I111?!1:!0},event2mouseenterLine:function(I1I111Il){var l1l1l11I=this,I1l11ll1l=l1l1l11I.getFlowUi(),l1IIIIII=$(I1I111Il.el).attr("fromId"),I1l1ll11l=$(I1I111Il.el).attr("toId");if(l1IIIIII&&I1l1ll11l){var I1I1111I1=l1l1l11I.nodeIdMap[l1IIIIII],l1lll1llI=l1l1l11I.nodeIdMap[I1l1ll11l];if(I1I1111I1&&l1lll1llI&&(I1I1111I1.isSplit||l1l1l11I.isIndex)&&!l1l1l11I.design4Runtime&&!l1lll1llI.isSplit){var I1l1l1l1,I1111I1I=I1I111Il.el;$(I1I111Il.el).is("image")?(I1111I1I=$(I1I111Il.el).parent().find("path[fromid="+l1IIIIII+"][toid="+I1l1ll11l+"]")[0],I1l1l1l1=I1I111Il.el,I1l1l1l1&&$(I1l1l1l1).attr("href",I1l11ll1l.config.basePath+l1l1l11I.getSplitImgSrc(!0))):(I1l1l1l1=$(I1I111Il.el).parent().find("image[fromid="+l1IIIIII+"][toid="+I1l1ll11l+"]")[0],I1l1l1l1&&$(I1l1l1l1).attr("href",I1l11ll1l.config.basePath+l1l1l11I.getSplitImgSrc(!0)));var I1l1111l="设置分支条件";if(l1l1l11I.isIndex||l1l1l11I.isPreview?(I1l1111l="查看分支条件",l1lll1llI&&l1lll1llI.notifyNode&&(I1l1111l="知会节点无分支条件")):l1lll1llI&&l1lll1llI.notifyNode&&(I1l1111l="知会节点不能设置分支条件"),I1l1l1l1){var I1ll111ll=l1l1l11I.hasElWidth(I1l1l1l1);oui.showTips({el:I1l1l1l1,content:I1l1111l,left:I1ll111ll?0:8,top:I1ll111ll?8:26,mustRender:!0,singleton:!0})}$(I1111I1I).attr("stroke-width","5"),$(I1111I1I).css("stroke-width","5"),$(I1111I1I).attr("stroke","#ffaa1f"),$(I1111I1I).css("stroke","#ffaa1f")}}},event2leaveLine:function(l1I111Il){var I1I1I11I=this,I1l11ll11=I1I1I11I.getFlowUi(),I1lllllI=$(l1I111Il.el).attr("fromId"),l1I1II11I=$(l1I111Il.el).attr("toId");if(I1lllllI&&l1I1II11I){var I1l1111lI=I1I1I11I.nodeIdMap[I1lllllI],l1III1IIl=I1I1I11I.nodeIdMap[l1I1II11I];if(I1l1111lI&&l1III1IIl&&(I1l1111lI.isSplit||I1I1I11I.isIndex)&&!l1III1IIl.isSplit){var I1l1l1l1=l1I111Il.el;if($(l1I111Il.el).is("image")){I1l1l1l1=$(l1I111Il.el).parent().find("path[fromid="+I1lllllI+"][toid="+l1I1II11I+"]")[0];var I1111l11=l1I111Il.el;$(I1111l11).attr("href",I1l11ll11.config.basePath+I1I1I11I.getSplitImgSrc(!1))}else{var I1111l11=$(l1I111Il.el).parent().find("image[fromid="+I1lllllI+"][toid="+l1I1II11I+"]")[0];$(I1111l11).attr("href",I1l11ll11.config.basePath+I1I1I11I.getSplitImgSrc(!1))}oui.hideTips(),$(I1l1l1l1).attr("stroke-width","3"),$(I1l1l1l1).css("stroke-width","3"),$(I1l1l1l1).attr("stroke","#b7b7b7"),$(I1l1l1l1).css("stroke","#b7b7b7")}}},removeBranchLine:function(I1I111II){$(I1I111II).attr("stroke-dasharray","")},renderBranchLine:function(l1I111I1){$(l1I111I1).attr("stroke-dasharray","10,3"),$(l1I111I1).attr("stroke-width","3"),$(l1I111I1).css("stroke-width","3")},hasBranch:function(l1l111l1){return l1l111l1&&l1l111l1.branchObject?!0:!1},event2setAutoBranch:function(l1l111l1){var l1I1I111=this;return l1I1I111.isAutoBranch=!0,l1I1I111.event2setNodeBranch(l1l111l1),!1},event2setSelectBranch:function(I1I111II){var I1l1l11l=this;return I1l1l11l.isAutoBranch=!1,I1l1l11l.event2setNodeBranch(I1I111II),!1},event2deleteBranch:function(l1l111lI){var l1I1I11l=this,l1l11ll11=$(l1l111lI.el).attr("nodeId"),I1lllllI=l1I1I11l.getIndexByNodeId(l1l11ll11);if(!(0>I1lllllI)){var l1l1ll11l=l1I1I11l.flowData.workFlowNodeList[I1lllllI];return l1l1ll11l.branchObject=null,l1I1I11l.refresh(),!1}},event2setNodeBranch:function(l1I111Il){var l1l1l111=this,l1l11ll1l=l1l1l111.getFlowUi(),I1IIIII1=$(l1I111Il.el).attr("nodeId"),l1l1ll11I=l1l1l111.nodeIdMap[I1IIIII1];l1l1l111.branchSetting={node:l1l1ll11I};var l1l1111lI=l1l11ll1l.render("flow-tpl-branchSetting",!0);l1l1l111.clear4topDialogLastCache();var I1III1II1,l1l1l1l1=l1l1l111.branchEditActions;return I1III1II1=l1l1l111.isAutoBranch?"自动分支条件":"手动选择分支",l1l1l111.editBranchDialog=oui.getTop().oui.showHTMLDialog({title:I1III1II1,dialog4bizType:"workflow",contentStyle:"width:690px;",content:l1l1111lI,center:!1,nodeId:l1l1ll11I.id,actions:l1l1l1l1}),oui.getTop().oui.parse(),l1l1l111.fillbackNodeBranch(l1l1ll11I.id),!1},clear4topDialogLastCache:function(){oui.getTop().oui.clearBy(function(l1I111I1){return l1I111I1&&l1I111I1.attr&&"workflow"==l1I111I1.attr("dialog4bizType")?(oui.getTop().$(l1I111I1.getEl()).remove(),!0):!1})},fillbackNodeBranch:function(I1l111l1){var l1I1I11l=this,I1I11II11=l1I1I11l.getIndexByNodeId(I1l111l1);if(!(0>I1I11II11)){var l1llllll=l1I1I11l.workFlowNodeList,I1l1ll111=l1llllll[I1I11II11],l1I1111Il=oui.getTop().oui.getById("condition4branch"),I1lll1ll1=I1l1ll111.branchObject&&I1l1ll111.branchObject.conditionList?I1l1ll111.branchObject.conditionList:[];l1I1111Il&&l1I1111Il.fillback(I1lll1ll1)}},updateNodeBranch:function(){var l1l111lI=this,l1I1I111=l1l111lI.editBranchDialog;if(l1I1I111){var l1l11ll1I=l1I1I111.attr("nodeId"),l1IIIIIl=l1l111lI.getIndexByNodeId(l1l11ll1I);if(!(0>l1IIIIIl)){var I1l1ll11I=l1l111lI.flowData.workFlowNodeList[l1IIIIIl],I1I1111I1=oui.getTop().oui.getById("nodeBranchDes"),l1III1III="";if(I1I1111I1&&(l1III1III=I1I1111I1.attr("value"),l1III1III=$.trim(l1III1III)),!l1III1III)return $(l1I1I111.getEl()).find("#condition4branch-error").html("分支描述不能为空"),!1;var l1l1l1ll=null,I1111I11=oui.getTop().oui.getById("condition4branch"),l1l11111="";if(I1111I11&&(l1l1l1ll=I1111I11.getConditions(),l1l11111=I1111I11.getConditionInfo()),l1l111lI.isAutoBranch){if(!l1l1l1ll||!l1l1l1ll.length)return I1l1ll11I.branchObject={des:l1III1III,autoBranch:!1,conditionList:null},$(l1I1I111.getEl()).find("#condition4branch-error-condition").html("分支条件不能为空"),!1;I1l1ll11I.branchObject={des:l1III1III,autoBranch:l1l111lI.isAutoBranch,conditionList:l1l1l1ll,conditionInfo:l1l11111}}else I1l1ll11I.branchObject={des:l1III1III,autoBranch:!1,conditionList:null};l1l111lI.refresh()}}},updateNotifyFunBind:function(){var I1l111ll=this;oui.getTop().oui.setPageParam("flow_node_update_isNotify",function(I1I111I1){var l1I1I11I=I1I111I1.attr("value"),l1l11ll11=I1I111I1.attr("otherAttrs");l1l11ll11=oui.parseJson(l1l11ll11);var l1lllllI=(I1l111ll.nodeProps.node||{},oui.getTop().oui.getById("nodeRight")),l1l1ll111=I1l111ll.findNodeRightValue().split(","),l1I1111II=oui.getTop().oui.getById("chooseType"),I1III1IIl=I1l111ll.nodeProps.node||{};if(l1I1I11I){if(l1lllllI&&l1lllllI.attr("data",l1l11ll11.notifyJson),l1I1111II){var I1l1l1lI=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1?I1l111ll.WorkFlowChooseType.single.value:I1l111ll.WorkFlowChooseType.all.value;l1I1111II.attr("value",I1l1l1lI),l1I1111II.attr("right","readOnly"),l1I1111II.render()}}else if(l1lllllI&&l1lllllI.attr("data",l1l11ll11.nodeRightItemsJson),l1I1111II){l1I1111II.attr("right","edit");var I1l1l1lI=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1?I1l111ll.WorkFlowChooseType.single.value:I1l111ll.WorkFlowChooseType.all.value;l1I1111II.attr("value",I1l1l1lI);var I1111I1I=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1;I1111I1I&&l1I1111II.attr("right","readOnly"),l1I1111II.render()}var I1I1111l=l1lllllI.attr("data")||[],l1II111I1=[];for(var I1ll1llll in I1I1111l)l1l1ll111.indexOf(I1I1111l[I1ll1llll].value+"")<0||l1II111I1.push(I1I1111l[I1ll1llll].value);l1lllllI.attr("value",l1II111I1.join(",")),l1lllllI.render()})},event2editProp:function(l1I111II){var l1I1I11I=this,I1I11II11=l1I1I11I.getFlowUi(),l1IIIIIl=$(l1I111II.el).attr("nodeId"),I1l1ll11I=l1I1I11I.nodeIdMap[l1IIIIIl];l1I1I11I.nodeProps={node:I1l1ll11I},I1l1ll11I.formRight||(I1l1ll11I.isRoot?I1l1ll11I.formRight="-2":I1l1ll11I.formRight="-1"),l1I1I11I.clear4topDialogLastCache();var I1I1111II=I1I11II11.render("flow-tpl-nodeProps",!0);l1I1I11I.updateNotifyFunBind();var I1lll1llI=l1I1I11I.nodePropDialogActions;return l1I1I11I.editPropDialog=oui.getTop().oui.showHTMLDialog({title:"节点属性",contentStyle:"width:1050px",dialog4bizType:"workflow",content:I1I1111II,center:!1,nodeId:I1l1ll11I.id,actions:I1lll1llI}),oui.getTop().oui.parse(),l1I1I11I.updateNodePropOuiIds(),!1},showNodeProps:function(){},showTipsMsg4nodeDisplayName:function(I1I111II){var l1I1I11l=this,l1I11II1I=$(I1I111II.el).attr("nodeId"),l1IIIIIl=l1I1I11l.nodeIdMap[l1I11II1I],l1l1ll11l=$("rect[nodeid="+l1I11II1I+"]")[0],l1l1111lI=l1I1I11l.hasElWidth(l1l1ll11l);oui.showTips({el:l1l1ll11l,content:oui.escapeStringToHTML(l1IIIIIl.name||""),left:l1l1111lI?0:32.5,top:l1l1111lI?8:70,mustRender:!0,singleton:!0})},hideTips4nodeDisplayName:function(l1I111I1){oui.hideTips()},putContextMenu4event:function(l1l111l1){var I1l1l11l=l1l111l1.e;I1l1l11l.stopPropagation&&I1l1l11l.stopPropagation(),I1l1l11l.preventDefault&&I1l1l11l.preventDefault();var I1l11ll1l,I1IIIIII=this,I1I1II11l=!1,I1I1111Il=$(l1l111l1.el).attr("toId");I1I1111Il?(I1I1II11l=!0,I1l11ll1l=I1I1111Il):I1l11ll1l=$(l1l111l1.el).attr("nodeId");var l1III1II1="text-"+I1l11ll1l,l1I1I1Il=I1IIIIII.nodeIdMap[I1l11ll1l],I1111l1I=I1IIIIII.Events.click,I1I1111I=I1IIIIII.contextMenus;I1I1111I||(I1I1111I=I1IIIIII.contextMenus={}),I1I1111I.menuClick=I1111l1I,I1I1111I.nodeId=I1l11ll1l,I1I1111I.isRoot=l1I1I1Il.isRoot?!0:!1,I1I1111I.node=l1I1I1Il,I1I1111I.isFirst=I1l11ll1l==I1IIIIII.flowData.workFlowNodeList[0].id,I1I1111I.hasNodeMembers=l1I1I1Il.nodePersonList&&l1I1I1Il.nodePersonList.length>0&&"person"!=l1I1I1Il.nodeType,I1I1111I.hasComments=l1I1I1Il.comments&&l1I1I1Il.comments.length>0,I1I1111I.isLine=I1I1II11l;var l1ll111ll,l1ll1lll1=I1IIIIII.getFlowUi(),l11I1III=l1ll1lll1.render("flow-ui-contextMenus",!0);I1I1II11l?l1ll111ll=l1l111l1.el:(l1ll111ll="[nodeTextId="+l1III1II1+"][nodeId="+I1l11ll1l+"]",l1ll111ll="rect[nodeId="+I1l11ll1l+"]",l1ll111ll=l1ll111ll.toLowerCase());var l111l11l=I1IIIIII.nodeWidth/2,I1llll1I=I1IIIIII.nodeHeight-2;return{isLine:I1I1II11l,nodeId:I1l11ll1l,el:$(l1ll111ll),left:l111l11l,top:I1llll1I,content:l11I1III}},event2contextMenu:function(l1l111ll){},event2HastenWork:function(I1I111Il){var l1I1I111=$(I1I111Il.el).attr("nodeId"),I1I11II1I=oui.getNS().WorkflowRuntime||window.parent.oui.getNS().WorkflowRuntime||{};I1I11II1I.event2HastenWork&&I1I11II1I.event2HastenWork(l1I1I111)},addNodes4Serial:function(I1l111l1,l1I1I111,l1l11ll1I){for(var l1IIIII1=this,l1I1II11l=0,l1I1111Il=l1I1I111.length;l1I1111Il>l1I1II11l;l1I1II11l++)0==l1I1II11l?l1IIIII1.addNodes([l1I1I111[l1I1II11l]],I1l111l1,!1,l1l11ll1I):l1IIIII1.addNodes([l1I1I111[l1I1II11l]],l1I1I111[l1I1II11l-1].id)},updateChildNode4brotherJoin:function(l1I111II,l1l1l11l,I1l11ll1I){var l1llllll=this;if(l1l1l11l&&!l1l1l11l.isJoin){l1l1l11l.pid=I1l11ll1I;var l1l1ll11l=l1llllll.getIndexByNodeId(l1l1l11l.id);l1llllll.flowData.workFlowNodeList[l1l1ll11l].pid=I1l11ll1I}else if(l1l1l11l&&l1l1l11l.isJoin){var l1l1111lI=l1l1l11l.pid?(l1l1l11l.pid+"").split(","):[],l1lll1ll1=l1l1111lI.indexOf(l1I111II.id+"");l1lll1ll1>=0?l1l1111lI.splice(l1lll1ll1,1,I1l11ll1I):l1l1111lI.push(I1l11ll1I),l1l1l11l.pid=l1l1111lI.join(",");var l1l1ll11l=l1llllll.getIndexByNodeId(l1l1l11l.id);l1llllll.flowData.workFlowNodeList[l1l1ll11l].pid=l1l1111lI.join(",")}},getDefaultChooseTypeByNodeType:function(I1I111II,l1I1I111){var l1I11II1l=this;return l1I1I111==l1I11II1l.WorkFlowNodeType.person.value||"relRole_sender"==I1I111II||I1I111II.indexOf("member#")>-1&&l1I1I111!=l1I11II1l.WorkFlowNodeType.formControl.value||I1I111II.indexOf("deptLeader#")>-1?l1I11II1l.WorkFlowChooseType.single.value:l1I11II1l.WorkFlowChooseType.all.value},createArrayNodesByPersonSelectedNodes:function(l1I111Il){if(!l1I111Il)return[];for(var l1l1l11I=[],I1l11ll11=this,l1IIIIII=0,l1l1ll11l=l1I111Il.length;l1l1ll11l>l1IIIIII;l1IIIIII++)l1l1l11I.push({nodeId:l1I111Il[l1IIIIII].id,nodeName:l1I111Il[l1IIIIII].name,nodeRight:I1l11ll11.findNodeRightValue({}),nodeDisplayName:l1I111Il[l1IIIIII].name,name:l1I111Il[l1IIIIII].name,chooseType:I1l11ll11.getDefaultChooseTypeByNodeType(l1I111Il[l1IIIIII].id,l1I111Il[l1IIIIII].typeFlag),nodeType:l1I111Il[l1IIIIII].typeFlag});return l1l1l11I},getJoinIdBySplitId:function(l1l111ll){var I1l1l11l=this,I1I11II11=I1l1l11l.nodeIdMap[l1l111ll],l1lllllI=I1l1l11l.findJoin(I1I11II11);return l1lllllI?l1lllllI.id:""},getCurrBranchIndex:function(l1I111I1){var l1l1l11I=this;if(!l1I111I1)return-1;if(!l1I111I1.parents)return-1;if(!l1I111I1.parents[0])return-1;var l1l11ll11=l1I111I1.parents[0].id,l1IIIII1=l1l1l11I.getJoinIdBySplitId(l1l11ll11),I1l1ll11l=l1l1l11I.getIndexByNodeId(l1IIIII1),l1I1111Il=l1l1l11I.flowData.workFlowNodeList[I1l1ll11l],l1lll1ll1=l1I1111Il.pid?l1I1111Il.pid.split(","):[],I1I1I1Il=l1l1l11I.getCurrBranchNodeByFirstNode(l1I111I1);return I1I1I1Il?l1lll1ll1.indexOf(I1I1I1Il.id):-1},getCurrBranchNodeByFirstNode:function(I1l111l1){var I1I1I11I=this;if(!I1l111l1)return null;if(!I1l111l1.parents)return null;if(!I1l111l1.parents[0])return null;var I1I11II1I=I1l111l1.parents[0].id,l1llllll=I1I1I11I.getJoinIdBySplitId(I1I11II1I),l1I1II111=I1I1I11I.getCurrBranchNode(I1l111l1,I1l111l1.children,I1I11II1I,l1llllll);return l1I1II111},getCurrBranchNode:function(I1I111Il,l1I1I11l,l1I11II11,I1lllll1){var I1I1II111=this;if(l1I1I11l[0].id==I1lllll1)return I1I111Il;if(!l1I1I11l||!l1I1I11l.length)return I1I111Il;for(var l1l1111ll=0,I1lll1lll=l1I1I11l.length;I1lll1lll>l1l1111ll;l1l1111ll++){var I1l1l1lI=I1I1II111.getCurrBranchNode(l1I1I11l[l1l1111ll],l1I1I11l[l1l1111ll].children,l1I11II11,I1lllll1);if(I1l1l1lI===l1I1I11l[l1l1111ll])return I1l1l1lI;if(!I1l1l1lI)return l1I1I11l[l1l1111ll]}return null},selectBrotherOkFun:function(I1l111lI,I1I1I11I){var I1I11II1l=this,l1llllll=I1I1I11I.data,l1l1ll11I=I1I1I11I.flowType,I1I1111II=!1;if(l1l1ll11I+""==I1I11II1l.ADD_TYPE.serial+""&&(I1I1111II=!0),l1llllll&&!(l1llllll.length<=0)){var I1III1III=I1I11II1l.createArrayNodesByPersonSelectedNodes(l1llllll),l1I1I1II=I1I11II1l.nodeIdMap[I1l111lI],l1111l11=l1I1I1II.parents[0].id,l1I1111l=l1I1I1II.children[0];if(l1I1I1II.parents[0]&&l1I1I1II.parents[0].isSplit){var I1ll111lI=l1I1I1II.parents[0].id,l1II1IIIl=I1I11II1l.getJoinIdBySplitId(I1ll111lI),l11l1llI=I1I11II1l.getCurrBranchIndex(l1I1I1II);l11l1llI=-1;var l111I111=I1I11II1l.getIndexByNodeId(l1I1I1II.id);if(!I1I1111II&&I1III1III.length>0){I1I11II1l.addNodes(I1III1III,I1ll111lI,!1,l111I111,!0);for(var I1IIII11=[],l1lllll11=0,I1I111IIl=I1III1III.length;I1I111IIl>l1lllll11;l1lllll11++)I1IIII11.push(I1III1III[l1lllll11].id);I1I11II1l.updateJoinNodeParentIds(l1II1IIIl,I1IIII11,l11l1llI)}else I1I11II1l.addNodes4Serial(I1ll111lI,I1III1III,l111I111,!0),I1I11II1l.updateJoinNodeParentIds(l1II1IIIl,[I1III1III[I1III1III.length-1].id],l11l1llI)}else{var I1III1Il=I1I11II1l.createSplitNode(l1111l11);l1I1I1II.pid=I1III1Il;var I11III1I=I1I11II1l.getIndexByNodeId(l1I1I1II.id);if(I1I11II1l.flowData.workFlowNodeList[I11III1I].pid=I1III1Il,!I1I1111II&&I1III1III.length>0){var l111I111=I1I11II1l.getIndexByNodeId(l1I1I1II.id);I1I11II1l.addNodes(I1III1III,I1III1Il,!1);for(var l1II1IIIl=I1I11II1l.createJoinNode(I1l111lI),I1IIII11=[],l1lllll11=0,I1I111IIl=I1III1III.length;I1I111IIl>l1lllll11;l1lllll11++)I1IIII11.push(I1III1III[l1lllll11].id);I1I11II1l.updateJoinNodeParentIds(l1II1IIIl,I1IIII11),I1I11II1l.updateChildNode4brotherJoin(l1I1I1II,l1I1111l,l1II1IIIl);var I1111111=I1I11II1l.getIndexByNodeId(l1I1I1II.id),l1I1II1Il=I1I11II1l.flowData.workFlowNodeList[I1111111];I1I11II1l.flowData.workFlowNodeList.splice(I1111111,1);var I1II111I=I1I11II1l.getIndexByNodeId(I1III1III[0].id);I1I11II1l.flowData.workFlowNodeList.splice(I1II111I,0,l1I1II1Il)}else{I1I11II1l.addNodes4Serial(I1III1Il,I1III1III);var l1II1IIIl=I1I11II1l.createJoinNode(I1l111lI);I1I11II1l.updateJoinNodeParentIds(l1II1IIIl,[I1III1III[I1III1III.length-1].id]),I1I11II1l.updateChildNode4brotherJoin(l1I1I1II,l1I1111l,l1II1IIIl);var I1111111=I1I11II1l.getIndexByNodeId(l1I1I1II.id),l1I1II1Il=I1I11II1l.flowData.workFlowNodeList[I1111111];I1I11II1l.flowData.workFlowNodeList.splice(I1111111,1);var I1II111I=I1I11II1l.getIndexByNodeId(I1III1III[0].id);I1I11II1l.flowData.workFlowNodeList.splice(I1II111I,0,l1I1II1Il)}}I1I11II1l.refresh()}},updateJoinNodeParentIds:function(l1l111l1,l1l1l111,I1l11ll1l){if(l1l1l111&&l1l1l111.length){var l1IIIIII=this,l1l1ll11I=l1IIIIII.getIndexByNodeId(l1l111l1),I1I1111II=l1IIIIII.flowData.workFlowNodeList[l1l1ll11I].pid+"";I1I1111II=I1I1111II?I1I1111II.split(","):[];var l1lll1ll1=[];if(l1lll1ll1="string"==typeof l1l1l111?l1l1l111?(l1l1l111+"").split(","):[]:l1l1l111,"number"==typeof I1l11ll1l&&I1l11ll1l>-1)for(var l1l1l1lI=0,I1111I11=l1lll1ll1.length;I1111I11>l1l1l1lI;l1l1l1lI++)I1I1111II.splice(I1l11ll1l+l1l1l1lI+1,0,l1lll1ll1[l1l1l1lI]);else for(var l1l1l1lI=0,I1111I11=l1lll1ll1.length;I1111I11>l1l1l1lI;l1l1l1lI++)I1I1111II.push(l1lll1ll1[l1l1l1lI]);l1IIIIII.flowData.workFlowNodeList[l1l1ll11I].pid=I1I1111II.join(",")}},addNodes4SelfOrBrother:function(I1l111l1,l1l1l111,I1I11II1I){var l1IIIII1=this;return I1I11II1I?l1IIIII1.selectBrotherOkFun(I1l111l1,l1l1l111):l1IIIII1.selectOkFun(I1l111l1,l1l1l111),l1IIIII1.getFlowData()},selectOkFun:function(I1l111ll,I1I1I11l){var l1l11ll1I=this,l1lllllI=I1I1I11l.data,l1l1ll11I=I1I1I11l.flowType,I1I1111Il=!1;if(l1l1ll11I+""==l1l11ll1I.ADD_TYPE.serial+""&&(I1I1111Il=!0),l1lllllI&&!(l1lllllI.length<=0)){for(var l1III1IIl=[],l1I1I1II=0,I1111I1l=l1lllllI.length;I1111I1l>l1I1I1II;l1I1I1II++)l1III1IIl.push({nodeId:l1lllllI[l1I1I1II].id,nodeName:l1lllllI[l1I1I1II].name,nodeDisplayName:l1lllllI[l1I1I1II].name,nodeRight:l1l11ll1I.findNodeRightValue({}),name:l1lllllI[l1I1I1II].name,chooseType:l1l11ll1I.getDefaultChooseTypeByNodeType(l1lllllI[l1I1I1II].id,l1lllllI[l1I1I1II].typeFlag),nodeType:l1lllllI[l1I1I1II].typeFlag});l1l11ll1I.nodeIdMap[I1l111ll];if(!I1I1111Il&&l1III1IIl.length>1){var l1I1111I=l1l11ll1I.addNodes(l1III1IIl,I1l111ll,!0);l1l11ll1I.updateParentId(I1l111ll,l1I1111I,!0)}else{for(var l1I1I1II=0,I1111I1l=l1III1IIl.length;I1111I1l>l1I1I1II;l1I1I1II++)0==l1I1I1II?l1l11ll1I.addNodes([l1III1IIl[l1I1I1II]],I1l111ll):l1l11ll1I.addNodes([l1III1IIl[l1I1I1II]],l1III1IIl[l1I1I1II-1].id);l1l11ll1I.updateParentId(I1l111ll,l1III1IIl[l1III1IIl.length-1].id)}l1l11ll1I.refresh()}},selectBrotherOkCallback:function(I1l111lI){var l1I1I111=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,I1I11II1l=l1I1I111.attr("nodeId"),l1lllll1=this;l1lllll1.selectBrotherOkFun(I1I11II1l,I1l111lI)},selectOkCallback:function(l1l111ll){var I1l1l111=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,l1l11ll1I=I1l1l111.attr("nodeId"),I1llllll=this;I1llllll.selectOkFun(l1l11ll1I,l1l111ll)},replaceNodeFun:function(I1l111l1,I1I1I11I){for(var I1l11ll11=this,I1IIIII1=I1I1I11I.data,l1l1ll11l=[],l1l1111lI=0,l1lll1llI=I1IIIII1.length;l1lll1llI>l1l1111lI;l1l1111lI++)l1l1ll11l.push({nodeId:I1IIIII1[l1l1111lI].id,name:I1IIIII1[l1l1111lI].name,nodeName:I1IIIII1[l1l1111lI].name,nodeDisplayName:I1IIIII1[l1l1111lI].name,nodeType:I1IIIII1[l1l1111lI].typeFlag});1==l1l1ll11l.length&&(I1l11ll11.replaceNodeById(l1l1ll11l[0],I1l111l1),I1l11ll11.refresh())},replaceCallBack:function(l1l111l1){var I1l1l11l=this,l1l11ll1l=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,l1IIIII1=l1l11ll1l.attr("nodeId");I1l1l11l.replaceNodeFun(l1IIIII1,l1l111l1)},findSelectPersonTabs4workflow:function(){var l1I111Il=oui.getParam("design4Runtime"),I1l1l11l="";return I1l1l11l=l1I111Il&&"true"==l1I111Il||"boolean"==typeof l1I111Il&&l1I111Il?"3":"3,4,1,2,5"},event2replaceNode:function(l1l111l1){var I1I1I11l=$(l1l111l1.el).attr("nodeId"),I1I11II1l=this,I1IIIII1=I1I11II1l.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:I1IIIII1,nodeId:I1I1I11l,title:"替换节点",isAll:!1,allowCompany:!1,isFlow:!0,fillback:[],isMulti:!1,maxSize:1,extend:I1I11II1l.findSelectPersonExtend(),operType:"replace",callbackOk:function(I1l111ll){I1I11II1l.replaceCallBack(I1l111ll)},callbackCancel:function(l1l111ll){}}),!1},event2addBrotherNode:function(I1l111ll){var l1l1l111=$(I1l111ll.el).attr("nodeId"),l1l11ll1I=this,I1lllll1=l1l11ll1I.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:I1lllll1,isFlow:!0,isAll:!1,allowCompany:!1,fillback:[],maxSize:-1,duplicate:!1,extend:l1l11ll1I.findSelectPersonExtend(),nodeId:l1l1l111,title:"节点选择",operType:"addBrother",callbackOk:function(l1l111lI,I1I1I111){l1l11ll1I.selectBrotherOkCallback(l1l111lI,l1l1l111)},callbackCancel:function(){}}),!1},findSelectPersonExtend:function(){var l1I111Il=this;if(!l1I111Il.flowData.bizId)return null;var I1I1I111=oui.getParam("design4Runtime");if(I1I1I111&&"true"==I1I1I111||"boolean"==typeof I1I1I111&&I1I1I111)return null;var l1I11II1l={tabs:[{title:"表单控件",type:"formControl",icon:"forms",des:"表单内组织机构控件",url:oui.addParams(oui.getPageParam("selectPersonUrl"),{formId:l1I111Il.flowData.bizId,subFormId:"",type:"3",showSub:!1,containMulti:"true,false"})}]};return l1I11II1l},event2addNode:function(l1I111I1){var I1I1I11l=$(l1I111I1.el).attr("nodeId"),I1I11II11=this,I1IIIII1=I1I11II11.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:I1IIIII1,isFlow:!0,isAll:!1,allowCompany:!1,fillback:[],maxSize:-1,extend:I1I11II11.findSelectPersonExtend(),nodeId:I1I1I11l,title:"节点选择",operType:"add",callbackOk:function(I1I111I1,I1I1I111){I1I11II11.selectOkCallback(I1I111I1)},callbackCancel:function(){}}),!1},zoomPx:0,event2ZoomBig:function(I1l111l1){var I1I1I111=this;I1I1I111.zoomPx+=10,I1I1I111.zoomScale=(I1I1I111.mc_width+I1I1I111.zoomPx)/I1I1I111.mc_width,$(I1I1I111.getFlowUi().RaphaelObj.canvas).css("zoom",I1I1I111.zoomScale)},event2ZoomSmall:function(l1l111lI){var I1l1l11I=this;I1l1l11I.zoomPx-=10,I1l1l11I.zoomScale=(I1l1l11I.mc_width+I1l1l11I.zoomPx)/I1l1l11I.mc_width,I1l1l11I.zoomScale<.5&&(I1l1l11I.zoomPx+=10,I1l1l11I.zoomScale=(I1l1l11I.mc_width+I1l1l11I.zoomPx)/I1l1l11I.mc_width),$(I1l1l11I.getFlowUi().RaphaelObj.canvas).css("zoom",I1l1l11I.zoomScale)},updateParentId:function(I1I111II,I1I1I11l){var I1I11II1l=this,I1IIIIIl=I1I11II1l.nodeIdMap[I1I111II],l1I1II111=I1I11II1l.getIdsByParentNode(I1IIIIIl),I1l1111ll=I1I11II1l.workFlowNodeList;if(!(l1I1II111.length<=0))for(var I1III1IIl=0,l1l1l1ll=I1l1111ll.length;l1l1l1ll>I1III1IIl;I1III1IIl++)if(l1I1II111.indexOf(I1l1111ll[I1III1IIl].id)>=0){var l1111I11=(I1l1111ll[I1III1IIl].pid+"").split(","),l1l1111l=l1111I11.indexOf(I1I111II+"");"undefined"!=typeof I1I11II1l.nodeIdMap[I1I1I11l].isSplit&&I1I11II1l.nodeIdMap[I1I1I11l].isSplit&&I1l1111ll[I1III1IIl].isJoin?l1111I11.splice(l1l1111l,1):l1111I11.splice(l1l1111l,1,I1I1I11l),I1l1111ll[I1III1IIl].pid=l1111I11.join(",")}},getIdsByParentNode:function(l1I111II){for(var l1l1l11l=[],l1l11ll11=l1I111II.children,I1lllll1=0,l1I1II11I=l1l11ll11.length;l1I1II11I>I1lllll1;I1lllll1++)l1l1l11l.push(l1l11ll11[I1lllll1].id);return l1l1l11l},event2delNode:function(l1l111lI){var l1I1I11I=this,l1l11ll1l=$(l1l111lI.el).attr("nodeId"),l1IIIIII=l1I1I11I.nodeIdMap[l1l11ll1l];return l1I1I11I.removeByTreeNode(l1IIIIII),l1I1I11I.refresh(),!1},event2delCurrNode:function(l1I111I1){var I1I1I11I=this,I1I11II11=$(l1I111I1.el).attr("nodeId"),I1llllll=I1I1I11I.nodeIdMap[I1I11II11];if(I1llllll.parents&&1==I1llllll.parents.length&&I1llllll.children&&1==I1llllll.children.length&&2==I1llllll.parents[0].children.length&&I1llllll.parents[0].isSplit&&I1llllll.children[0].isJoin){var l1I1II11I=I1llllll.parents[0].children;I1I1I11I.updateParentId(I1llllll.parents[0].id,I1llllll.parents[0].pid),I1I1I11I.removeByTreeNode(I1llllll.parents[0],!0);var l1l1111lI;l1l1111lI=I1llllll.id+""==I1llllll.children[0].parents[0].id+""?I1llllll.children[0].parents[1]:I1llllll.children[0].parents[0],l1l1111lI.branchObject=null;var I1III1III=I1I1I11I.getIndexByNodeId(l1l1111lI.id);I1I1I11I.flowData.workFlowNodeList[I1III1III]&&(I1I1I11I.flowData.workFlowNodeList[I1III1III].branchObject=null);
for(var I1I1I1Il=0,l1111I1l=l1I1II11I.length;l1111I1l>I1I1I1Il;I1I1I1Il++)if(l1I1II11I[I1I1I1Il]){l1I1II11I[I1I1I1Il].branchObject=null;var l1I1111l=I1I1I11I.getIndexByNodeId(l1I1II11I[I1I1I1Il].id);I1I1I11I.flowData.workFlowNodeList[l1I1111l]&&(I1I1I11I.flowData.workFlowNodeList[l1I1111l].branchObject=null)}I1I1I11I.updateParentId(I1llllll.children[0].id,l1l1111lI.id),I1I1I11I.removeByTreeNode(I1llllll.children[0],!0)}return I1I1I11I.updateParentId(I1I11II11,I1llllll.pid),I1I1I11I.removeByTreeNode(I1llllll,!0),I1I1I11I.refresh(),!1},createSplitNode:function(I1I111Il){var l1l1l11l=this,l1l11ll11=l1l1l11l.workFlowNodeList,I1llllll=l1l1l11l.getIndexByNodeId(I1I111Il),l1l1ll11l=l1l1l11l.createNewId4server();return l1l1l11l.nodeIdMap[l1l1ll11l]={id:l1l1ll11l,name:"",isSplit:!0,pid:I1I111Il},l1l11ll11.splice(I1llllll+1,0,l1l1l11l.nodeIdMap[l1l1ll11l]),l1l1ll11l},createJoinNode:function(l1I111I1){var I1I1I11l=this,l1I11II1l=I1I1I11l.workFlowNodeList,I1IIIIIl=I1I1I11l.getIndexByNodeId(l1I111I1),I1l1ll111=I1I1I11l.createNewId4server();return I1I1I11l.nodeIdMap[I1l1ll111]={id:I1l1ll111,name:"",isJoin:!0,pid:l1I111I1},l1I11II1l.splice(I1IIIIIl+1,0,I1I1I11l.nodeIdMap[I1l1ll111]),I1l1ll111},addNodes:function(l1l111l1,I1l1l11I,l1l11ll1I,I1IIIII1,l1I1II11I){var I1l1111lI=this,l1III1III=I1l1111lI.workFlowNodeList,l1l1l1l1=I1l1111lI.getIndexByNodeId(I1l1l11I),l1111I1l=[],l1l1111l=null;l1l11ll1I&&l1l111l1.length>1&&(l1l1111l=I1l1111lI.createNewId4server(),I1l1111lI.nodeIdMap[l1l1111l]={id:l1l1111l,name:"",isSplit:!0,pid:I1l1l11I},l1III1III.splice(l1l1l1l1+1,0,I1l1111lI.nodeIdMap[l1l1111l]));for(var I1II111I1=0,l1II1III1=l1l111l1.length;l1II1III1>I1II111I1;I1II111I1++)l1l111l1[I1II111I1].id||(l1l111l1[I1II111I1].id=I1l1111lI.createNewId4server()),l1l111l1[I1II111I1].pid=l1l1111l?l1l1111l:I1l1l11I,I1l1111lI.nodeIdMap[l1l111l1[I1II111I1].id]=l1l111l1[I1II111I1],"number"==typeof I1IIIII1&&I1IIIII1>-1?l1III1III.splice(I1IIIII1+I1II111I1+1,0,l1l111l1[I1II111I1]):l1III1III.splice(l1l1111l?l1l1l1l1+I1II111I1+2:l1l1l1l1+I1II111I1+1,0,l1l111l1[I1II111I1]),l1111I1l.push(l1l111l1[I1II111I1].id);if(l1l11ll1I&&l1l111l1.length>1){var I11l1lll=I1l1111lI.createNewId4server();return I1l1111lI.nodeIdMap[I11l1lll]={id:I11l1lll,name:"",isJoin:!0,pid:l1111I1l.join(",")},l1III1III.splice(l1l1l1l1+I1II111I1+2,0,I1l1111lI.nodeIdMap[I11l1lll]),I11l1lll}return null},replaceNodeById:function(I1I111II,l1I1I11I){var I1l11ll1l=this,l1IIIII1=I1l11ll1l.workFlowNodeList,I1I1II11I=I1l11ll1l.getIndexByNodeId(l1I1I11I);if(!(0>I1I1II11I)){var l1I1111Il=l1IIIII1[I1I1II11I].pid;if(I1I111II.pid=l1I1111Il,I1I111II.nodeType==I1l11ll1l.WorkFlowNodeType.person.value||"relRole_sender"==I1I111II.nodeId?I1I111II.chooseType=I1l11ll1l.WorkFlowChooseType.single.value:I1I111II.chooseType=l1IIIII1[I1I1II11I].chooseType||I1l11ll1l.WorkFlowChooseType.single.value,I1I111II.formRight=l1IIIII1[I1I1II11I].formRight||"-1",I1I111II.nodeRight=l1IIIII1[I1I1II11I].nodeRight||"",I1I111II.notifyNode=l1IIIII1[I1I1II11I].notifyNode||!1,I1I111II.branchObject=l1IIIII1[I1I1II11I].branchObject||null,l1IIIII1.splice(I1I1II11I,1,I1I111II),I1I111II.id||(I1I111II.id=I1l11ll1l.createNewId4server()),I1I111II.notifyNode){"string"==typeof I1I111II.notifyNode&&("true"==I1I111II.notifyNode?I1I111II.notifyNode=!0:I1I111II.notifyNode=!1);var l1lll1lll=I1I111II.nodeType==I1l11ll1l.WorkFlowNodeType.person.value||"relRole_sender"==I1I111II.nodeId?I1l11ll1l.WorkFlowChooseType.single.value:I1l11ll1l.WorkFlowChooseType.all.value;I1I111II.chooseType=l1lll1lll}I1l11ll1l.nodeIdMap[I1I111II.id]=I1I111II,I1l11ll1l.updateParentId(l1I1I11I,I1I111II.id)}},getIndexByNodeId:function(l1I111I1){for(var l1l1l111=this,I1I11II1l=l1l1l111.workFlowNodeList,l1lllllI=0,I1I1II11l=I1I11II1l.length;I1I1II11l>l1lllllI;l1lllllI++)if(I1I11II1l[l1lllllI].id+""==l1I111I1+"")return l1lllllI;return-1},removeByTreeNode:function(I1I111Il,I1l1l111){var l1l11ll1I=this,I1IIIII1=l1l11ll1I.getIndexByNodeId(I1I111Il.id);if(!(-1>I1IIIII1)){var l1l1ll11I=l1l11ll1I.workFlowNodeList,l1l1111ll=[];I1l1l111||(l1l1111ll=l1l11ll1I.getChildrenIdsByTreeNode(I1I111Il));var l1lll1llI=[];if(l1l1111ll||(l1l1111ll=[]),l1l1111ll.push(I1I111Il.id),1==l1l1111ll.length)return void l1l1ll11I.splice(I1IIIII1,1);for(var I1I1I1Il=0,l1111l11=l1l1ll11I.length;l1111l11>I1I1I1Il;I1I1I1Il++)l1l1111ll.indexOf(l1l1ll11I[I1I1I1Il].id)>-1&&(l1l1ll11I[I1I1I1Il]=null);for(var I1I1I1Il=0,l1111l11=l1l1ll11I.length;l1111l11>I1I1I1Il;I1I1I1Il++)l1l1ll11I[I1I1I1Il]&&l1lll1llI.push(l1l1ll11I[I1I1I1Il]);l1l11ll1I.workFlowNodeList=l1lll1llI}},getChildrenIdsByTreeNode:function(I1I111II){for(var I1I1I111=this,I1l11ll11=(I1I1I111.workFlowNodeList,[]),l1lllll1=I1I111II.children,l1I1II11I=0,I1I1111I1=l1lllll1.length;I1I1111I1>l1I1II11I;l1I1II11I++){var I1III1II1=I1I1I111.getChildrenIdsByTreeNode(l1lllll1[l1I1II11I]);I1l11ll11.push(l1lllll1[l1I1II11I].id),I1l11ll11=I1l11ll11.concat(I1III1II1)}return I1l11ll11},flowIdPrefix:"jsuuid-",createNewId:function(){var l1I111Il=this;return l1I111Il.newId++,l1I111Il.flowIdPrefix+l1I111Il.newId},createNewId4server:function(){var l1I111I1=this;return l1I111I1.newId4server++,l1I111I1.flowIdPrefix+l1I111I1.newId4server},getChildrenByNode:function(l1l111lI,l1I1I111,l1l11ll1l){var I1llllll=this,l1I1II11I=l1l11ll1l||0;l1I1II11I+=1,I1llllll.nodeIdMap[l1l111lI.id]=l1l111lI;var l1l1111lI=I1llllll.createNewId();l1l111lI.newId=l1l1111lI;for(var I1lll1ll1=[],I1I1I1II=l1I1I111.length;I1I1I1II>l1I1II11I;l1I1II11I++)(""+l1I1I111[l1I1II11I].pid).split(",").indexOf(l1l111lI.id+"")<0||(I1lll1ll1.push(l1I1I111[l1I1II11I]),l1I1I111[l1I1II11I].children=I1llllll.getChildrenByNode(l1I1I111[l1I1II11I],l1I1I111,l1I1II11I),I1llllll.setNodeParents(l1I1I111[l1I1II11I],l1l111lI));return I1llllll.isVertical&&(I1lll1ll1=I1lll1ll1.reverse()),I1lll1ll1},setNodeParents:function(l1l111ll,l1I1I11l){l1l111ll.parents||(l1l111ll.parents=[]);for(var I1I11II1l=l1l111ll.parents,l1IIIIIl=!1,l1I1II11I=0,I1I1111Il=I1I11II1l.length;I1I1111Il>l1I1II11I;l1I1II11I++)if(I1I11II1l[l1I1II11I].id==l1I1I11l.id){l1IIIIIl=!0;break}l1IIIIIl||l1l111ll.parents.push(l1I1I11l),l1I1I11l&&l1I1I11l.isSplit?l1l111ll.isParentSplit=!0:l1l111ll.isParentSplit=!1},createTreeNode:function(I1l111ll){var I1I1I111=this,I1I11II1I=I1l111ll[0];return this.nodeIdMap={},I1I11II1I.children=I1I1I111.getChildrenByNode(I1I11II1I,I1l111ll,0),I1I11II1I.parents=[],I1I11II1I.isRoot=!0,I1I11II1I},createNodeData:function(I1l111ll,l1I1I11I){for(var I1l11ll11,I1IIIIIl,l1I1II111,l1I1111I1=this,I1III1III=l1I1111I1.getFlowUi(),l1I1I1Il={states:{},paths:{}},I1111l1I=l1I1I1Il.states,I1I11111=l1I1I1Il.paths,I1II111II=0,l1II1IIIl=I1l111ll.length;l1II1IIIl>I1II111II;I1II111II++){var I11l1ll1=I1l111ll[I1II111II].newId,I111I11I=null,l1llll1l=null;l1I1I11I?(l1I1II111=l1I1111I1.rotate({x:I1l111ll[I1II111II].x,y:I1l111ll[I1II111II].y},Math.PI/2),I1l11ll11=l1I1II111.x,I1IIIIIl=l1I1II111.y):(I1l11ll11=I1l111ll[I1II111II].x,I1IIIIIl=I1l111ll[I1II111II].y);var I1IIIII1l;I1IIIII1l=0==I1II111II?$.extend(!0,{},I1III1III.config.tools.states.start.attr,{x:I1l11ll11,y:I1IIIIIl,width:l1I1111I1.nodeWidth,height:l1I1111I1.nodeHeight}):I1l111ll[I1II111II].isEnd?$.extend(!0,{},I1III1III.config.tools.states.end.attr,{x:I1l11ll11,y:I1IIIIIl,width:l1I1111I1.nodeWidth,height:l1I1111I1.nodeHeight}):I1III1III.config.tools.states[I1l111ll[I1II111II].nodeType]&&l1I1111I1.WorkFlowNodeType[I1l111ll[I1II111II].nodeType]?$.extend(!0,{},I1III1III.config.tools.states[I1l111ll[I1II111II].nodeType].attr,{x:I1l11ll11,y:I1IIIIIl,width:l1I1111I1.nodeWidth,height:l1I1111I1.nodeHeight}):{x:I1l11ll11,y:I1IIIIIl,width:l1I1111I1.nodeWidth,height:l1I1111I1.nodeHeight};var l1I111IIl=I1l111ll[I1II111II].type||"task";if(I1l111ll[I1II111II].isSplit){l1I111IIl="split";var I1III1Il=I1III1III.config.tools.states.split.attr.width,I11lll1I=I1III1III.config.tools.states.split.attr.height;I1IIIII1l.x=I1IIIII1l.x+I1IIIII1l.width/2-I1III1Il/2,I1IIIII1l.y=I1IIIII1l.y+I1IIIII1l.height/2-I11lll1I/2,I1IIIII1l.width=I1III1Il,I1IIIII1l.height=I11lll1I}else if(I1l111ll[I1II111II].isJoin){l1I111IIl="join";var I1III1Il=I1III1III.config.tools.states.join.attr.width,I11lll1I=I1III1III.config.tools.states.join.attr.height;I1IIIII1l.x=I1IIIII1l.x+I1IIIII1l.width/2-I1III1Il/2,I1IIIII1l.y=I1IIIII1l.y+I1IIIII1l.height/2-I11lll1I/2,I1IIIII1l.width=I1III1Il,I1IIIII1l.height=I11lll1I}else if(I1l111ll[I1II111II].isEnd)l1I111IIl="end";else if(l1I1111I1.isIndex){var I1111111=I1l111ll[I1II111II].state;if("person"==I1l111ll[I1II111II].nodeType){var I1l1ll1lI,I1ll111l;I1111111!==l1I1111I1.WorkFlowNodeState.state_done.value||I1l111ll[I1II111II].nodePersonList&&I1l111ll[I1II111II].nodePersonList.length?(I1l1ll1lI=I1l111ll[I1II111II].nodePersonList&&I1l111ll[I1II111II].nodePersonList.length>0?I1l111ll[I1II111II].nodePersonList[0].state:l1I1111I1.WorkFlowPersonState.state_none.value,I1ll111l=I1l111ll[I1II111II].nodePersonList&&I1l111ll[I1II111II].nodePersonList.length>0?I1l111ll[I1II111II].nodePersonList[0].attitude:l1I1111I1.WorkFlowPersonAttitude.no_read.value):(I1l1ll1lI=l1I1111I1.WorkFlowPersonState.state_done.value,I1ll111l=l1I1111I1.WorkFlowPersonAttitude.agree.value),I111I11I=l1I1111I1.getStatusImg({nodeType:I1l111ll[I1II111II].nodeType,nodeState:I1111111,personState:I1l1ll1lI,personAttitude:I1ll111l,isCurrent:I1l111ll[I1II111II].id==l1I1111I1.currentNodeId,isFirst:0==I1II111II})}else I111I11I=l1I1111I1.getStatusImg({nodeType:I1l111ll[I1II111II].nodeType,nodeState:I1111111,isCurrent:I1l111ll[I1II111II].id==l1I1111I1.currentNodeId,isFirst:0==I1II111II});l1llll1l=l1I1111I1.getHastenWorkImg({nodeType:I1l111ll[I1II111II].nodeType,notifyNode:I1l111ll[I1II111II].notifyNode,nodeState:I1111111,isCurrent:I1l111ll[I1II111II].id==l1I1111I1.currentNodeId,isFirst:0==I1II111II}),I1l111ll[I1II111II].id==l1I1111I1.currentNodeId&&I1IIIII1l&&(I1IIIII1l.fill="#fa8d00")}var I11IIIIl=l1I1111I1.getNotifyImg({nodeType:I1l111ll[I1II111II].nodeType,notifyNode:I1l111ll[I1II111II].notifyNode,nodeState:I1111111,isCurrent:I1l111ll[I1II111II].id==l1I1111I1.currentNodeId,isFirst:0==I1II111II});if(I1111l1I[I11l1ll1]={id:I1l111ll[I1II111II].id,type:0==I1II111II?"start":l1I111IIl,text:{text:I1l111ll[I1II111II].name},attr:I1IIIII1l},I111I11I&&I111I11I.indexOf("state_none")<0&&(I1111l1I[I11l1ll1].statusImg={width:22,height:22,src:I111I11I}),l1llll1l&&l1llll1l.length>0&&(I1111l1I[I11l1ll1].hastenWorkImg={cursor:"pointer",width:38,height:17,src:l1llll1l}),I11IIIIl&&I11IIIIl.length&&(I1111l1I[I11l1ll1].notifyImg={width:17,height:17,src:I11IIIIl}),I1l111ll[I1II111II].isParentSplit&&!I1l111ll[I1II111II].isSplit){var l1IIIIIII=l1I1111I1.getSplitImgSrc();I1111l1I[I11l1ll1].splitImg={pid:I1l111ll[I1II111II].pid,cursor:"pointer",width:16,height:16,src:l1IIIIIII}}else I1111l1I[I11l1ll1].splitImg=null;if(I1l111ll[I1II111II].isJoin?I1111l1I[I11l1ll1].joinImg={cursor:"pointer",width:16,height:16,src:l1I1111I1.getJoinImgSrc()}:I1111l1I[I11l1ll1].joinImg=null,I1III1III.config.tools.states[I1l111ll[I1II111II].nodeType]&&l1I1111I1.WorkFlowNodeType[I1l111ll[I1II111II].nodeType]){var l11II11I=I1III1III.config.tools.states[I1l111ll[I1II111II].nodeType].img;l11II11I&&(I1111l1I[I11l1ll1].img=l11II11I)}l1I1111I1.nodeIdMap[I1l111ll[I1II111II].id].attr=I1IIIII1l,l1I1111I1.buildPathsByNode(I1l111ll[I1II111II],I1I11111,l1I1I11I)}return l1I1I1Il},buildPathsByNode:function(I1I111II,I1I1I11l,I1l11ll1I){for(var l1IIIIII,I1l1ll111=this,l1I1111Il=I1I111II.lines,l1III1II1=0,l1l1l1ll=l1I1111Il.length;l1l1l1ll>l1III1II1;l1III1II1++){l1IIIIII=I1l1ll111.createNewId(),I1I1I11l[l1IIIIII]=l1I1111Il[l1III1II1];var I1111l1I=l1I1111Il[l1III1II1].dots;I1l11ll1I&&(l1I1111Il[l1III1II1].dots=I1l1ll111.getDots4vertical(I1111l1I))}},getDots4vertical:function(l1I111I1){for(var I1l1l11l,I1I11II1I=this,l1IIIII1=[],I1l1ll11l=0,l1I1111I1=l1I111I1.length;l1I1111I1>I1l1ll11l;I1l1ll11l++)I1l1l11l=I1I11II1I.rotate(l1I111I1[I1l1ll11l],Math.PI/2),I1l1l11l.x+=I1I11II1I.nodeWidth/2+I1I11II1I.nodeHeight/2,I1l1l11l.y-=I1I11II1I.nodeWidth/2-I1I11II1I.nodeHeight/2,l1IIIII1.push(I1l1l11l);return l1IIIII1},cloneWorkFlowNodeList:function(I1l111ll){for(var l1I1I111=[],I1l11ll1I=0,I1llllll=I1l111ll.length;I1llllll>I1l11ll1I;I1l11ll1I++)l1I1I111[I1l11ll1I]=$.extend(!0,{},I1l111ll[I1l11ll1I]);return l1I1I111},event2processGraph:function(l1I111I1){var I1I1I11l=this,I1I11II1l=I1I1I11l.getFlowUi();return I1I1I11l.toProcessProps=!1,I1I11II1l.render("flow-ui-item"),I1I11II1l.render("flow-ui-bottomButtons"),$("#ouiflow").show(),$("#flow-ui-viewType").show(),$("#flow-ui-processProp").hide(),I1I1I11l.scroll2center(),!1},event2processProps:function(l1I111Il){var I1l1l11I=this,I1I11II1I=I1l1l11I.getFlowUi();if(I1l1l11I.toProcessProps=!0,I1I11II1I.render("flow-ui-item"),!$("#flow-ui-processProp").hasClass("flow-ui-processProp")){I1l1l11I.processProp=I1l1l11I.flowData;for(var I1IIIIIl=I1l1l11I.processProp.rights||"[]",I1I1II11l=oui.parseJson(I1IIIIIl),l1I1111II=[],I1III1II1="",I1I1I1II=[],I1111I1I=0,l1l11111=I1I1II11l.length;l1l11111>I1111I1I;I1111I1I++)l1I1111II.push({id:I1I1II11l[I1111I1I].toId,name:I1I1II11l[I1111I1I].toName,typeFlag:I1I1II11l[I1111I1I].toType}),I1I1I1II.push(I1I1II11l[I1111I1I].toId);l1I1111II.length>0&&(I1III1II1=oui.parseString(l1I1111II)),I1l1l11I.processProp.selectPerson4right=I1III1II1,I1l1l11I.processProp.selectPerson4rightValue=I1I1I1II.join(","),I1I11II1I.render("flow-ui-processProp"),oui.parse()}return I1I11II1I.render("flow-ui-bottomButtons"),$("#ouiflow").hide(),$("#flow-ui-viewType").hide(),$("#flow-ui-processProp").show(),!1},event2trans:function(l1I111I1){var I1l1l11I=this,I1l11ll11=I1l1l11I.ViewType,l1lllllI=I1l1l11I.getFlowUi();return I1l1l11I.isVertical=!1,I1l1l11I.flowData.viewType=I1l11ll11.horizontal.value,l1lllllI.render("flow-ui-viewType"),$("#ouiflow").css({width:"",height:"",left:0,top:0}),I1l1l11I.refresh(),!1},event2vertical:function(I1l111l1){var l1I1I111=this,I1I11II1I=l1I1I111.ViewType,l1IIIIIl=l1I1I111.getFlowUi();return l1I1I111.isVertical=!0,l1I1I111.flowData.viewType=I1I11II1I.vertical.value,l1IIIIIl.render("flow-ui-viewType"),$("#ouiflow").css({width:"",height:"",left:0,top:0}),l1I1I111.refresh(),!1},event2renderByThemeId:function(l1I111Il){var I1l1l11I=this,I1I11II1I=I1l1l11I.getFlowUi(),l1IIIIII=l1I111Il.el,l1I1II11l=$(l1IIIIII).attr("flow-themeId");I1l1l11I.themeId=l1I1II11l,I1I11II1I.render("flow-ui-item"),I1I11II1I.config=$.extend(!0,I1I11II1I.config,I1I11II1I.themes[l1I1II11l]||{}),I1l1l11I.refresh()},refresh:function(){this.newId=0;var _self=this;_self.progressBar=oui.progress("加载中..."),_self.hideContextMenu&&_self.hideContextMenu(),_self.isVertical?(_self.offsetY=100,_self.x_distance_S=64,_self.x_distance=120,_self.rootPosY=-17,_self.rootPosX=150):(_self.offsetY=60,_self.x_distance_S=65,_self.x_distance=130,_self.rootPosY=0,_self.rootPosX=50),_self.maxLevel_H=0,_self.maxLevel_V=0,_self.mc_width=0,_self.mc_height=0,_self.branchLevelVMap=new FlowBiz.Map,_self.splitJoinMap=new FlowBiz.Map,_self.joinSplitMap=new FlowBiz.Map;var cloneArr=_self.cloneWorkFlowNodeList(_self.workFlowNodeList),startNode=_self.createTreeNode(cloneArr);_self.countLevelH(startNode,0),_self.countLevelV(startNode,0),_self.countPosition(startNode,"false"),_self.countDistance(),_self.countNodeLinesPosition(startNode);var workflowTreeNode=_self.createNodeData(cloneArr,_self.isVertical);_self.workflowTreeNode=workflowTreeNode;var width=_self.isVertical?_self.mc_height:_self.mc_width,height=_self.isVertical?_self.mc_width:_self.mc_height;width+=100,height+=100,$(function(){$("#ouiflow").css({left:0,top:0,position:"relative",width:"",height:""}),$("#ouiflow").html(""),$("#ouiflow").FlowUi({basePath:oui.getContextPath()+"res_engine/workflow/",restore:workflowTreeNode,width:width,height:height,tools:{save:{onclick:function(data){console.log(data),console.log(oui.biz.Tool.encode(eval("("+data+")"))),alert("save:\n"+data)}}}}),_self.scroll2center(),_self.progressBar&&_self.progressBar.hide()}),_self.changed()}};FlowBiz.scroll2center=function(){var I1I111II=this;if(I1I111II.isVertical){var l1l1l111=$(".flow-body")[0].scrollWidth-$(".flow-body").width(),l1I11II1I=$(".flow-body")[0].offsetWidth-$(".flow-body")[0].clientWidth,I1lllllI=$(".flow-body")[0].offsetHeight-$(".flow-body")[0].clientHeight;0>=l1I11II1I&&0>=I1lllllI?$("#ouiflow").css({position:"relative",left:"0px"}):0>=I1lllllI&&$("#ouiflow").css({position:"relative",left:"8.5px"}),$(".flow-body").scrollLeft(l1l1l111/2)}else{var l1l1l111=$(".flow-body")[0].scrollHeight-$(".flow-body").height();$(".flow-body").scrollTop(l1l1l111/2)}},FlowBiz.countLevelH=function(l1l111lI,l1l1l11I){var l1l11ll1l=this,I1IIIIIl=l1l111lI.parents,I1l1ll111=l1l111lI.children;if(l1l111lI.index=l1l1l11I,l1l111lI.level_H&&l1l111lI.level_H>100)throw"流程图显示最大支持的横向节点数为100！";var l1I1111Il,I1III1II1=0;if(0==I1IIIIIl.length)l1l111lI.level_H=1;else if(l1l111lI.isJoin){for(var l1I1I1Il=0,I1111I11=I1IIIIIl.length;I1111I11>l1I1I1Il;l1I1I1Il++)l1I1111Il=I1IIIIIl[l1I1I1Il],l1I1111Il.level_H>I1III1II1&&(I1III1II1=l1I1111Il.level_H);if(I1III1II1++,l1l111lI.level_H>=I1III1II1)return;l1l111lI.level_H=I1III1II1,l1l111lI.level_H>l1l11ll1l.maxLevel_H&&(l1l11ll1l.maxLevel_H=l1l111lI.level_H)}else{for(var l1I1I1Il=0,I1111I11=I1IIIIIl.length;I1111I11>l1I1I1Il;l1I1I1Il++)l1I1111Il=I1IIIIIl[l1I1I1Il],l1l111lI.level_H=l1I1111Il.level_H+1,l1l111lI.level_H>I1III1II1&&(I1III1II1=l1l111lI.level_H);l1l111lI.level_H>l1l11ll1l.maxLevel_H&&(l1l11ll1l.maxLevel_H=l1l111lI.level_H)}for(var l1l1111I=0,I1111I11=I1l1ll111.length;I1111I11>l1l1111I;l1l1111I++)l1l11ll1l.countLevelH(I1l1ll111[l1l1111I],l1l1111I)},FlowBiz.countLevelV=function(I1l111lI,I1I1I11l){var I1l11ll1l=this;if(!(I1l111lI.level_V>0)){var I1IIIIIl=I1l111lI.children;if(I1l111lI.index=I1I1I11l,I1l111lI.level_V>100)throw"流程图显示最大支持的纵向节点数为100！";var l1I1II11l;if(0==I1IIIIIl.length)I1l111lI.level_V=1;else{for(var I1l1111l1=0,I1III1II1=0,l1I1I1Il=I1IIIIIl.length;l1I1I1Il>I1III1II1;I1III1II1++)l1I1II11l=I1IIIIIl[I1III1II1],I1l11ll1l.countLevelV(l1I1II11l,I1III1II1),I1l1111l1+=l1I1II11l.level_V;if(I1l111lI.level_V=I1l1111l1,I1l111lI.level_V>I1l11ll1l.maxLevel_V&&(I1l11ll1l.maxLevel_V=I1l111lI.level_V),I1l111lI.isSplit){var I1111I1l=I1l11ll1l.findJoin(I1l111lI);I1l1111l1=0;for(var l1I11111=0,I1ll111ll=I1IIIIIl.length;I1ll111ll>l1I11111;l1I11111++){l1I1II11l=I1IIIIIl[l1I11111];var l1ll1llll=I1l11ll1l.findAllSplit(l1I1II11l,I1111I1l),I11l1lll=1;l1I1II11l.isSplit&&l1ll1llll.push(l1I1II11l);for(var l111l11l=0,I1llll1I=l1ll1llll.length;I1llll1I>l111l11l;l111l11l++){var l1IIIII1I=l1ll1llll[l111l11l];I1l11ll1l.countLevelV(l1IIIII1I,l1IIIII1I.index),I11l1lll<l1IIIII1I.level_V&&(I11l1lll=l1IIIII1I.level_V)}I1l1111l1+=I11l1lll}I1l1111l1<I1IIIIIl.length&&(I1l1111l1=I1IIIIIl.length),I1l111lI.level_V=I1l1111l1,I1l1111l1>I1l11ll1l.maxLevel_V&&(I1l11ll1l.maxLevel_V=I1l1111l1),null!=I1111I1l&&(I1111I1l.level_V=I1l1111l1)}else if(I1l111lI.isJoin||I1IIIIIl[0].isJoin)I1l111lI.level_V=1;else for(var l1I111II1=I1IIIIIl[0];!l1I111II1.isSplit&&0!=l1I111II1.children.length&&!l1I111II1.isJoin;)l1I111II1=l1I111II1.children[0]}}},FlowBiz.countDistance=function(){var I1l111ll=this;I1l111ll.mc_width=I1l111ll.countedSVGWidth+65,I1l111ll.mc_height=I1l111ll.mc_height=I1l111ll.y_distance*I1l111ll.maxLevel_V},FlowBiz.countNodeLinesPosition=function(l1l111l1){var l1I1I11I=(l1l111l1.x,l1l111l1.y,l1l111l1.children),I1l11ll1I=[],l1IIIIII=this;if(l1I1I11I.length>0)for(var I1l11ll1I=(l1I1I11I[0],l1I1I11I[l1I1I11I.length-1],[]),l1I1II11I=[],l1I1111Il=0,I1lll1llI=l1I1I11I.length;I1lll1llI>l1I1111Il;l1I1111Il++)l1I1II11I=[],l1l111l1.y==l1I1I11I[l1I1111Il].y||(l1l111l1.isSplit&&(l1I1II11I=[{x:l1l111l1.x+l1IIIIII.nodeWidth/2,y:l1I1I11I[l1I1111Il].y+l1IIIIII.nodeHeight/2}]),l1I1I11I[l1I1111Il].isJoin&&(l1I1II11I=[{x:l1I1I11I[l1I1111Il].x+l1IIIIII.nodeWidth/2,y:l1l111l1.y+l1IIIIII.nodeHeight/2}])),I1l11ll1I.push({nodeId:l1l111l1.id,from:l1l111l1.newId,to:l1I1I11I[l1I1111Il].newId,dots:l1I1II11I,text:{text:"",textPos:{x:-1,y:-1}},props:{text:{value:""}}}),l1IIIIII.countNodeLinesPosition(l1I1I11I[l1I1111Il]);var l1l1l1ll=[];if(I1l11ll1I&&I1l11ll1I.length){var l1111l1I;l1111l1I=I1l11ll1I.length%2==0?I1l11ll1I.length/2-1:parseInt(I1l11ll1I.length/2),0>l1111l1I&&(l1111l1I=0);for(var l1I1111Il=0;l1111l1I>=l1I1111Il;l1I1111Il++)l1l1l1ll.push(I1l11ll1I[l1I1111Il]);for(var l1l1111I=I1l11ll1I.length-1;l1l1111I>l1111l1I;l1l1111I--)l1l1l1ll.push(I1l11ll1I[l1l1111I])}l1l111l1.lines=l1l1l1ll},FlowBiz.rotate=function(l1I111II,l1l1l11I){var l1I11II11,l1lllll1,l1I1II11I=this;l1I11II11=Math.atan2(l1I111II.y,l1I111II.x),l1I11II11+=l1l1l11I,l1lllll1=Math.sqrt(l1I111II.x*l1I111II.x+l1I111II.y*l1I111II.y);var l1l1111ll=Math.cos(l1I11II11)*l1lllll1,l1III1II1=Math.sin(l1I11II11)*l1lllll1;return l1l1111ll+=l1I1II11I.mc_height,l1III1II1-=l1I1II11I.y_distance,{x:l1l1111ll,y:l1III1II1}},FlowBiz.countPosition=function(I1I111I1,I1l1l11l){var l1I11II1l=this,I1IIIII1=I1I111I1.parents,l1l1ll11l=I1I111I1.children,I1I1111II=!1,I1lll1ll1=0,I1l1l1l1=0;if(0==I1IIIII1.length)I1I111I1.x=l1I11II1l.rootPosX,I1I111I1.y=l1I11II1l.maxLevel_V*l1I11II1l.y_distance/2+l1I11II1l.rootPosY,l1I11II1l.firstPos={x:I1I111I1.x,y:I1I111I1.y};else{if(I1lll1ll1=I1IIIII1[0].x+l1I11II1l.x_distance,1==I1IIIII1.length?I1I111I1.isSplit&&l1l1ll11l.length>1||I1IIIII1[0].isSplit||I1IIIII1[0].isJoin?I1lll1ll1=I1IIIII1[0].x+l1I11II1l.x_distance_S:0==l1l1ll11l.length:I1I1111II=!0,I1I1111II){for(var I1111l1I=I1IIIII1[0].x||0,l1I1111I=1,l1ll111lI=I1IIIII1.length;l1ll111lI>l1I1111I;l1I1111I++)I1111l1I=Math.max(I1111l1I,I1IIIII1[l1I1111I].x||0);I1lll1ll1=I1111l1I+l1I11II1l.x_distance_S}if(I1I111I1.x=I1lll1ll1,1==I1IIIII1.length&&I1IIIII1[0].isJoin)I1l1l1l1=I1IIIII1[0].y;else{var I1II1III1=I1IIIII1[0].level_V;I1l1l1l1=I1IIIII1[0].y-I1II1III1*l1I11II1l.y_distance/2;for(var I11I1III,l1I1111I=0,l1ll111lI=I1I111I1.index;l1ll111lI>l1I1111I;l1I1111I++){var l111l111=I1IIIII1[0].children[l1I1111I];I11I1III=l1I11II1l.getBranchLevelV(l111l111),I1l1l1l1+=I11I1III*l1I11II1l.y_distance}I1IIIII1[0].isSplit?I1IIIII1[0].children.length>1?(I11I1III=l1I11II1l.getBranchLevelV(I1I111I1),I1l1l1l1+=I11I1III*l1I11II1l.y_distance/2):I1l1l1l1=I1IIIII1[0].y:I1l1l1l1+=I1I111I1.level_V*l1I11II1l.y_distance/2}I1IIIII1.length>1?I1I111I1.y=(I1IIIII1[0].y+I1IIIII1[I1IIIII1.length-1].y)/2:I1I111I1.y=I1l1l1l1}if(0!=I1I111I1.x&&0!=I1I111I1.y)for(var l1I1111I=0,l1ll111lI=l1l1ll11l.length;l1ll111lI>l1I1111I;l1I1111I++){var l1llll11=l1l1ll11l[l1I1111I];l1I11II1l.countPosition(l1llll11,I1l1l11l)}I1I111I1.isEnd&&I1I111I1.x&&I1I111I1.y&&(l1I11II1l.endPos={x:I1I111I1.x,y:I1I111I1.y},l1I11II1l.countedSVGWidth=l1I11II1l.endPos.x-l1I11II1l.firstPos.x)},FlowBiz.findJoin=function(I1I111II){var l1I1I111=this,I1l11ll11=I1I111II.id;if(l1I1I111.splitJoinMap.containsKey(I1l11ll11))return l1I1I111.splitJoinMap.get(I1l11ll11);for(var I1IIIII1=l1I1I111.findAllJoin(I1I111II),I1I1II11l=I1I111II.children,l1l1111l1=[],I1III1IIl=0,l1l1l1l1=I1IIIII1.length;l1l1l1l1>I1III1IIl;I1III1IIl++){for(var l1111I11=I1IIIII1[I1III1IIl],l1I11111=!0,I1ll111ll=0,l1ll1lllI=I1I1II11l.length;l1ll1lllI>I1ll111ll;I1ll111ll++){var l11l1llI=I1I1II11l[I1ll111ll];if(!l1I1I111.passThrough(l11l1llI,l1111I11)){l1I11111=!1;break}}l1I11111&&l1l1111l1.push(l1111I11)}if(null==l1l1111l1||l1l1111l1.length<1)return null;if(1==l1l1111l1.length)return l1l1111l1[0];for(var I111l111=l1l1111l1[0],I1III1IIl=0,l1l1l1l1=l1l1111l1.length;l1l1l1l1>I1III1IIl;I1III1IIl++){var I1llll1I=l1l1111l1[I1III1IIl];I111l111.id!=I1llll1I.id&&l1I1I111.passThrough(I1llll1I,I111l111)&&(I111l111=I1llll1I)}return l1I1I111.splitJoinMap.put(I1l11ll11,I111l111),l1I1I111.joinSplitMap.put(I111l111.id,I1I111II),I111l111},FlowBiz.findAllJoin=function(I1l111lI){for(var I1l1l111=this,l1l11ll1I=[],l1IIIII1=I1l111lI.children,I1I1II111=0,I1l1111l1=l1IIIII1.length;I1l1111l1>I1I1II111;I1I1II111++){var l1III1III=l1IIIII1[I1I1II111];l1III1III.parents.length>1&&l1l11ll1I.push(l1III1III);for(var I1I1I1I1=I1l1l111.findAllJoin(l1III1III),I1111I1I=0,l1I1111I=I1I1I1I1.length;l1I1111I>I1111I1I;I1111I1I++)l1l11ll1I.push(I1I1I1I1[I1111I1I])}return I1l1l111.unique(l1l11ll1I)},FlowBiz.unique=function(l1l111lI){for(var I1I1I111=new FlowBiz.Map,l1l11ll1I=0,l1lllll1=l1l111lI.length;l1lllll1>l1l11ll1I;l1l11ll1I++){var l1I1II11I=l1l111lI[l1l11ll1I];I1I1I111.put(l1I1II11I.id,l1I1II11I)}return l1l111lI=null,I1I1I111.values()},FlowBiz.passThrough=function(l1l111lI,I1I1I11l){for(var I1l11ll1l=this,I1IIIII1=l1l111lI.children,I1I1II111=0,l1l1111ll=I1IIIII1.length;l1l1111ll>I1I1II111;I1I1II111++){var l1III1II1=I1IIIII1[I1I1II111];if(l1III1II1.id==I1I1I11l.id)return!0;if(I1l11ll1l.passThrough(l1III1II1,I1I1I11l))return!0}return!1},FlowBiz.findSplit=function(I1I111II){var I1l1l11I=this,I1I11II1l=I1I111II.id;if(I1l1l11I.joinSplitMap.containsKey(I1I11II1l))return I1l1l11I.joinSplitMap.get(I1I11II1l);for(var l1llllll=I1l1l11I.findAllSplit(I1l1l11I.startNode,I1I111II),l1I1II11l=0,l1I1111I1=l1llllll.length;l1I1111I1>l1I1II11l;l1I1II11l++){var I1lll1ll1=l1llllll[l1I1II11l];if(I1l1l11I.findJoin(I1lll1ll1).id==I1I111II.id)return I1l1l11I.joinSplitMap.put(I1I11II1l,I1lll1ll1),I1lll1ll1}return null},FlowBiz.findAllSplit=function(l1I111II,I1I1I111){var l1I11II1I=this,l1lllllI=[];if(null==l1I111II||null==I1I1I111)return l1lllllI;if(l1I111II.id==I1I1I111.id)return l1lllllI;for(var I1I1II11I=l1I111II.children,l1l1111l1=0,I1III1II1=I1I1II11I.length;I1III1II1>l1l1111l1;l1l1111l1++){var l1I1I1Il=I1I1II11I[l1l1111l1];l1I1I1Il.isSplit&&l1lllllI.push(l1I1I1Il);for(var I1111I11=l1I11II1I.findAllSplit(l1I1I1Il,I1I1I111),I1I11111=0,I1ll111ll=I1111I11.length;I1ll111ll>I1I11111;I1I11111++)l1lllllI.push(I1111I11[I1I11111])}return l1I11II1I.unique(l1lllllI)},FlowBiz.getBranchLevelV=function(I1l111l1){var l1l1l111=this,I1l11ll11=I1l111l1.id;if(l1l1l111.branchLevelVMap.containsKey(I1l11ll11))return l1l1l111.branchLevelVMap.get(I1l11ll11);var I1IIIIII,l1l1ll11I=I1l111l1.level_V;if(I1l111l1.isSplit){var l1I1111Il=l1l1l111.findJoin(I1l111l1);I1IIIIII=l1l1l111.getBranchLevelV(l1I1111Il),I1IIIIII>l1l1ll11I&&(l1l1ll11I=I1IIIIII)}else for(var l1III1IIl=I1l111l1.children,I1l1l1l1=0,l1111l11=l1III1IIl.length;l1111l11>I1l1l1l1;I1l1l1l1++){var l1l11111=l1III1IIl[I1l1l1l1];if(l1l11111.isJoin)break;l1l11111.level_V>l1l1ll11I&&(l1l1ll11I=l1l11111.level_V),I1IIIIII=l1l1l111.getBranchLevelV(l1l11111),I1IIIIII>l1l1ll11I&&(l1l1ll11I=I1IIIIII)}return l1l1l111.branchLevelVMap.put(I1l11ll11,l1l1ll11I),l1l1ll11I};var Map=function(){this.container={}};Map.prototype.put=function(l1I111Il,I1I1I11l){try{null!=l1I111Il&&""!=l1I111Il&&(this.container[l1I111Il]=I1I1I11l)}catch(I1l11ll1I){return I1l11ll1I}},Map.prototype.get=function(I1I111II){try{return this.container[I1I111II]}catch(l1I1I11l){return l1I1I11l}},Map.prototype.remove=function(l1I111II){var l1I1I11I=null;try{l1I1I11I=this.container[l1I111II],delete this.container[l1I111II]}catch(I1I11II11){return l1I1I11I}return l1I1I11I},Map.prototype.clear=function(){try{delete this.container,this.container={}}catch(l1I111II){return l1I111II}},Map.prototype.keys=function(){var I1I111Il=[];for(var l1I1I11I in this.container)I1I111Il.push(l1I1I11I);return I1I111Il},Map.prototype.values=function(){for(var l1l111lI=[],l1l1l111=this.keys(),l1l11ll1I=0;l1l11ll1I<l1l1l111.length;l1l11ll1I++)l1l111lI.push(this.container[l1l1l111[l1l11ll1I]]);return l1l111lI},Map.prototype.containsKey=function(I1l111ll){try{for(var I1l1l111 in this.container)if(I1l1l111==I1l111ll)return!0;return!1}catch(I1I11II11){return I1I11II11}},Map.prototype.containsValue=function(I1I111Il){try{for(var l1l1l111 in this.container)if(this.container[l1l1l111]===I1I111Il)return!0;return!1}catch(I1l11ll1l){return I1l11ll1l}},Map.prototype.size=function(){return this.keys().length},Map.prototype.isEmpty=function(){return 0==this.keys().length},Map.prototype.valueArray=function(){return this.values()},FlowBiz.Map=Map,FlowBiz=oui.createClass(FlowBiz),FlowBiz.StateEnum={enable:{value:1,desc:"启用"},disable:{value:2,desc:"停用"},DRAFT:{value:3,desc:"草稿"}},FlowBiz.WorkFlowState={waitSend:{value:0,desc:"保存待发"},on:{value:1,desc:"流转中"},stop:{value:2,desc:"终止"},off:{value:3,desc:"完结"}},FlowBiz.WorkFlowNodeState={state_none:{value:0,desc:"尚未到达"},state_waitDo:{value:1,desc:"流程到达,所有人员待办未处理"},state_waitDo_someOne:{value:2,desc:"流程到达,部分人员已处理"},state_done:{value:3,desc:"流程到达,所有人员已处理"}},FlowBiz.WorkFlowPersonState={state_none:{value:0,desc:"尚未到达"},state_waitSend:{value:1,desc:"保存待发"},state_sent:{value:2,desc:"已发"},state_waitDo:{value:3,desc:"待办"},state_done:{value:4,desc:"已办"}},FlowBiz.getStatusImgName=function(I1I111II){var l1I1I11l=this,l1l11ll1I=I1I111II.nodeState||0,I1lllll1=I1I111II.personState||0,I1I1II11I=I1I111II.personAttitude||1,l1l1111l1=I1I111II.isCurrent||!1,I1III1II1=I1I111II.isFirst||!1,I1I1I1II=I1I111II.nodeType,I1111I1l="";if("person"==I1I1I1II){var I1l1111I=l1I1I11l.getEnumKeyByValue(I1lllll1,l1I1I11l.WorkFlowPersonState),l1II111II="";I1l1111I||(I1l1111I=l1I1I11l.getEnumKeyByValue(l1I1I11l.WorkFlowPersonState.state_none.value,l1I1I11l.WorkFlowPersonState)),I1111I1l=I1l1111I,I1l1111I&&"state_none"!=I1l1111I&&"state_waitSend"!=I1l1111I&&"state_sent"!=I1l1111I&&(l1II111II=l1I1I11l.getEnumKeyByValue(I1I1II11I,l1I1I11l.WorkFlowPersonAttitude),l1II111II||(l1II111II=l1I1I11l.getEnumKeyByValue(l1I1I11l.WorkFlowPersonAttitude.no_read.value,l1I1I11l.WorkFlowPersonAttitude)),I1111I1l+="_"+l1II111II)}else{var I1II1IIII=l1I1I11l.getEnumKeyByValue(l1l11ll1I,l1I1I11l.WorkFlowNodeState);I1II1IIII||(I1II1IIII="state_none"),I1111I1l=I1II1IIII}return l1l1111l1?I1111I1l+"_3":I1III1II1?I1111I1l+"_2":I1111I1l+"_1"},FlowBiz.getStatusImg=function(l1I111II){var l1l1l11l=this;return"img/16/"+l1l1l11l.getStatusImgName(l1I111II)+".png"},FlowBiz.getHastenWorkImg=function(I1l111lI){var l1I1I111=this,l1l11ll1I=I1l111lI.nodeState||"",l1lllllI="",l1I1II111=oui.getParam("noHastan");return l1I1II111&&"true"==l1I1II111?"":((l1I1I111.WorkFlowNodeState.state_waitDo.value==l1l11ll1I||l1I1I111.WorkFlowNodeState.state_waitDo_someOne.value==l1l11ll1I)&&(I1l111lI.notifyNode||(l1lllllI="img/16/hasten_work.png")),l1lllllI)},FlowBiz.getNotifyImg=function(l1l111lI){var I1l1l11I="";return l1l111lI.notifyNode&&(I1l1l11I=l1l111lI.isCurrent?"img/16/notify_3.png":"img/16/notify_1.png"),I1l1l11I},FlowBiz.getSplitImgSrc=function(I1I111II){return I1I111II?"img/16/split-high.png":"img/16/split.png"},FlowBiz.getJoinImgSrc=function(I1I111II){return I1I111II?"img/16/join-high.png":"img/16/join.png"},FlowBiz.getEnumKeyByValue=function(I1l111ll,I1I1I11I){for(var l1I11II1I in I1I1I11I)if(I1l111ll===I1I1I11I[l1I11II1I].value)return l1I11II1I;return null},FlowBiz.WorkFlowPersonAttitude={no_read:{value:1,desc:"未看"},has_read:{value:2,desc:"已阅"},hold:{value:3,desc:"暂存待办"},agree:{value:4,desc:"同意"},disagree:{value:5,desc:"不同意"},stop:{value:6,desc:"终止"}},FlowBiz.ViewType={horizontal:{value:1,desc:"横向"},vertical:{value:2,desc:"纵向"}},FlowBiz.WorkFlowNodeType=oui.WorkFlowNodeType,FlowBiz.WorkFlowImportance={normal:{value:1,desc:"普通"},important:{value:2,desc:"重要"},very_important:{value:3,desc:"非常重要"}},FlowBiz.FieldRightEnum={edit:{name:"edit",value:1,desc:"编辑"},view:{name:"view",value:2,desc:"浏览"},hidden:{name:"hidden",value:3,desc:"隐藏"},invisible:{name:"invisible",value:4,desc:"不可见"}},FlowBiz.WorkFlowChooseType=oui.WorkFlowChooseType,FlowBiz.WorkFlowNodeRight=oui.WorkFlowNodeRight,FlowBiz.ValidateConfig={workFlowNodeListMinSize:3,workFlowNodeListMaxSize:60,nodePersonListMaxSize:100,commentsMaxSize:100,failMode:"alert",workFlowProp:{name:{des:"流程名称",require:!0,maxLength:60},des:{des:"流程描述",maxLength:1e3}},workFlowNode:{nodeDisplayName:{maxLength:50}}},FlowBiz.validateWorkFlowNode=function(l1l111ll){var I1I1I11l=this;if(!l1l111ll||!l1l111ll.nodeDisplayName)return!0;var l1I11II1I=oui.validate4value(l1l111ll.nodeDisplayName,{failMsg:"节点显示名称长度不能超过{{validateValue}}个字符",maxLength:I1I1I11l.ValidateConfig.workFlowNode.nodeDisplayName.maxLength,failMode:I1I1I11l.ValidateConfig.failMode});return l1I11II1I?!0:!1},FlowBiz.RoleTypeEnum={orgMgr:{value:"orgMgr",display:"单位管理员"},departmentMgr:{value:"departmentMgr",display:"部门管理员"},depLeader:{value:"depLeader",display:"部门主管"
},formMgr:{value:"formMgr",display:"表单管理员"},surveyMgr:{value:"surveyMgr",display:"调查管理员"}},FlowBiz.roleVarFields=[FlowBiz.RoleTypeEnum.depLeader],FlowBiz.processVarFields=[{id:"relOrg_sender4Dept",title:"发起人所属部门",opt:"=,!=,in,notIn",controlType:"selectdept"},{id:"relOrg_sender4PartTimeDept",title:"发起人所属兼职部门",opt:"=,!=,in,notIn",controlType:"selectdept"},{id:"relOrg_sender4Role",title:"发起人角色",opt:"=,!=",controlType:"singleselect",showType:"",data:FlowBiz.roleVarFields},{id:"relOrg_preNode4Dept",title:"上节点所属部门",opt:"=,!=,in,notIn",controlType:"selectdept",showType:""},{id:"relOrg_preNode4PartTimeDept",title:"上节点所属兼职部门",opt:"=,!=,in,notIn",controlType:"selectdept",showType:""},{id:"relOrg_preNode4Role",title:"上节点角色",opt:"=,!=",controlType:"singleselect",showType:"",data:FlowBiz.roleVarFields}],FlowBiz.getNodesSize4validate=function(I1I111Il){for(var l1l1l111=0,I1I11II1l=0,I1IIIIII=I1I111Il.length;I1IIIIII>I1I11II1l;I1I11II1l++){var l1l1ll11l=I1I111Il[I1I11II1l];"split"!=l1l1ll11l.nodeType&&"join"!=l1l1ll11l.nodeType&&l1l1l111++}return l1l1l111},FlowBiz.validate=function(l1I111I1){var l1l1l11I=this,l1I11II1I=l1l1l11I.getFlowData(),I1lllll1=!0,I1l1ll11l=l1I11II1I.workFlowNodeList.length;if(I1lllll1=oui.validate4value(I1l1ll11l,{failMsg:"流程节点数不能大于{{validateValue}}",maxValue:l1l1l11I.ValidateConfig.workFlowNodeListMaxSize,failMode:l1l1l11I.ValidateConfig.failMode}),!I1lllll1)return!1;if(!l1I111I1)return!0;for(var l1I1111II=l1I11II1I.workFlowNodeList.length,l1III1IIl=l1I11II1I.workFlowNodeList,l1l1l1ll=0;l1I1111II>l1l1l1ll;l1l1l1ll++)if(I1lllll1=l1l1l11I.validateWorkFlowNode(l1III1IIl[l1l1l1ll]),!I1lllll1)return!1;return!0}}(),function(){var l1I111Il=null,I1I1I11l={"package":"oui.flow","class":"FlowUi",prefix:"flow",tpls:{"flow-tpl-viewType":"","flow-tpl-bottomButtons":""},setBiz:function(l1l111lI){l1I111Il=l1l111lI},getBiz:function(){return l1I111Il},render:function(I1I111II,I1l1l11I){if(this.tpls||(this.tpls={}),"undefined"!=typeof I1I111II){if(I1I111II){I1I111II.indexOf(this.prefix+"-ui-")>=0&&(I1I111II=this.prefix+"-tpl-"+I1I111II.replace(this.prefix+"-ui-","")),""!=typeof this.tpls[I1I111II]&&this.tpls[I1I111II]||(this.tpls[I1I111II]=template.compile(document.getElementById(I1I111II).innerHTML));var I1l11ll1l=I1I111II.replace(this.prefix+"-tpl-",""),l1IIIIII=this.tpls[I1I111II](this.getData.call({Events:l1I111Il.Events,FlowBiz:l1I111Il},I1l11ll1l));if("undefined"!=typeof I1l1l11I&&1==I1l1l11I)return l1IIIIII;var I1I1II11I=I1I111II.replace("-tpl-","-ui-");document.getElementById(I1I1II11I).outerHTML=l1IIIIII}}else{var l1l1111l1=this.tpls;for(var l1lll1llI in l1l1111l1)this.render(l1lll1llI)}},getData:function(l1I111II){var I1l1l11l=this.FlowBiz;return I1l1l11l[l1I111II]?(this[l1I111II]=I1l1l11l[l1I111II],this[l1I111II]):this}};I1I1I11l=oui.createClass(I1I1I11l),I1I1I11l.themes=[],I1I1I11l.config={editable:!0,lineHeight:10,basePath:"",rect:{attr:{x:10,y:10,width:100,height:50,r:3,fill:"#5990cf",stroke:"","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"状态",fill:"#ffffff","font-size":13},margin:5,props:[],img:{}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#5990cf",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#5990cf",fill:"#5990cf","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":2},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":3},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new I1I1I11l.editors.textEditor}}}},tools:{attr:{left:10,top:10},pointer:{},path:{},states:{},save:{onclick:function(I1I111Il){alert(I1I111Il)}}},props:{attr:{top:10,right:30},props:{}},restore:"",activeRects:{rects:[],rectAttr:{stroke:"#ff0000","stroke-width":2}},historyRects:{rects:[],pathAttr:{path:{stroke:"#00ff00"},arrow:{stroke:"#00ff00",fill:"#00ff00"}}}},I1I1I11l.util={isLine:function(I1l111lI,l1l1l111,l1l11ll1I){var I1IIIII1,l1I1II11I;return I1IIIII1=I1l111lI.x-l1l11ll1I.x==0?1:(I1l111lI.y-l1l11ll1I.y)/(I1l111lI.x-l1l11ll1I.x),l1I1II11I=(l1l1l111.x-l1l11ll1I.x)*I1IIIII1+l1l11ll1I.y,l1l1l111.y-l1I1II11I<10&&l1l1l111.y-l1I1II11I>-10?(l1l1l111.y=l1I1II11I,!0):!1},center:function(l1I111Il,l1I1I11l){return{x:(l1I111Il.x-l1I1I11l.x)/2+l1I1I11l.x,y:(l1I111Il.y-l1I1I11l.y)/2+l1I1I11l.y}},nextId:function(){var l1I111II=0;return function(){return++l1I111II}}(),connPoint:function(I1l111ll,l1I1I11I){var I1l11ll1I=l1I1I11I,I1llllll={x:I1l111ll.x+I1l111ll.width/2,y:I1l111ll.y+I1l111ll.height/2},I1I1II111=(I1llllll.y-I1l11ll1I.y)/(I1llllll.x-I1l11ll1I.x);I1I1II111=isNaN(I1I1II111)?0:I1I1II111;var l1I1111Il,l1III1IIl,I1l1l1ll=I1l111ll.height/I1l111ll.width,l1111I1I=I1l11ll1I.y<I1llllll.y?-1:1,I1l1111I=I1l11ll1I.x<I1llllll.x?-1:1;return Math.abs(I1I1II111)>I1l1l1ll&&-1==l1111I1I?(l1I1111Il=I1llllll.y-I1l111ll.height/2,l1III1IIl=I1llllll.x+l1111I1I*I1l111ll.height/2/I1I1II111):Math.abs(I1I1II111)>I1l1l1ll&&1==l1111I1I?(l1I1111Il=I1llllll.y+I1l111ll.height/2,l1III1IIl=I1llllll.x+l1111I1I*I1l111ll.height/2/I1I1II111):Math.abs(I1I1II111)<I1l1l1ll&&-1==I1l1111I?(l1I1111Il=I1llllll.y+I1l1111I*I1l111ll.width/2*I1I1II111,l1III1IIl=I1llllll.x-I1l111ll.width/2):Math.abs(I1I1II111)<I1l1l1ll&&1==I1l1111I&&(l1I1111Il=I1llllll.y+I1l111ll.width/2*I1I1II111,l1III1IIl=I1llllll.x+I1l111ll.width/2),{x:l1III1IIl,y:l1I1111Il}},arrow:function(l1l111lI,I1I1I11l,l1I11II1I){var l1IIIII1=Math.atan2(l1l111lI.y-I1I1I11l.y,I1I1I11l.x-l1l111lI.x)*(180/Math.PI),I1I1II11I=I1I1I11l.x-l1I11II1I*Math.cos(l1IIIII1*(Math.PI/180)),I1l1111l1=I1I1I11l.y+l1I11II1I*Math.sin(l1IIIII1*(Math.PI/180)),l1III1IIl=I1I1II11I+l1I11II1I*Math.cos((l1IIIII1+120)*(Math.PI/180)),I1l1l1l1=I1l1111l1-l1I11II1I*Math.sin((l1IIIII1+120)*(Math.PI/180)),I1111I1I=I1I1II11I+l1I11II1I*Math.cos((l1IIIII1+240)*(Math.PI/180)),l1l11111=I1l1111l1-l1I11II1I*Math.sin((l1IIIII1+240)*(Math.PI/180));return[I1I1I11l,{x:l1III1IIl,y:I1l1l1l1},{x:I1111I1I,y:l1l11111}]}},I1I1I11l.rect=function(I1I111II,l1I1I11l){function I1I11II1I(){var I1I111Il=l1l1l111l.x+l1III1Il.margin,l1I1I111=l1l1l111l.y+l1III1Il.margin,I1I11II1l=l1l1l111l.width-2*l1III1Il.margin,l1IIIIII=l1l1l111l.height-2*l1III1Il.margin;switch(I1llllll.attr({x:I1I111Il,y:l1I1I111,width:I1I11II1l,height:l1IIIIII}),l1III1Il.showType){case"image":I1l1ll11I&&I1l1ll11I.attr({x:I1I111Il+(I1I11II1l-l1III1Il.img.width)/2,y:l1I1I111+(l1IIIIII-l1III1Il.img.height)/2}).show();break;case"text":I1llllll.show(),l1II1IIII.attr({x:I1I111Il+I1I11II1l/2,y:l1I1I111+l1IIIIII/2}).show();break;case"image&text":I1llllll.show(),l1II1IIII.attr({x:I1I111Il+l1III1Il.img.width+(I1I11II1l-l1III1Il.img.width)/2,y:l1I1I111+(l1IIIIII-I111I111.config.lineHeight)/2+I111I111.config.lineHeight}).show(),I1l1ll11I&&I1l1ll11I.attr({x:I1I111Il+l1III1Il.img.width/2,y:l1I1I111+(l1IIIIII-l1III1Il.img.height)/2}).show()}$(l111111l).trigger("rectresize",I1IIIII1l)}var I1llllll,I1l1ll11I,I1l1111lI,I1lll1lll,l1l1l1lI,I1111I11,I1l11111,I1II111Il,l1II1IIII,I11I1II1,I111I111=oui.flow.FlowUi,l1llll1l=I111I111.getBiz(),I1IIIII1l=(l1llll1l.WorkFlowNodeState,this),l1I111II1=I111I111.util.nextId(),l1III1Il=$.extend(!0,{},I111I111.config.rect,I1I111II),l11lll11="rect"+l1I111II1,l111111l=l1I1I11l,l1I1II1Il=l1llll1l.nodeIdMap,I1ll1111=l1I1II1Il[l1III1Il.id],I11llll1=I1ll1111&&I1ll1111.nodeType&&"end"==I1ll1111.nodeType;I1llllll=l111111l.rect(l1III1Il.attr.x,l1III1Il.attr.y,l1III1Il.attr.width,l1III1Il.attr.height,l1III1Il.attr.r).attr(l1III1Il.attr).attr({fill:"#ffffff"});var l1IIIIII1=I111I111.getBiz().nodeWidth;if(l1III1Il.attr.width==l1IIIIII1?I11I1II1=l111111l.rect(l1III1Il.attr.x+(l1IIIIII1-48)/2,l1III1Il.attr.y,48,48,l1III1Il.attr.r).attr(l1III1Il.attr).attr({x:l1III1Il.attr.x+(l1IIIIII1-48)/2,y:l1III1Il.attr.y,width:48,height:48}):1==l1III1Il.attr.width?I11I1II1=l111111l.rect(l1III1Il.attr.x,l1III1Il.attr.y,5,5,l1III1Il.attr.r).attr(l1III1Il.attr).attr({x:l1III1Il.attr.x-3,y:l1III1Il.attr.y-3,width:7,height:7}):15==l1III1Il.attr.width&&(I1llllll.attr("fill",l1III1Il.attr.fill),l1llll1l.isIndex||l1llll1l.isPreview||(I1II111Il=l111111l.image(I111I111.config.basePath+l1III1Il.joinImg.src,l1III1Il.attr.x,l1III1Il.attr.y,l1III1Il.joinImg.width,l1III1Il.joinImg.height))),l1III1Il.img&&l1III1Il.img.src&&(I1l1ll11I=l111111l.image(I111I111.config.basePath+l1III1Il.img.src,l1III1Il.attr.x+l1III1Il.attr.width/2-l1III1Il.img.width/2,l1III1Il.attr.y+(l1III1Il.attr.height-l1III1Il.img.height)/2-9,l1III1Il.img.width,l1III1Il.img.height)),l1III1Il.statusImg&&l1III1Il.statusImg.src&&(I1l1111lI=l111111l.image(I111I111.config.basePath+l1III1Il.statusImg.src,l1III1Il.attr.x-l1III1Il.statusImg.width/2+l1III1Il.attr.width/2+l1III1Il.attr.width/(2*Math.sqrt(2))-5,l1III1Il.attr.y-l1III1Il.statusImg.height/2+l1III1Il.attr.height/2+l1III1Il.attr.height/(2*Math.sqrt(2))-18,l1III1Il.statusImg.width,l1III1Il.statusImg.height)),l1III1Il._commentsImg&&l1III1Il._commentsImg.src&&(I1lll1lll=l111111l.image(I111I111.config.basePath+l1III1Il.commentsImg.src,l1III1Il.attr.x-l1III1Il.commentsImg.width/2+l1III1Il.attr.width/2+l1III1Il.attr.width/(2*Math.sqrt(2))-5,l1III1Il.attr.y-l1III1Il.commentsImg.height/2+l1III1Il.attr.height/2+l1III1Il.attr.height/(2*Math.sqrt(2)),l1III1Il.commentsImg.width,l1III1Il.commentsImg.height)),l1III1Il.hastenWorkImg&&l1III1Il.hastenWorkImg.src&&(l1l1l1lI=l111111l.image(I111I111.config.basePath+l1III1Il.hastenWorkImg.src,l1III1Il.attr.x+l1III1Il.attr.width-10,l1III1Il.attr.y,l1III1Il.hastenWorkImg.width,l1III1Il.hastenWorkImg.height)),l1III1Il.notifyImg&&l1III1Il.notifyImg.src&&(I1111I11=l111111l.image(I111I111.config.basePath+l1III1Il.notifyImg.src,l1III1Il.attr.x+l1III1Il.attr.width-10,l1III1Il.attr.y,l1III1Il.notifyImg.width,l1III1Il.notifyImg.height)),l1III1Il.splitImg&&l1III1Il.splitImg.src){var l11II11l=l1llll1l.hasBranch(l1llll1l.nodeIdMap[l1III1Il.id]),I1l11ll1=!0;(l1llll1l.isIndex||l1llll1l.isPreview||l1llll1l.design4Runtime)&&(l11II11l||(I1l11ll1=!1)),I1l11ll1&&(I1l11111=l1llll1l.isVertical?l111111l.image(I111I111.config.basePath+l1III1Il.splitImg.src,l1III1Il.attr.x+25,l1III1Il.attr.y-20,l1III1Il.splitImg.width,l1III1Il.splitImg.height):l111111l.image(I111I111.config.basePath+l1III1Il.splitImg.src,l1III1Il.attr.x-15,l1III1Il.attr.y+25,l1III1Il.splitImg.width,l1III1Il.splitImg.height))}l1II1IIII=l111111l.text(l1III1Il.attr.x+l1III1Il.attr.width/2,l1III1Il.attr.y+l1III1Il.attr.height-5,l1III1Il.text.text).attr(l1III1Il.text),l1III1Il.text.text&&l1III1Il.text.text.length>6&&l1II1IIII.attr({text:l1III1Il.text.text.substring(0,6)+"..."}),l1II1IIII&&l1II1IIII.node&&l1III1Il.text.text.length>0&&!oui.os.mobile&&$(l1II1IIII.node).attr({"oui-e-mouseenter":"showTipsMsg4nodeDisplayName","oui-e-mouseleave":"hideTips4nodeDisplayName"}),("split"==l1III1Il.text.text||"join"==l1III1Il.text.text||"end"==l1III1Il.text.text)&&l1II1IIII.attr({text:""});var l1l1l111l={x:l1III1Il.attr.x-l1III1Il.margin,y:l1III1Il.attr.y-l1III1Il.margin,width:l1III1Il.attr.width+2*l1III1Il.margin,height:l1III1Il.attr.height+2*l1III1Il.margin};$([I1llllll.node,l1II1IIII.node]).attr({"class":I11llll1?"end":"",nodeId:l1III1Il.id}),$([I1llllll.node,l1II1IIII.node]).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2contextMenu"),$([I1llllll.node,l1II1IIII.node]).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu"),I1II111Il&&I1II111Il.node&&($(I1II111Il.node).attr({nodeId:l1III1Il.id,style:"cursor:pointer;"}),$(I1II111Il.node).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2contextMenu"),$(I1II111Il.node).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu"),oui.os.mobile||($(I1II111Il.node).attr("oui-e-mouseenter","event2mouseenterJoin"),$(I1II111Il.node).attr("oui-e-mouseleave","event2leaveJoin"))),I11I1II1&&I11I1II1.node&&($(I11I1II1.node).attr({"class":I11llll1?"end":"",nodeId:l1III1Il.id}),$(I11I1II1.node).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2contextMenu"),$(I11I1II1.node).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu")),I1l1ll11I&&I1l1ll11I.node&&($(I1l1ll11I.node).attr({"node-img-src":I111I111.config.basePath+l1III1Il.img.src,"node-img-high-src":I111I111.config.basePath+"img/16/flow-edit.png?_t="+oui.loadStartTime,"class":I11llll1?"end":"",nodeId:l1III1Il.id}),$(I1l1ll11I.node).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2contextMenu"),$(I1l1ll11I.node).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu"),$(I1l1ll11I.node).attr("oui-e-mouseenter","event2showEditIcon"),$(I1l1ll11I.node).attr("oui-e-mouseleave","event2hideEditIcon")),I1l1111lI&&I1l1111lI.node&&($(I1l1111lI.node).attr({nodeId:l1III1Il.id}),$(I1l1111lI.node).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2contextMenu"),$(I1l1111lI.node).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu")),$([l1II1IIII.node]).attr({nodeTextId:"text-"+l1III1Il.id}),l1l1l1lI&&l1l1l1lI.node&&($(l1l1l1lI.node).attr({nodeId:l1III1Il.id,style:"cursor:pointer;"}),$(l1l1l1lI.node).attr("oui-e-"+l1llll1l.Events.actionMenu,"event2HastenWork"),$(l1l1l1lI.node).attr("oui-e-"+l1llll1l.Events.click,"event2HastenWork")),I1l11111&&I1l11111.node&&($(I1l11111.node).attr({nodeId:l1III1Il.id,fromId:l1III1Il.splitImg.pid,toId:l1III1Il.id,style:l1llll1l.design4Runtime?"":"cursor:pointer;"}),$(I1l11111.node).attr("oui-e-"+l1llll1l.Events.click,"event2contextMenu"),oui.os.mobile||l1llll1l.design4Runtime||($(I1l11111.node).attr("oui-e-mouseenter","event2mouseenterLine"),$(I1l11111.node).attr("oui-e-mouseleave","event2leaveLine"))),this.toJson=function(){var I1I111I1="{type:'"+l1III1Il.type+"',text:{text:'"+l1II1IIII.attr("text")+"'}, attr:{ x:"+Math.round(I1llllll.attr("x"))+", y:"+Math.round(I1llllll.attr("y"))+", width:"+Math.round(I1llllll.attr("width"))+", height:"+Math.round(I1llllll.attr("height"))+"}, props:{";for(var I1I1I11l in l1III1Il.props)I1I111I1+=I1I1I11l+":{value:'"+l1III1Il.props[I1I1I11l].value+"'},";return","==I1I111I1.substring(I1I111I1.length-1,I1I111I1.length)&&(I1I111I1=I1I111I1.substring(0,I1I111I1.length-1)),I1I111I1+="}}"},this.restore=function(l1l111lI){var l1I1I111=l1l111lI;l1III1Il=$.extend(!0,l1III1Il,l1l111lI),l1II1IIII.attr({text:l1I1I111.text.text}),I1I11II1I()},this.getBBox=function(){return l1l1l111l},this.getId=function(){return l11lll11},this.remove=function(){I1llllll.remove(),l1II1IIII.remove(),I1l1ll11I&&I1l1ll11I.remove(),I1l1111lI&&I1l1111lI.remove(),I1lll1lll&&I1lll1lll.remove(),l1l1l1lI&&l1l1l1lI.remove(),I1111I11&&I1111I11.remove()},this.text=function(){return l1II1IIII.attr("text")},this.attr=function(l1I111I1){l1I111I1&&I1llllll.attr(l1I111I1)}},I1I1I11l.path=function(I1I111I1,l1l1l11I,l1I11II1I,l1IIIII1){function l1l1ll11l(I1l111ll,I1l1l11I,l1I11II1l,l1lllllI){var I1l1ll111,I1l1111lI=I1l111ll,I1lll1llI=l1I11II1l,l1l1l1ll=l1lllllI,I1111I1l=I1l1l11I;switch(I1l1111lI){case"from":I1l1ll111=I11l1ll1.rect(I1l1l11I.x-I111I11l.attr.fromDot.width/2,I1l1l11I.y-I111I11l.attr.fromDot.height/2,I111I11l.attr.fromDot.width,I111I11l.attr.fromDot.height).attr(I111I11l.attr.fromDot);break;case"big":I1l1ll111=I11l1ll1.rect(I1l1l11I.x-I111I11l.attr.bigDot.width/2,I1l1l11I.y-I111I11l.attr.bigDot.height/2,I111I11l.attr.bigDot.width,I111I11l.attr.bigDot.height).attr(I111I11l.attr.bigDot);break;case"small":I1l1ll111=I11l1ll1.rect(I1l1l11I.x-I111I11l.attr.smallDot.width/2,I1l1l11I.y-I111I11l.attr.smallDot.height/2,I111I11l.attr.smallDot.width,I111I11l.attr.smallDot.height).attr(I111I11l.attr.smallDot);break;case"to":I1l1ll111=I11l1ll1.rect(I1l1l11I.x-I111I11l.attr.toDot.width/2,I1l1l11I.y-I111I11l.attr.toDot.height/2,I111I11l.attr.toDot.width,I111I11l.attr.toDot.height).attr(I111I11l.attr.toDot)}$(I1l1ll111.node).on(l1I111Il.Events.click,function(){return!1}),this.type=function(l1I111II){return l1I111II?void(I1l1111lI=l1I111II):I1l1111lI},this.node=function(I1I111Il){return I1I111Il?void(I1l1ll111=I1I111Il):I1l1ll111},this.left=function(I1I111Il){return I1I111Il?void(I1lll1llI=I1I111Il):I1lll1llI},this.right=function(I1I111Il){return I1I111Il?void(l1l1l1ll=I1I111Il):l1l1l1ll},this.remove=function(){I1lll1llI=null,l1l1l1ll=null,I1l1ll111.remove()},this.pos=function(I1l111lI){return I1l111lI?("undefined"==typeof I1l111lI.x&&(I1l111lI.x=I1111I1l.x||0),"undefined"==typeof I1l111lI.y&&(I1l111lI.y=I1111I1l.y||0),I1111I1l=I1l111lI,I1l1ll111.attr({x:I1111I1l.x-I1l1ll111.attr("width")/2,y:I1111I1l.y-I1l1ll111.attr("height")/2}),this):I1111I1l},this.moveTo=function(l1I111I1,l1I11II1I){switch(this.pos({x:l1I111I1,y:l1I11II1I}),I1l1111lI){case"from":l1l1l1ll&&l1l1l1ll.right()&&"to"==l1l1l1ll.right().type()&&l1l1l1ll.right().pos(I1I1I11l.util.connPoint(l1lllll11.getBBox(),I1111I1l)),l1l1l1ll&&l1l1l1ll.right()&&l1l1l1ll.pos(I1I1I11l.util.center(I1111I1l,l1l1l1ll.right().pos()));break;case"big":l1l1l1ll&&l1l1l1ll.right()&&"to"==l1l1l1ll.right().type()&&l1l1l1ll.right().pos(I1I1I11l.util.connPoint(l1lllll11.getBBox(),I1111I1l)),I1lll1llI&&I1lll1llI.left()&&"from"==I1lll1llI.left().type()&&I1lll1llI.left().pos(I1I1I11l.util.connPoint(I1llll1l.getBBox(),I1111I1l)),l1l1l1ll&&l1l1l1ll.right()&&l1l1l1ll.pos(I1I1I11l.util.center(I1111I1l,l1l1l1ll.right().pos())),I1lll1llI&&I1lll1llI.left()&&I1lll1llI.pos(I1I1I11l.util.center(I1111I1l,I1lll1llI.left().pos()));var I1lllll1={x:I1111I1l.x,y:I1111I1l.y};if(I1I1I11l.util.isLine(I1lll1llI.left().pos(),I1lllll1,l1l1l1ll.right().pos())){I1l1111lI="small",I1l1ll111.attr(I111I11l.attr.smallDot),this.pos(I1lllll1);var l1I1111II=I1lll1llI;I1lll1llI.left().right(I1lll1llI.right()),I1lll1llI=I1lll1llI.left(),l1I1111II.remove();var l1III1II1=l1l1l1ll;l1l1l1ll.right().left(l1l1l1ll.left()),l1l1l1ll=l1l1l1ll.right(),l1III1II1.remove()}break;case"small":if(I1lll1llI&&l1l1l1ll&&!I1I1I11l.util.isLine(I1lll1llI.pos(),{x:I1111I1l.x,y:I1111I1l.y},l1l1l1ll.pos())){I1l1111lI="big",I1l1ll111.attr(I111I11l.attr.bigDot);var l1I1111II=new l1l1ll11l("small",I1I1I11l.util.center(I1lll1llI.pos(),I1111I1l),I1lll1llI,I1lll1llI.right());I1lll1llI.right(l1I1111II),I1lll1llI=l1I1111II;var l1III1II1=new l1l1ll11l("small",I1I1I11l.util.center(l1l1l1ll.pos(),I1111I1l),l1l1l1ll.left(),l1l1l1ll);l1l1l1ll.left(l1III1II1),l1l1l1ll=l1III1II1}break;case"to":I1lll1llI&&I1lll1llI.left()&&"from"==I1lll1llI.left().type()&&I1lll1llI.left().pos(I1I1I11l.util.connPoint(I1llll1l.getBBox(),I1111I1l)),I1lll1llI&&I1lll1llI.left()&&I1lll1llI.pos(I1I1I11l.util.center(I1111I1l,I1lll1llI.left().pos()))}I1III1III()}}function l1l1111ll(){var l1I111II,l1I1I111,l1I11II1I,I1IIIII1,I1l1ll11I=I1llll1l.getBBox(),l1l1111l1=l1lllll11.getBBox();l1I11II1I=I1I1I11l.util.connPoint(I1l1ll11I,{x:l1l1111l1.x+l1l1111l1.width/2,y:l1l1111l1.y+l1l1111l1.height/2}),I1IIIII1=I1I1I11l.util.connPoint(l1l1111l1,l1I11II1I),l1I111II=new l1l1ll11l("from",l1I11II1I,null,new l1l1ll11l("small",{x:(l1I11II1I.x+I1IIIII1.x)/2,y:(l1I11II1I.y+I1IIIII1.y)/2})),l1I111II.right().left(l1I111II),l1I1I111=new l1l1ll11l("to",I1IIIII1,l1I111II.right(),null),l1I111II.right().right(l1I1I111),this.toPathString=function(){if(!l1I111II)return"";var I1l1l11l=l1I111II,I1I11II1I="M"+I1l1l11l.pos().x+" "+I1l1l11l.pos().y,l1IIIIIl="";if("undefined"==typeof I1l1l11l.pos()||"undefined"==typeof I1l1l11l.pos().x)return"";if("undefined"==typeof I1l1l11l.pos()||"undefined"==typeof I1l1l11l.pos().y)return"";for(;I1l1l11l.right();)I1l1l11l=I1l1l11l.right(),"undefined"!=typeof I1l1l11l.pos()&&"undefined"!=typeof I1l1l11l.pos().x&&"undefined"!=typeof I1l1l11l.pos()&&"undefined"!=typeof I1l1l11l.pos().y&&(I1I11II1I+="L"+I1l1l11l.pos().x+" "+I1l1l11l.pos().y);var I1I1II11I=I1I1I11l.util.arrow(I1l1l11l.left().pos(),I1l1l11l.pos(),I111I11l.attr.arrow.radius);return l1IIIIIl="M"+I1I1II11I[0].x+" "+I1I1II11I[0].y+"L"+I1I1II11I[1].x+" "+I1I1II11I[1].y+"L"+I1I1II11I[2].x+" "+I1I1II11I[2].y+"z",[I1I11II1I,l1IIIIIl]},this.toJson=function(){for(var l1l111l1="[",I1I1I11I=l1I111II;I1I1I11I;)"big"==I1I1I11I.type()&&(l1l111l1+="{x:"+Math.round(I1I1I11I.pos().x)+",y:"+Math.round(I1I1I11I.pos().y)+"},"),I1I1I11I=I1I1I11I.right();return","==l1l111l1.substring(l1l111l1.length-1,l1l111l1.length)&&(l1l111l1=l1l111l1.substring(0,l1l111l1.length-1)),l1l111l1+="]"},this.restore=function(l1l111l1){for(var l1l1l11I=l1l111l1,l1I11II1l=l1I111II.right(),I1lllll1=0;I1lllll1<l1l1l11I.length;I1lllll1++)l1I11II1l.moveTo(l1l1l11I[I1lllll1].x,l1l1l11I[I1lllll1].y),l1I11II1l.moveTo(l1l1l11I[I1lllll1].x,l1l1l11I[I1lllll1].y),l1I11II1l=l1I11II1l.right();this.hide()},this.fromDot=function(){return l1I111II},this.toDot=function(){return l1I1I111},this.midDot=function(){for(var I1I111Il=l1I111II.right(),I1I1I11I=l1I111II.right().right();I1I1I11I.right()&&I1I1I11I.right().right();)I1I1I11I=I1I1I11I.right().right(),I1I111Il=I1I111Il.right();return I1I111Il},this.show=function(){for(var I1l111ll=l1I111II;I1l111ll;)I1l111ll.node().show(),I1l111ll=I1l111ll.right()},this.hide=function(){for(var l1I111Il=l1I111II;l1I111Il;)l1I111Il.node().hide(),l1I111Il=l1I111Il.right()},this.remove=function(){for(var l1I111I1=l1I111II;l1I111I1;)l1I111I1.right()?(l1I111I1=l1I111I1.right(),l1I111I1.left().remove()):(l1I111I1.remove(),l1I111I1=null)}}function I1III1III(){var I1l111ll=l1II111I1.toPathString();l1II111I1.midDot().pos();I1l111ll&&(l1I1I1II.attr({path:I1l111ll[0]}),I1111I1l&&I1111I1l.attr({path:I1l111ll[1]}))}var l1I1I1II,I1111I1l,l1l11111,l1II111I1,l1II1IIIl=oui.flow.FlowBiz.workflowTreeNode||{},I11l1ll1=l1l1l11I,I111I11l=$.extend(!0,{},I1I1I11l.config.path),I1llll1l=(I111I11l.text.textPos,l1I11II1I),l1lllll11=l1IIIII1,l1l111ll1="path"+I1I1I11l.util.nextId();I111I11l=$.extend(!0,I111I11l,I1I111I1),l1II111I1=new l1l1111ll;var I1III1I1=l1II111I1.toPathString();l1II111I1.midDot().pos();if(I111I11l.attr.path.path=I1III1I1[0],I111I11l.attr.arrow.path=I1III1I1[1],l1I1I1II=I11l1ll1.path(I1III1I1[0]).attr(I111I11l.attr.path)){if(I1I111I1&&I1I111I1.from&&I1I111I1.to&&l1II1IIIl&&l1II1IIIl.states&&l1II1IIIl.states[I1I111I1.from]&&l1II1IIIl.states[I1I111I1.to]){$(l1I1I1II.node).attr("fromId",l1II1IIIl.states[I1I111I1.from].id),$(l1I1I1II.node).attr("toId",l1II1IIIl.states[I1I111I1.to].id),$(l1I1I1II.node).attr("oui-e-"+l1I111Il.Events.click,"event2contextMenu"),oui.os.mobile||($(l1I1I1II.node).attr("oui-e-mouseenter","event2mouseenterLine"),$(l1I1I1II.node).attr("oui-e-mouseleave","event2leaveLine"));var I11lll1I=l1I111Il.hasBranch(l1I111Il.nodeIdMap[l1II1IIIl.states[I1I111I1.to].id]);I11lll1I&&l1I111Il.renderBranchLine(l1I1I1II.node),l1I111Il.nodeIdMap[l1II1IIIl.states[I1I111I1.from].id].isSplit?l1I111Il.isIndex||l1I111Il.isPreview?I11lll1I||($(l1I1I1II.node).attr("oui-e-"+l1I111Il.Events.click,""),$(l1I1I1II.node).attr("oui-e-mouseenter",""),$(l1I1I1II.node).attr("oui-e-mouseleave",""),$(l1I1I1II.node).attr("stroke-width","1"),$(l1I1I1II.node).css("stroke-width","1")):($(l1I1I1II.node).attr("stroke-width","3"),$(l1I1I1II.node).css("stroke-width","3")):I11lll1I&&l1I111Il.isIndex||($(l1I1I1II.node).attr("oui-e-mouseenter",""),$(l1I1I1II.node).attr("oui-e-mouseleave",""),$(l1I1I1II.node).attr("oui-e-"+l1I111Il.Events.click,""))}l1I1I1II.toBack()}this.from=function(){return I1llll1l},this.to=function(){return l1lllll11},this.restore=function(I1l111ll){var l1l1l111=I1l111ll;I111I11l=$.extend(!0,I111I11l,I1l111ll),l1II111I1.restore(l1l1l111.dots)},this.remove=function(){l1II111I1.remove(),l1I1I1II.remove(),I1111I1l&&I1111I1l.remove()},this.getId=function(){return l1l111ll1},this.text=function(){return l1l11111.attr("text")},this.attr=function(I1l111ll){I1l111ll&&I1l111ll.path&&l1I1I1II.attr(I1l111ll.path),I1l111ll&&I1l111ll.arrow&&I1111I1l.attr(I1l111ll.arrow)}},I1I1I11l.props=function(l1l111l1,l1I1I111){},I1I1I11l.editors={textEditor:function(){}},I1I1I11l.RaphaelObj=null,I1I1I11l.init=function(I1I111Il,l1l1l111){var I1I11II1I,l1lllllI=($(window).width(),$(window).height(),{}),I1l1ll11I={};if(I1I1I11l.RaphaelObj&&(I1I1I11l.RaphaelObj.clear(),I1I1I11l.RaphaelObj=null),I1I11II1I=Raphael(I1I111Il,l1l1l111.width,l1l1l111.height),I1I1I11l.RaphaelObj=I1I11II1I,$.extend(!0,I1I1I11l.config,l1l1l111),$(I1I11II1I).data("mod","point"),l1l1l111.restore){var I1l1111ll=l1l1l111.restore,l1lll1llI={};if(I1l1111ll.states){new Date;for(var I1I1I1I1 in I1l1111ll.states){var I1111l1I=(new Date,$.extend(!0,{},I1I1I11l.config.tools.states[I1l1111ll.states[I1I1I1I1].type],I1l1111ll.states[I1I1I1I1])),l1l1111I=new I1I1I11l.rect(I1111l1I,I1I11II1I);new Date;l1lll1llI[I1I1I1I1]=l1l1111I,l1lllllI[l1l1111I.getId()]=l1l1111I;new Date}new Date}if(I1l1111ll.paths){new Date;for(var I1I1I1I1 in I1l1111ll.paths){var I1II111Il=$.extend(!0,{},I1I1I11l.config.tools.path,I1l1111ll.paths[I1I1I1I1]),I1II1IIIl=new I1I1I11l.path(I1II111Il,I1I11II1I,l1lll1llI[I1l1111ll.paths[I1I1I1I1].from],l1lll1llI[I1l1111ll.paths[I1I1I1I1].to]);I1II1IIIl.restore(I1l1111ll.paths[I1I1I1I1])}new Date}}var l11l1lll=I1I1I11l.config.historyRects,I111I11l=I1I1I11l.config.activeRects;if(l11l1lll.rects.length||I111I11l.rects.length){var l1lll1llI={};for(var I1llll11 in I1l1ll11I)l1lll1llI[I1l1ll11I[I1llll11].from().text()]||(l1lll1llI[I1l1ll11I[I1llll11].from().text()]={rect:I1l1ll11I[I1llll11].from(),paths:{}}),l1lll1llI[I1l1ll11I[I1llll11].from().text()].paths[I1l1ll11I[I1llll11].text()]=I1l1ll11I[I1llll11],l1lll1llI[I1l1ll11I[I1llll11].to().text()]||(l1lll1llI[I1l1ll11I[I1llll11].to().text()]={rect:I1l1ll11I[I1llll11].to(),paths:{}});for(var l1IIIII11=0;l1IIIII11<l11l1lll.rects.length;l1IIIII11++){l1lll1llI[l11l1lll.rects[l1IIIII11].name]&&l1lll1llI[l11l1lll.rects[l1IIIII11].name].rect.attr(l11l1lll.rectAttr);for(var I1I111III=0;I1I111III<l11l1lll.rects[l1IIIII11].paths.length;I1I111III++)l1lll1llI[l11l1lll.rects[l1IIIII11].name].paths[l11l1lll.rects[l1IIIII11].paths[I1I111III]]&&l1lll1llI[l11l1lll.rects[l1IIIII11].name].paths[l11l1lll.rects[l1IIIII11].paths[I1I111III]].attr(l11l1lll.pathAttr)}for(var l1IIIII11=0;l1IIIII11<I111I11l.rects.length;l1IIIII11++){l1lll1llI[I111I11l.rects[l1IIIII11].name]&&l1lll1llI[I111I11l.rects[l1IIIII11].name].rect.attr(I111I11l.rectAttr);for(var I1I111III=0;I1I111III<I111I11l.rects[l1IIIII11].paths.length;I1I111III++)l1lll1llI[I111I11l.rects[l1IIIII11].name].paths[I111I11l.rects[l1IIIII11].paths[I1I111III]]&&l1lll1llI[I111I11l.rects[l1IIIII11].name].paths[I111I11l.rects[l1IIIII11].paths[I1I111III]].attr(I111I11l.pathAttr)}}},$.fn.FlowUi=function(l1I111Il){return this.each(function(){I1I1I11l.init(this,l1I111Il)})},$.FlowUi=I1I1I11l}(),function(l1l111l1){var I1l1l11l=l1l111l1.FlowUi;oui.loadStartTime||(oui.loadStartTime=(new Date).getTime()),l1l111l1.extend(!0,I1l1l11l.config.tools.states,{start:{attr:{fill:"#73ae42",stroke:"",r:20},type:"start",name:{text:"<<start>>"},text:{text:"开始"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},end:{attr:{fill:"#b7b7b7",stroke:"",r:40},type:"end",name:{text:""},text:{fill:"#333"},img:{src:"img/16/end.png?_t="+oui.loadStartTime,width:30,height:30}},role:{attr:{fill:"#5990cf",stroke:"",r:40},type:"role",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},team:{attr:{fill:"#5990cf",stroke:"",r:40},type:"team",img:{src:"img/16/team.png?_t="+oui.loadStartTime,width:30,height:30}},post:{attr:{fill:"#5990cf",stroke:"",r:40},type:"post",img:{src:"img/16/post.png?_t="+oui.loadStartTime,width:30,height:30}},department:{attr:{fill:"#5990cf",stroke:"",r:40},type:"department",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},all:{attr:{fill:"#5990cf",stroke:"",r:40},type:"all",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},company:{attr:{fill:"#5990cf",stroke:"",r:40},type:"company",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},group:{attr:{fill:"#5990cf",stroke:"",r:40},type:"group",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},level:{attr:{fill:"#5990cf",stroke:"",r:40},type:"level",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},relativeRole:{attr:{fill:"#5990cf",stroke:"",r:40},type:"relativeRole",img:{src:"img/16/relative-role.png?_t="+oui.loadStartTime,width:30,height:30}},"end-cancel":{type:"end-cancel",name:{text:"<<end-cancel>>"},text:{text:"取消"},img:{src:"img/16/end_event_cancel.png?_t="+oui.loadStartTime,width:32,height:32}},"end-error":{type:"end-error",name:{text:"<<end-error>>"},text:{text:"错误"},img:{src:"img/16/end_event_error.png?_t="+oui.loadStartTime,width:32,height:32}},state:{type:"state",name:{text:"<<state>>"},text:{text:""},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:32,height:32}},fork:{type:"fork",name:{text:"<<fork>>"},text:{text:"分支"},img:{src:"img/16/gateway_parallel.png?_t="+oui.loadStartTime,width:32,height:32}},join:{type:"join",name:{text:"<<join>>"},text:{text:"合并"},img:{}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},decision:{type:"decision",name:{text:"<<decision>>"},text:{text:"决定"},img:{src:"img/16/gateway_parallel.png?_t="+oui.loadStartTime,width:32,height:32}}}),I1l1l11l.themes[1]={tools:{states:{start:{attr:{fill:"#73ae42",stroke:"",r:40},type:"start",name:{text:"<<start>>"},text:{text:"开始",fill:"#333"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},end:{attr:{fill:"#b7b7b7",stroke:"",r:40},type:"end",name:{text:""},text:{fill:"#333"},img:{src:"img/16/end.png?_t="+oui.loadStartTime,width:30,height:30}},split:{attr:{fill:"#B7B7B7",r:10,width:1,height:1},type:"split",name:{text:""},text:{text:"",fill:"#5990cf"},img:{}},join:{attr:{fill:"#B7B7B7","fill-opacity":1,"stroke-width":1,r:20,width:15,height:15},type:"join",name:{text:""},text:{text:"",fill:"#ffffff"},img:{}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},role:{attr:{fill:"#5990cf",stroke:"",r:40},type:"role",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},team:{attr:{fill:"#5990cf",stroke:"",r:40},type:"team",img:{src:"img/16/team.png?_t="+oui.loadStartTime,width:30,height:30}},department:{attr:{fill:"#5990cf",stroke:"",r:40},type:"department",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},post:{attr:{fill:"#5990cf",stroke:"",r:40},type:"post",img:{src:"img/16/post.png?_t="+oui.loadStartTime,width:30,height:30}},all:{attr:{fill:"#5990cf",stroke:"",r:40},type:"all",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},company:{attr:{fill:"#5990cf",stroke:"",r:40},type:"company",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},group:{attr:{fill:"#5990cf",stroke:"",r:40},type:"group",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},level:{attr:{fill:"#5990cf",stroke:"",r:40},type:"level",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},relativeRole:{attr:{fill:"#5990cf",stroke:"",r:40},type:"relativeRole",img:{src:"img/16/relative-role.png?_t="+oui.loadStartTime,width:30,height:30}}}},rect:{attr:{x:10,y:10,width:100,height:50,r:40,fill:"#5990cf",stroke:"","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"",fill:"#000000","font-size":13},margin:5,props:[],img:{}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#B7B7B7",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#5990cf",fill:"#5990cf","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new I1l1l11l.editors.textEditor;
}}}}},I1l1l11l.themes[2]={tools:{states:{start:{attr:{fill:"#f8f8f8",stroke:"#929292",r:0},type:"start",name:{text:"<<start>>"},text:{text:"开始",fill:"#1eb222"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty_b.png?_t="+oui.loadStartTime,width:30,height:30}}}},rect:{attr:{x:10,y:10,width:100,height:50,r:0,fill:"#f8f8f8",stroke:"#929292","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"",fill:"#5990cf","font-size":13},margin:5,props:[],img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#686868",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#959595",fill:"#959595","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new I1l1l11l.editors.textEditor}}}}}}(jQuery),function(I1l111l1){var I1I1I111={"package":"oui.flow","class":"FlowBiz",getFlowUi:function(){return I1l111l1},getFlowBiz:function(){return I1I1I111},getSuper:function(){return oui.flow.FlowCommon},initStart:function(I1l111l1){var I1l1l11l=this;I1l1l11l.ValidateConfig.failMode="tips";var l1l11ll1I=oui.getPageParam("formWorkFlowUrl");if(I1l1l11l.isEdit&&(I1l1l11l.design4Runtime="true"==oui.getParam("design4Runtime")?!0:!1,!I1l1l11l.design4Runtime)){var I1IIIIII=oui.loadUrl(l1l11ll1I,oui.SubContentType.subBody,!1,"<workflow-top","</workflow-top>");$(document.body).append(I1IIIIII)}I1l1l11l.getSuper().initStart.call(I1l1l11l,I1l111l1),I1l1l11l.setInterceptFuns(I1l1l11l.eventBefore2hideTipsOrActionSheetFunNames,function(I1l111l1){I1l1l11l.actionSheet&&!$.isEmptyObject(I1l1l11l.actionSheet)&&I1l1l11l.actionSheet.close()}),I1l1l11l.setInterceptFuns(I1l1l11l.eventBefore2validateFunNames,function(l1l111l1){I1l1l11l.updateWorkFlowProps();var I1l1l11I=I1l1l11l.validate();return I1l1l11I?void(I1l1l11l.actionSheet&&!$.isEmptyObject(I1l1l11l.actionSheet)&&I1l1l11l.actionSheet.close()):!1})},event2editProp:function(I1I111II){var I1I1I11l=this,l1I11II11=I1I1I11l.getFlowUi(),I1lllllI=$(I1I111II.el).attr("nodeId"),I1I1II11I=I1I1I11l.nodeIdMap[I1lllllI];I1I1I11l.nodeProps={node:I1I1II11I},I1I1I11l.updateNotifyFunBind();var I1l1111ll=l1I11II11.render("flow-tpl-nodeProps",!0),l1lll1ll1=[I1I1I11l.nodePropDialogActions[1],I1I1I11l.nodePropDialogActions[0]];return I1I1I11l.editPropDialog=oui.getTop().oui.showHTMLDialog({title:"节点属性",content:I1l1111ll,center:!1,nodeId:I1I1II11I.id,actions:l1lll1ll1}),oui.getTop().oui.parse(),I1I1I11l.updateNodePropOuiIds(),!1},event2cancelEditProp:function(){var I1l111lI=this;if(I1l111lI.actionSheet.hide(),I1l111lI.design4Runtime){var l1I1I111=oui.getCurrUrlDialog();l1I1I111&&l1I1I111.showFooter()}return!1},initEnd:function(){var l1I111II=this;l1I111II.getSuper().initEnd.call(this)},bindEvents:function(){},testflow4phone:function(){$(function(){$.cookie("client_open_id","",-1),$.cookie("client_open_id","3158D6C8AD085A7EEFFCC856C9D3718FC157E6120F187AE35697058C98477B32"),$("#go2flow").attr("href",oui)})},event2contextMenu:function(I1l111lI){var l1l1l11I=this,l1l11ll11=l1l1l11I.putContextMenu4event(I1l111lI),I1lllll1=l1l1l11I.nodeIdMap,l1I1II111=l1l11ll11.nodeId,l1l1111l1=(l1l1l11I.getFlowUi(),l1l1l11I.workflowTreeNode);l1l1111l1.states[l1I1II111],I1lllll1[l1I1II111].attr;if(!I1lllll1[l1I1II111].isEnd){if(l1l1l11I.design4Runtime){var l1III1III=oui.getCurrUrlDialog();l1III1III.hideFooter(),l1l1l11I.actionSheet=oui.showActionSheetDialog({content:l1l11ll11.content,cancel:function(){l1III1III.showFooter()}})}else l1l1l11I.actionSheet=oui.showActionSheetDialog({content:l1l11ll11.content});return!1}}};I1I1I111=$.extend(!0,{},I1I1I111.getSuper(),I1I1I111),oui.NS(I1I1I111["package"])[I1I1I111["class"]]=I1I1I111,I1I1I111.hideTips=function(I1l111lI){var I1l1l11I=I1l111lI.e,I1l11ll1I=$("#flow-ui-contextMenus");I1l11ll1I.length<=0||oui.isInDom(I1l1l11I.target,I1l11ll1I[0])}}(oui.flow.FlowUi),function(I1l111l1){oui.NS("oui.form");var I1I1I111=$.extend(!0,{prefix:"flow",bizParam:{},getBiz:function(){return this}},oui.form.Common);oui.form.FlowBiz4formDefine=I1I1I111,I1I1I111.saveWorkFlowSuccess=function(I1I111II,I1I1I11l,l1l11ll1l,l1lllll1){if(l1l11ll1l&&l1l11ll1l(msg),"save"==$(I1I1I11l.el).attr("saveType")){var l1l1ll111={moduleType:"formDefine",category:oui.getParam("category"),moduleBizPath:!0,_t:(new Date).getTime()};l1l1ll111.tipMsg="SAVE_SUCCESS";var I1l1111ll=I1I111II.workflowUrl,I1lll1lll=I1l1111ll+"&"+$.param(l1l1ll111);oui.go(I1lll1lll,{},!0)}},I1I1I111.saveWorkFlowError=function(I1I111II,I1l1l111){console.log("保存流程失败"),console.log(I1I111II),oui.alert(I1I111II)},I1I1I111.saveWorkFlow=function(I1I111Il){var I1l1l111=$("#flow-ui-workflow"),l1I11II1l=I1l1l111[0].contentWindow,I1lllll1=$(I1I111Il.el).attr("saveType");"save4test"==I1lllll1?(l1I11II1l.$("#flow-ui-bottomButtons").find("[oui-e-click=saveWorkFlow][saveType=save4test]").attr("saveWorkFlowCallbackBiz","window.parent.oui.form.FlowBiz4formDefine"),l1I11II1l.$("#flow-ui-bottomButtons").find("[oui-e-click=saveWorkFlow][saveType=save4test]").trigger("click")):(l1I11II1l.$("#flow-ui-bottomButtons").find("[oui-e-click=saveWorkFlow][saveType=save]").attr("saveWorkFlowCallbackBiz","window.parent.oui.form.FlowBiz4formDefine"),l1I11II1l.$("#flow-ui-bottomButtons").find("[oui-e-click=saveWorkFlow][saveType=save]").trigger("click"))},I1I1I111.Events={click:"click"},I1I1I111.init=function(I1l111lI){var l1l1l11l=this;l1l1l11l.isTest=oui.getParam("isTest"),template.helper("FlowBiz4formDefine",l1l1l11l);var l1l11ll1I=oui.getParam("tipMsg");l1l11ll1I&&oui.showAutoTips("SAVE_SUCCESS"==l1l11ll1I?"保存成功":l1l11ll1I),l1l1l11l.flowId=I1l111lI.flowId,l1l1l11l.flowJson=I1l111lI.flowJson||"",I1l111l1.FlowBizModuleController="oui.form.FlowBiz4formDefine"},I1I1I111.getWorkFlowJson=function(){var I1l111l1=this;return I1l111l1.flowJson},I1I1I111.getWorkFlowJson4String=function(){var I1I111Il=this;return oui.parseString(I1I111Il.flowJson)},I1I1I111.getWorkFlowFromServer=function(I1I111Il,l1I1I11l){var l1I11II1l=(oui.getParam("moduleId"),oui.getContextPath(),oui.getPageParam("formWorkFlowUrl"));oui.getData(l1I11II1l,{},function(I1l111l1){if(I1l111l1.success){var l1I1I11I=oui.parseJson(I1l111l1.msg);I1I111Il&&I1I111Il(l1I1I11I.workFlowJSON)}else l1I1I11l&&l1I1I11l(l1I1I11I)})};var l1I11II1l={moduleId:oui.getParam("moduleId"),moduleType:"formDefine",name:oui.storage.get("formName4workflow")};oui.setPageParam("workFlowJson",l1I11II1l)}(window);








