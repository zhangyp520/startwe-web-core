
!function(I1I111Il){var l1I1I11I=I1I111Il._jsns_=I1I111Il._jsns_||{};I1I111Il._jsns_.Ns_Data={};var I1I11II1l=new Date,I1llllll=I1I11II1l.getFullYear()+""+(I1I11II1l.getMonth()+1)+I1I11II1l.getDate()+I1I11II1l.getHours(),l1l1ll11I=I1I111Il.__jsclazz_=I1I111Il.__jsclazz_||{};I1I111Il.__jsclazz_.Clz_Data={};var I1l1111lI={};try{I1l1111lI=I1I111Il.parent}catch(I1III1II1){I1l1111lI={}}var l1I1I1II=function(l1l111lI){if(l1I1I11I.Ns_Data[l1l111lI])return l1I1I11I.Ns_Data[l1l111lI];for(var I1l11ll1I=l1l111lI.split("."),l1lllllI=I1I111Il,I1l1ll11l=0;I1l1ll11l<I1l11ll1I.length;I1l1ll11l++){var l1I1111I1=I1l11ll1I[I1l1ll11l];l1lllllI[l1I1111I1]||(l1lllllI[l1I1111I1]={}),l1lllllI=l1lllllI[l1I1111I1]}var I1III1IIl=l1lllllI;return I1III1IIl.NAME=l1l111lI,l1I1I11I.Ns_Data[l1l111lI]=I1III1IIl},I1111l1I=function(){if(oui_context&&oui_context.contextPath)return oui_context.contextPath;var I1l111lI=document.location.pathname,l1l1l11I=I1l111lI.substr(1).indexOf("/"),I1l11ll1I=I1l111lI.substr(0,l1l1l11I+1)+"/";return oui_context||(oui_context={}),oui_context.contextPath=I1l11ll1I,I1l11ll1I};l1I1I1II("oui_context"),"undefined"==typeof I1I111Il.oui_context.bizPackage&&(I1I111Il.oui_context.bizPackage="oui"),I1111l1I();var l1I1111I=l1I1I1II(I1I111Il.oui_context.bizPackage);l1I1111I.loadStartTime=I1llllll,I1I111Il._tool_pkg_=l1I1111I,I1I111Il._tool_pkg_._map_={},I1I111Il._tool_pkg_.set=function(I1l111lI,I1l1l11I){if("string"==typeof I1l111lI)return void(I1I111Il._tool_pkg_._map_[I1l111lI]=I1l1l11I);if("object"==typeof I1l111lI&&"undefined"==typeof I1l1l11I)for(var I1I11II1l in I1l111lI)I1I111Il._tool_pkg_._map_[I1I11II1l]=I1l111lI[I1I11II1l]},I1I111Il._tool_pkg_.set({contextPath:I1I111Il.oui_context.contextPath||"",bizPackage:I1I111Il.oui_context.bizPackage||"oui",prefix:I1I111Il.oui_context.prefix||"oui-",controlPrefix:I1I111Il.oui_context.controlPrefix||"oui-c-",eventPrefix:I1I111Il.oui_context.eventPrefix||"oui-e-",validatePrefix:I1I111Il.oui_context.validatePrefix||"oui-v-",beforePrifix:I1I111Il.oui_context.beforePrifix||"oui-c-before-",afterPrifix:I1I111Il.oui_context.afterPrifix||"oui-c-after-"}),I1I111Il._tool_pkg_.get=function(l1l111lI){return I1I111Il._tool_pkg_._map_[l1l111lI]},I1I111Il._tool_pkg_.getCtxMap=function(){return I1I111Il._tool_pkg_._map_};var I1ll111l1=function(I1I111II){return"undefined"!=typeof I1I111Il._tool_pkg_[I1I111II]?(alert("已经定义了全局api:"+I1I111II+",请检测代码"+I1I111Il._tool_pkg_.NAME+".reg()调用,定义的同名api;或者检测手动写"+I1I111Il._tool_pkg_.NAME+"."+I1I111II+"=**的代码"),!0):!1};I1I111Il._tool_pkg_.reg=function(l1l111l1,I1I1I111){if("string"==typeof l1l111l1){if("undefined"==typeof I1I1I111)return void alert("不能注册未定义的函数到全局api上");if(I1ll111l1(l1l111l1))return;return void(this[l1l111l1]=I1I1I111)}if("object"==typeof l1l111l1&&"undefined"==typeof I1I1I111)for(var l1l11ll1l in l1l111l1)I1ll111l1(l1l11ll1l)||(this[l1l11ll1l]=l1l111l1[l1l11ll1l])},l1I1111I.NS=l1I1I1II,l1I1111I.Class=function(l1l111lI){var l1I1I11I=l1l111lI.pkg||l1l111lI["package"],l1I11II11=l1l111lI.clazzName||l1l111lI["class"],l1IIIII1=l1I1I1II(l1I1I11I);if(1==l1l111lI.use_par_def)try{var I1I1111I1=I1l1111lI._jsns_[l1I1I11I];I1I1111I1&&I1l1111lI.__jsclazz_.Clz_Data[l1I1I11I+"."+l1I11II11]&&(l1IIIII1[l1I11II11]=I1I1111I1),l1l1ll11I.Clz_Data[l1I1I11I+"."+l1I11II11]=I1I1111I1}catch(l1lll1ll1){}if(l1l1ll11I.Clz_Data[l1I1I11I+"."+l1I11II11])return l1l1ll11I.Clz_Data[l1I1I11I+"."+l1I11II11];var l1l1l1l1=l1l111lI.Cons,I1111l11=l1l111lI.Stat||{},I1I1111I=l1l111lI.Publ||{},l1ll111l1=l1l111lI.Priv||{},l1II1III1=l1IIIII1[l1I11II11]=function(){for(var l1l111ll in this._priv)this._priv[l1l111ll]&&this._priv[l1l111ll].constructor&&this._priv[l1l111ll].constructor.Package&&this!==this._priv?this[l1l111ll]=I1I111Il._tool_pkg_.newObject(this._priv[l1l111ll].constructor,this._priv[l1l111ll]):this[l1l111ll]=this._priv[l1l111ll];this._const.apply(this,arguments)};l1II1III1.prototype=I1I1111I,l1II1III1.prototype._priv=l1ll111l1,l1II1III1.prototype._const=l1l1l1l1||function(l1l111l1){for(var l1I1I11l in l1l111l1)this[l1I1I11l]=l1l111l1[l1I1I11l]};for(var I11I1II1 in I1111l11)l1II1III1[I11I1II1]=I1111l11[I11I1II1];return l1II1III1.Package=l1I1I11I,l1II1III1.ClazzName=l1I11II11,l1II1III1.FullName=l1I1I11I+"."+l1I11II11,l1II1III1.FULLNAME=l1II1III1.FullName,l1II1III1.CLASSNAME=l1I11II11,l1II1III1.PACKAGE=l1I1I11I,l1II1III1.prototype.constructor=l1II1III1,l1l1ll11I.Clz_Data[l1I1I11I+"."+l1I11II11]=l1II1III1}}(window),function(I1l111ll,l1l1l111){var I1l11ll11={};try{I1l11ll11=I1l111ll.parent}catch(I1llllll){I1l11ll11={}}var l1l1ll111=function(l1l111lI,I1I11II11){try{if(l1l111lI.scop===I1I11II11)for(var I1lllll1 in I1I11II11)I1I11II11[I1lllll1]===l1l111lI&&(I1I11II11[I1lllll1]=l1l1l111,delete I1I11II11[I1lllll1])}catch(l1l1ll111){}for(var I1lllll1 in l1l111lI)delete l1l111lI[I1lllll1]},l1l1111l1=function(l1l111l1){var l1I1I11l=I1III1III(l1l111l1.constructor,l1l111l1);return l1I1I11l},I1III1III=function(l1I111II,I1l1l11l){var I1I11II1I=new I1l111ll._tool_pkg_.Object({});if("object"==typeof I1l1l11l){if(I1l1l11l instanceof Array){I1I11II1I=new I1l111ll._tool_pkg_.Array([]);for(var I1llllll=0,I1I1II11l=I1l1l11l.length;I1I1II11l>I1llllll;I1llllll++)"_const"!=I1llllll&&"_priv"!=I1llllll&&("object"==typeof I1l1l11l[I1llllll]&&I1l1l11l[I1llllll].constructor&&(I1l1l11l[I1llllll].constructor.Package||I1l1l11l[I1llllll]instanceof Array)?I1l1l11l[I1llllll]instanceof Array?I1I11II1I[I1llllll]=I1III1III(I1l111ll._tool_pkg_.Array,I1l1l11l[I1llllll]):I1I11II1I[I1llllll]=I1III1III(I1l1l11l[I1llllll].constructor,I1l1l11l[I1llllll]):I1I11II1I[I1llllll]=I1l1l11l[I1llllll])}else for(var I1llllll in I1l1l11l)"_const"!=I1llllll&&"_priv"!=I1llllll&&("object"==typeof I1l1l11l[I1llllll]&&I1l1l11l[I1llllll].constructor&&(I1l1l11l[I1llllll].constructor.Package||I1l1l11l[I1llllll]instanceof Array)?I1l1l11l[I1llllll]instanceof Array?I1I11II1I[I1llllll]=I1III1III(I1l111ll._tool_pkg_.Array,I1l1l11l[I1llllll]):I1I11II1I[I1llllll]=I1III1III(I1l1l11l[I1llllll].constructor,I1l1l11l[I1llllll]):I1I11II1I[I1llllll]=I1l1l11l[I1llllll]);return I1I11II1I}return I1l1l11l&&"number"==typeof I1l1l11l?I1I11II1I=I1l1l11l:I1l1l11l&&"string"==typeof I1l1l11l?I1I11II1I=I1l1l11l:I1l1l11l&&"boolean"==typeof I1l1l11l?I1I11II1I=I1l1l11l:I1l1l11l&&"undefined"==typeof I1l1l11l?I1I11II1I=I1l1l11l:I1l1l11l&&"function"==typeof I1l1l11l?I1I11II1I=I1l1l11l:l1I111II?new l1I111II:I1l1l11l},I1I1I1I1=function(I1I111I1,l1l1l11l){if("undefined"==typeof I1I111I1)return{};var I1l11ll11=l1l1l11l.Stat||{},I1llllll=l1l1l11l.Priv||{};for(var I1I1II11l in I1llllll)I1I111I1.prototype._priv[I1I1II11l]?I1l111ll._tool_pkg_.Tool.log("extend class["+I1I111I1.FullName+"] object property or function ["+I1I1II11l+"] has defined!!!"):I1I111I1.prototype._priv[I1I1II11l]=I1llllll[I1I1II11l];for(var I1I1II11l in I1l11ll11)"undefined"==typeof I1I111I1[I1I1II11l]||"buildClass"===I1I1II11l?I1I111I1[I1I1II11l]=I1l11ll11[I1I1II11l]:I1l111ll._tool_pkg_.Tool.log("extend class["+I1I111I1.FullName+"] static property or function ["+I1I1II11l+"] has defined!!!");return I1I111I1},I1111I1l=function(I1l111l1){var I1l1l111=I1l111ll._tool_pkg_.Class({pkg:I1l111l1["package"]||I1l111l1.pkg,clazzName:I1l111l1["class"]||I1l111l1.clazzName});return I1l111ll._tool_pkg_.Extend(I1l1l111,{Stat:I1l111l1})};I1l111ll._tool_pkg_.Extend=I1I1I1I1,I1l111ll._tool_pkg_.Clear=l1l1ll111,I1l111ll._tool_pkg_.cloneObject=l1l1111l1,I1l111ll._tool_pkg_.newObject=I1III1III,I1l111ll._tool_pkg_.createClass=I1111I1l}(window),function(I1l111l1){I1l111l1._tool_pkg_.Class({pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Tool",Stat:{contextPath:I1l111l1.oui_context?I1l111l1.oui_context.contextPath:"",creating:{},debug:!1,PACKAGE_PREFIX:null,log:function(l1I111I1){var I1I1I11l=I1l111l1._tool_pkg_.Tool;1==I1I1I11l.debug&&("string"==typeof l1I111I1&&(l1I111I1={type:"info",msg:l1I111I1,write:function(){alert(this.msg)}}),"undefined"!=typeof l1I111I1&&("undefined"==typeof l1I111I1.msg&&(l1I111I1.msg=""),"undefined"==typeof l1I111I1.type&&(l1I111I1.type="info"),"function"!=typeof l1I111I1.write&&(l1I111I1.write=function(){alert(this.msg)}),l1I111I1.write()))},Class:function(l1I1I111){if(1==I1l111l1._tool_pkg_.Tool.creating[l1I1I111.pkg+"."+l1I1I111.clazzName])return void alert("class ["+(l1I1I111.pkg||l1I1I111["package"])+"."+(l1I1I111.clazzName||l1I1I111["class"])+"] has defined !!!");var I1I11II1l=I1l111l1._tool_pkg_.Class(l1I1I111);return I1l111l1._tool_pkg_.Tool.creating[(l1I1I111.pkg||l1I1I111["package"])+"."+(l1I1I111.clazzName||l1I1I111["class"])]=!0,I1I11II1l},Extend:function(I1I111II,l1I1I11l){return I1l111l1._tool_pkg_.Extend(I1I111II,l1I1I11l)},createClass:function(I1l111ll){return I1l111l1._tool_pkg_.createClass(I1l111ll)},getFullPath:function(I1I111Il,l1I1I11l){var I1I11II1I;return I1I11II1I=I1I111Il.indexOf("http")>=0||I1I111Il.indexOf("https")>=0?I1I111Il:"undefined"!=typeof l1I1I11l?l1I1I11l+I1I111Il:I1l111l1._tool_pkg_.Tool.contextPath+I1I111Il}}}),I1l111l1._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Object",Cons:function(I1l111ll){if(I1l111ll)for(var I1l1l11I in I1l111ll)this[I1l1l11I]=I1l111ll[I1l1l11I]}}),I1l111l1._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Array",Cons:function(l1l111ll){if(this.__arr=new Array,this.__arr.constructor=Array,l1l111ll){for(var l1l1l11l=0,l1l11ll11=l1l111ll.length;l1l11ll11>l1l1l11l;l1l1l11l++)this.__arr.push(I1l111l1._tool_pkg_.newObject(l1l111ll[l1l1l11l].constructor,l1l111ll[l1l1l11l]));this.length=l1l111ll.length}},Stat:{},Publ:{},Priv:{getArray:function(){return this.__arr},getLength:function(){return this.length}}}),I1l111l1._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Runner",Cons:function(I1I111Il){for(var I1I1I11I in I1I111Il)this[I1I1I11I]=I1I111Il[I1I1I11I]},Priv:{isClose:!1,thread:null,time:1,run:function(){},init:function(){},onStop:function(){},start:function(){if(this.isClose=!1,this.init(),null==this.thread){var I1I111II=this;this.thread=window.setInterval(function(){I1I111II.update()},this.time)}},stop:function(){this.isClose=!0,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.onStop())},update:function(l1I111I1){this.run(),0!=this.isClose&&1==this.isClose&&this.stop()}}}),I1l111l1._tool_pkg_.Tool.Class({use_par_def:!1,pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Queue",Cons:function(I1l111ll){for(var I1l1l11l in I1l111ll)this[I1l1l11l]=I1l111ll[I1l1l11l]},Stat:{queue:null,queues:[],createNewQueue:function(){var I1I111II=new I1l111l1._tool_pkg_.Queue({queues:[],id:I1l111l1._tool_pkg_.Queue.queues.length});return I1l111l1._tool_pkg_.Queue.queues.push(I1I111II),I1I111II},getQueue:function(){return null==I1l111l1._tool_pkg_.Queue.queue&&(I1l111l1._tool_pkg_.Queue.queue=new I1l111l1._tool_pkg_.Queue({queues:[]})),I1l111l1._tool_pkg_.Queue.queue}},Publ:{},Priv:{queues:[],add:function(l1I111Il){if(!l1I111Il)return this;if(!l1I111Il.run)return this;var l1l1l11I=this,I1l11ll1l={inited:!1,created:!1,run:l1I111Il.run||function(){},runFirst:function(){if(1==this.created)return this;this.created=!0;try{this.run()}catch(l1l111ll){this.inited=!0}return this},id:l1l1l11I.queues.length};for(var I1lllll1 in l1I111Il)"run"!=I1lllll1&&(I1l11ll1l[I1lllll1]=l1I111Il[I1lllll1]);return l1l1l11I.queues.push(I1l11ll1l),l1l1l11I},addAll:function(I1I111Il){for(var I1l1l11I=I1I111Il.length,l1l11ll1I=0;I1l1l11I>l1l11ll1I;l1l11ll1I++)this.add(I1I111Il[l1l11ll1I]);return this},runQueue:function(l1I111Il){var l1l1l11l=this;return null==l1l1l11l.queues||0==l1l1l11l.queues.length?void l1l1l11l.callback():void I1l111l1.setTimeout(function(){var I1I111I1=l1l1l11l.queues.shift();null!=I1I111I1&&(I1I111I1.runFirst(),l1l1l11l.runQueue(l1I111Il))},null==l1l1l11l.queues[0].time?l1I111Il||10:l1l1l11l.queues[0].time)},runAuto:function(l1l111l1,I1I1I11I){var I1l11ll11=this,l1lllllI=I1l11ll11.queues.length;0>=l1lllllI||(I1l11ll11.callback=l1l111l1,I1l11ll11.runQueue(I1I1I11I))},start:function(l1I111I1,I1l1l11I){var I1l11ll11=this,l1IIIIIl=new I1l111l1._tool_pkg_.Runner({time:I1l1l11I||10,startTime:new Date,idx:0,queue:I1l11ll11,callback:l1I111I1||function(){},onStop:function(){l1IIIIIl.callback(),this.queue.queues.length=0,I1l111l1._tool_pkg_.Clear(l1IIIIIl),l1IIIIIl=void 0},run:function(){return"undefined"==typeof this.queue?void this.stop():(this.queue.idx=this.idx,"undefined"==typeof this.queue.queues||this.idx>=this.queue.queues.length?void this.stop():void(1==this.queue.queues[this.idx].runFirst().inited&&this.idx++))}});return l1IIIIIl.start(),this}}}),I1l111l1._tool_pkg_.Tool.Class({use_par_def:!0,pkg:I1l111l1._tool_pkg_.NAME,clazzName:"Data",Stat:{objs:[]}})}(window),function(win){function getBrowser(l1I111I1){function l1I1I11l(l1l111l1,I1l1l11l){return l1l111l1=(""+l1l111l1).replace(/_/g,"."),I1l1l11l=I1l1l11l||1,l1l111l1=String(l1l111l1).split("."),l1l111l1=l1l111l1[0]+"."+(l1l111l1[1]||"0"),l1l111l1=Number(l1l111l1).toFixed(I1l1l11l)}function l1I11II11(I1l111lI,l1l1l11I){l1I1I1Il=I1l111lI,I1111l1l=l1l1l11I}function l1lllll1(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1}function l1l1ll11I(){var l1l111l1=-1;if("Microsoft Internet Explorer"==navigator.appName){var l1l1l11l=navigator.userAgent,l1I11II11=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=l1I11II11.exec(l1l1l11l)&&(l1l111l1=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var l1l1l11l=navigator.userAgent,l1I11II11=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=l1I11II11.exec(l1l1l11l)&&(l1l111l1=parseFloat(RegExp.$1))}return l1l111l1}var l1l1111ll,I1III1III=navigator.userAgent.toLowerCase(),l1I1I1Il="",I1111l1l=0;if((l1l1111ll=I1III1III.match(/msie ([\d.]+)/))?l1I11II11("ie",l1I1I11l(l1l1111ll[1])):(l1l1111ll=I1III1III.match(/firefox\/([\d.]+)/))?l1I11II11("firefox",l1I1I11l(l1l1111ll[1])):(l1l1111ll=I1III1III.match(/chrome\/([\d.]+)/))?l1I11II11("chrome",l1I1I11l(l1l1111ll[1])):(l1l1111ll=I1III1III.match(/opera.([\d.]+)/))?l1I11II11("opera",l1I1I11l(l1l1111ll[1])):(l1l1111ll=I1III1III.match(/version\/([\d.]+).*safari/))?l1I11II11("safari",l1I1I11l(l1l1111ll[1])):0,"ie"!=l1I1I1Il){var l1I11111=l1lllll1();l1I11111&&l1I11II11("ie",l1l1ll11I())}return I1III1III.indexOf("edge")>-1&&(oui.browser.edge=I1III1III.substring(I1III1III.indexOf("edge")+5),oui.browser.isEdge=!0),"n"==l1I111I1?l1I1I1Il:"v"==l1I111I1?I1111l1l:l1I1I1Il+I1111l1l}var __jsclazz_=win.__jsclazz_,_tool_pkg_=win._tool_pkg_,Clz_Data=win.__jsclazz_.Clz_Data,Tool=_tool_pkg_.Tool;_tool_pkg_.browser={},_tool_pkg_.browser[getBrowser("n")]=getBrowser("v"),Tool.Class({pkg:_tool_pkg_.NAME+".biz",clazzName:"Tool",Stat:{controllerFullName:"",controllerClz:"",getControllerClass:function(fullName){if("string"==typeof fullName&&fullName){var clz=_tool_pkg_.biz.Tool.getClass(fullName);if(clz)return clz;try{clz=eval(fullName)}catch(e){}return clz}if(_tool_pkg_.biz.Tool.controllerFullName&&_tool_pkg_.biz.Tool.controllerClz)return _tool_pkg_.biz.Tool.controllerClz;if(_tool_pkg_.biz.Tool.controllerFullName||(_tool_pkg_.biz.Tool.controllerFullName=$("body").attr(_tool_pkg_.get("prefix")+"controller"),_tool_pkg_.biz.Tool.controllerFullName||(_tool_pkg_.biz.Tool.controllerFullName="window")),"window"==_tool_pkg_.biz.Tool.controllerFullName)return _tool_pkg_.biz.Tool.controllerClz=window,window;var clz=_tool_pkg_.biz.Tool.getClass(_tool_pkg_.biz.Tool.controllerFullName);if(clz)return _tool_pkg_.biz.Tool.controllerClz=clz,clz;try{clz=eval(_tool_pkg_.biz.Tool.controllerFullName),_tool_pkg_.biz.Tool.controllerClz=clz}catch(e){}return clz},getClassAndFun:function(funName,cfg){var fun="";if(!funName)return{clz:"",fun:"",funName:""};if(funName.indexOf(".")>0){var lastIndex=funName.lastIndexOf("."),fullName=funName.substring(0,lastIndex);fun=funName.substring(lastIndex+1,funName.length);var clz=_tool_pkg_.biz.Tool.getClass(fullName);if(clz)return{clz:clz||"",fun:clz[fun]||"",funName:fun};try{clz=eval(fullName)}catch(e){return{clz:clz,fun:""}}return{clz:clz||"",fun:clz[fun]||"",funName:fun}}var clsFullName=$(cfg.el).closest("["+_tool_pkg_.get("prefix")+"controller]").attr(_tool_pkg_.get("prefix")+"controller"),clz=_tool_pkg_.biz.Tool.getControllerClass(clsFullName);return{clz:clz,fun:clz[funName]||"",funName:funName}},buildSuper:function(l1l111ll){"undefined"!=typeof l1l111ll.superClass&&l1l111ll.superClass&&(l1l111ll.getSuper=_tool_pkg_.biz.Tool.getSuper,l1l111ll.create=_tool_pkg_.biz.Tool.createObject)},getSuper:function(){return Clz_Data[this.superClass]},createObject:function(I1l111l1){var l1I1I111=this.getSuper().create(this);return l1I1I111._initObject(I1l111l1),l1I1I111},getUrlsByRefs:function(I1l111l1){I1l111l1=I1l111l1||[];for(var l1l1l11I=[],l1I11II1I=0,l1IIIIII=I1l111l1.length;l1IIIIII>l1I11II1I;l1I11II1I++)if("undefined"==typeof __jsclazz_.Clz_Data[I1l111l1[l1I11II1I]]){var I1I1II11l=_tool_pkg_.cfg.JsClassPath.get(I1l111l1[l1I11II1I]);"undefined"!=typeof I1I1II11l&&I1I1II11l||!(I1l111l1[l1I11II1I].lastIndexOf(".js")<0)?(I1I1II11l=I1I1II11l||I1l111l1[l1I11II1I],l1l1l11I.push(I1I1II11l)):alert("在"+_tool_pkg_.NAME+".cfg.JsClassPath中获取不到[js类:"+I1l111l1[l1I11II1I]+"的url配置]")}return l1l1l11I},crateOrUpdateClass:function(I1l111lI){var I1l1l11l=null;if("undefined"==typeof I1l111lI.refs)"undefined"==typeof I1l111lI.buildClass?(I1l1l11l=_tool_pkg_.biz.Tool.Class({"package":I1l111lI["package"],"class":I1l111lI["class"]}),_tool_pkg_.biz.Tool.createStatic(I1l1l11l,I1l111lI),_tool_pkg_.biz.Tool.buildSuper(I1l1l11l)):(I1l1l11l=I1l111lI.buildClass(),"undefined"!=typeof I1l1l11l&&I1l1l11l.FullName&&I1l1l11l.Package&&_tool_pkg_.biz.Tool.createStatic(I1l1l11l,I1l111lI)),I1l111lI=I1l1l11l;else{"string"==typeof I1l111lI.refs&&(I1l111lI.refs=I1l111lI.refs.split(","));var I1I11II1l=_tool_pkg_.biz.Tool.getUrlsByRefs(I1l111lI.refs);_tool_pkg_.biz.Tool.require(I1I11II1l,function(){"undefined"==typeof I1l111lI.buildClass?(I1l1l11l=_tool_pkg_.biz.Tool.Class({"package":I1l111lI["package"],"class":I1l111lI["class"]}),_tool_pkg_.biz.Tool.createStatic(I1l1l11l,I1l111lI),_tool_pkg_.biz.Tool.buildSuper(I1l1l11l)):(I1l1l11l=I1l111lI.buildClass(),"undefined"!=typeof I1l1l11l&&I1l1l11l.FullName&&I1l1l11l.Package&&_tool_pkg_.biz.Tool.createStatic(I1l1l11l,I1l111lI)),I1l111lI=I1l1l11l})}return I1l111lI},loadSortState:{},requireWithSort:function(I1I111II,I1I1I111){if("undefined"!=typeof I1I111II&&I1I111II?"string"==typeof I1I111II&&(I1I111II=I1I111II.split(",")):I1I111II=[],_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!1,0==I1I111II.length)return I1I1I111&&I1I1I111(),void(_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!0);for(var l1l11ll11=[],I1lllll1=0,I1l1ll11I=I1I111II.length;I1l1ll11I>I1lllll1;I1lllll1++)l1l11ll11[I1lllll1]={idx:I1lllll1,url:I1I111II[I1lllll1],lastUrl:I1lllll1>0?I1I111II[I1lllll1-1]:"",len:I1l1ll11I,run:function(){var I1I111Il=this,I1I1I11I=this.lastUrl;return I1I1I11I?void(I1I111Il.inter=window.setInterval(function(){"undefined"!=typeof _tool_pkg_.biz.Tool.Loader.loadStates[I1I111Il.lastUrl]&&(window.clearInterval(I1I111Il.inter),delete I1I111Il.inter,_tool_pkg_.biz.Tool.require([I1I111Il.url],function(){I1I111Il.callback()}))},1)):void _tool_pkg_.biz.Tool.require([I1I111Il.url],function(){I1I111Il.callback()})},callback:function(){this.idx==this.len-1?(I1I1I111&&I1I1I111(),_tool_pkg_.biz.Tool.loadSortState[I1I111II.join(",")]=!0):this.idx>=0&&l1l11ll11[this.idx+1].run()}};l1l11ll11[0].run()},loadedAll4config:function(I1l111l1){var l1I1I11l=_tool_pkg_.biz.Tool.loadSortState;for(var l1l11ll1l in l1I1I11l)if(l1I1I11l[l1l11ll1l]!==!0)return window.setTimeout(function(){_tool_pkg_.biz.Tool.loadedAll4config(I1l111l1)},10),!1;return I1l111l1&&I1l111l1(),!0},cssLoaderOver:!0,requireCssConfig:function(I1I111II){_tool_pkg_.biz.Tool.cssLoaderOver=!1;var l1l1l111=I1I111II.baseConfigUrl||"",I1I11II11=I1I111II.configUrls||[],l1llllll=I1I111II.callback;return l1l1l111?void _tool_pkg_.biz.Tool.require([l1l1l111],function(){_tool_pkg_.cfg.CssClassPath.init(),_tool_pkg_.biz.Tool.require(I1I11II11,function(){var I1I111I1=_tool_pkg_.cfg.CssClassPath.getRequireUrls(),I1I1I11I=I1I111I1.urls||[];_tool_pkg_.biz.Tool.require(I1I1I11I,function(){l1llllll&&l1llllll(),_tool_pkg_.biz.Tool.cssLoaderOver=!0})})}):(_tool_pkg_.cfg.CssClassPath.init(),void _tool_pkg_.biz.Tool.require(I1I11II11,function(){var l1l111lI=_tool_pkg_.cfg.CssClassPath.getRequireUrls(),I1l1l11I=l1l111lI.urls||[];_tool_pkg_.biz.Tool.require(I1l1l11I,function(){l1llllll&&l1llllll(),_tool_pkg_.biz.Tool.cssLoaderOver=!0})}))},requireConfig:function(I1l111ll){if(console.log("css is over:"+_tool_pkg_.biz.Tool.cssLoaderOver),0==_tool_pkg_.biz.Tool.cssLoaderOver)return void window.setTimeout(function(){_tool_pkg_.biz.Tool.requireConfig(I1l111ll)},10);var I1I1I11l=I1l111ll.baseConfigUrl||"",I1I11II1l=I1l111ll.configUrls||[],l1lllllI=I1l111ll.callback;return I1I1I11l?void _tool_pkg_.biz.Tool.require([I1I1I11l],function(){_tool_pkg_.cfg.JsClassPath.init(),_tool_pkg_.biz.Tool.require(I1I11II1l,function(){var I1l111lI=_tool_pkg_.cfg.JsClassPath.getRequireUrls(),I1I1I11I=I1l111lI.urls||[],I1l11ll1l=I1l111lI.pluginUrls||[];_tool_pkg_.biz.Tool.require(I1I1I11I,function(){_tool_pkg_.biz.Tool.require(I1l11ll1l,function(){_tool_pkg_.biz.Tool.loadedAll4config(l1lllllI)})})})}):(_tool_pkg_.cfg.JsClassPath.init(),void _tool_pkg_.biz.Tool.require(I1I11II1l,function(){var l1I111Il=_tool_pkg_.cfg.JsClassPath.getRequireUrls(),I1l1l11l=l1I111Il.urls||[],l1l11ll11=l1I111Il.pluginUrls||[];_tool_pkg_.biz.Tool.require(I1l1l11l,function(){_tool_pkg_.biz.Tool.require(l1l11ll11,function(){_tool_pkg_.biz.Tool.loadedAll4config(l1lllllI)})})}))},requiredData:{},getHasNotRequireUrls:function(I1I111Il){for(var I1l1l11l=_tool_pkg_.biz.Tool.requiredData,l1l11ll1l=[],I1lllllI=0,I1I1II11I=I1I111Il.length;I1I1II11I>I1lllllI;I1lllllI++)"undefined"==typeof I1l1l11l[I1I111Il[I1lllllI]]&&(I1l1l11l[I1I111Il[I1lllllI]]=!0,l1l11ll1l.push(I1I111Il[I1lllllI]));return l1l11ll1l},sortUrls:[],require:function(l1I111II,l1I1I111){var I1l11ll1l=_tool_pkg_.biz.Tool.getHasNotRequireUrls(l1I111II);_tool_pkg_.biz.Tool.concatSortUrls(I1l11ll1l),_tool_pkg_.biz.Tool.Loader.require(I1l11ll1l,l1I1I111)},concatSortUrls:function(l1I111I1){"undefined"!=typeof l1I111I1&&0!=l1I111I1.length&&(_tool_pkg_.biz.Tool.sortUrls=_tool_pkg_.biz.Tool.sortUrls.concat(l1I111I1))},Class:function(l1I111I1){return"undefined"==typeof l1I111I1.pkg&&(l1I111I1.pkg=l1I111I1["package"]),"undefined"==typeof l1I111I1.clazzName&&(l1I111I1.clazzName=l1I111I1["class"]),Tool.Class(l1I111I1),_tool_pkg_.biz.Tool.currentJsClass=__jsclazz_.Clz_Data[l1I111I1.pkg+"."+l1I111I1.clazzName],_tool_pkg_.biz.Tool.currentJsClass},getClass:function(l1I111Il){return __jsclazz_.Clz_Data[l1I111Il]},Clear:_tool_pkg_.Clear,PACKAGE_PREFIX:Tool.PACKAGE_PREFIX,isClassWithPackage:function(l1I111II){try{if("undefined"==typeof l1I111II||null==l1I111II)return!1;var l1l1l11l=_tool_pkg_.biz.Tool.PACKAGE_PREFIX;if("undefined"==typeof l1l1l11l)return alert("请技术经理配置coframe/tools/skins/common.jsp中"+Tool.FULLNAME+".PACKAGE_PREFIX 的值;构建包必须以该属性值为前缀,若存在多个请以英文逗号隔开"),!1;if(""==l1l1l11l||null==l1l1l11l)return alert("请技术经理配置coframe/tools/skins/common.jsp中"+Tool.FULLNAME+".PACKAGE_PREFIX 的值;构建包必须以该属性值为前缀,若存在多个请以英文逗号隔开"),!1;if("string"==typeof l1I111II["package"]&&l1I111II["package"].indexOf(l1l1l11l)>=0)return!0;if("string"==typeof l1I111II["package"]&&l1l1l11l.indexOf(",")>0)for(var I1I11II1l=l1l1l11l.split(","),l1IIIIII=I1I11II1l.length,l1I1II111=0;l1IIIIII>l1I1II111;l1I1II111++)if(l1I111II["package"].indexOf(I1I11II1l[l1I1II111])>=0)return!0}catch(I1I1111Il){}return!1},pache:{},loadPache:function(l1l111lI){var I1l1l11I=_tool_pkg_.biz.Tool.pache;for(var I1I11II1I in l1l111lI)I1l1l11I[I1I11II1I]=l1l111lI[I1I11II1I]},log:Tool.log,contextPath:Tool.contextPath,createStatic:function(I1l111ll,I1I1I11l){Tool.Extend(I1l111ll,{Stat:I1I1I11l})},NS:_tool_pkg_.NS,ThirdResPath:"statics/js/",evalPath:function(l1I111I1){var l1l1l111=Tool.getFullPath(l1I111I1.url);"undefined"==typeof l1I111I1.async&&(l1I111I1.async=!0),$.ajax({url:l1l1l111,data:_tool_pkg_.biz.Tool.encode(l1I111I1.data||{}),success:function(I1I111Il){var I1I1I11I=_tool_pkg_.biz.Tool.decode(I1I111Il);return null!=I1I1I11I.exception?void(l1I111I1.exception&&l1I111I1.exception(I1I1I11I)):void(l1I111I1.callBack?l1I111I1.callBack(I1I1I11I):l1I111I1.callback&&l1I111I1.callback(I1I1I11I))},error:l1I111I1.error||function(l1l111l1){_tool_pkg_.biz.Tool.log("网络连接异常:请求失败或者超时,"+_tool_pkg_.biz.Tool.encode(l1l111l1))},type:"POST",cache:!1,contentType:"text/json",dataType:"json",async:l1I111I1.async})},trim:function(I1l111l1){return(I1l111l1||"").replace(/^\s+|\s+$/g,"")}}}),Tool.Class({pkg:_tool_pkg_.NAME+".biz.Tool",clazzName:"Loader",Priv:{init:function(){this.over=!1,this.doc=document,this.IS_CSS_REG=/\.css(?:\?|$)/i,this.READY_STATE_REG=/^(?:loaded|complete|undefined)$/,this.isOldWebKit=1*window.navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")<536,this.currentlyAddingScript="",this.head=this.doc.getElementsByTagName("head")[0],this.baseElement=this.head.getElementsByTagName("base")[0],this.idx=-1},isFunction:function(I1I111Il){return"[object Function]"===Object.prototype.toString.call(I1I111Il)},pollCss:function(I1l111ll,I1I1I11I){var l1I11II1l=this,I1IIIII1=I1l111ll.sheet,l1l1ll11I=!1;if(l1I11II1l.isOldWebKit)I1IIIII1&&(l1l1ll11I=!0);else if(I1IIIII1)try{I1IIIII1.cssRules&&(l1l1ll11I=!0)}catch(I1I1111II){"NS_ERROR_DOM_SECURITY_ERR"===I1I1111II.name&&(l1l1ll11I=!0)}setTimeout(function(){if(l1l1ll11I){var I1l111l1=l1I11II1l.urls[parseInt(I1l111ll.getAttribute("load_js_idx"))];_tool_pkg_.biz.Tool.Loader.loadStates[I1l111l1]=!0,l1I11II1l.isFunction(I1I1I11I)&&I1I1I11I()}else l1I11II1l.pollCss(I1l111ll,I1I1I11I)},50)},addOnload:function(l1I111Il,l1I1I111,I1l11ll1I){var I1lllllI=this,l1I1II11I=I1l11ll1I&&(I1lllllI.isOldWebKit||!("onload"in l1I111Il));return l1I1II11I?void setTimeout(function(){I1lllllI.pollCss(l1I111Il,l1I1I111)},10):(l1I111Il.setAttribute("done","false"),void(l1I111Il.onload=l1I111Il.onerror=l1I111Il.onreadystatechange=function(){if(null!=I1lllllI.READY_STATE_REG&&"false"==l1I111Il.getAttribute("done")&&I1lllllI.READY_STATE_REG.test(l1I111Il.readyState)){var l1l111lI=I1lllllI.urls[parseInt(l1I111Il.getAttribute("load_js_idx"))];_tool_pkg_.biz.Tool.Loader.loadStates[l1l111lI]=!0,l1I111Il.setAttribute("done","true"),l1I111Il.onload=l1I111Il.onerror=l1I111Il.onreadystatechange=null,I1l11ll1I||I1lllllI.head.removeChild(l1I111Il),l1I111Il=null,I1lllllI.isFunction(l1I1I111)&&l1I1I111()}}))},use:function(l1l111lI,I1I1I11I,I1I11II1I){var I1IIIII1=this.IS_CSS_REG.test(l1l111lI),l1l1ll11l=this.doc.createElement(I1IIIII1?"link":"script");l1l1ll11l.setAttribute("load_js_idx",++this.idx),void 0!=I1I11II1I&&(l1l1ll11l.charset=I1I11II1I),this.addOnload(l1l1ll11l,function(){I1I1I11I(l1l1ll11l.getAttribute("load_js_idx"))},I1IIIII1),I1IIIII1?(l1l1ll11l.rel="stylesheet",l1l111lI&&l1l111lI.indexOf("?")>0?l1l1ll11l.href=l1l111lI+"&_t="+_tool_pkg_.loadStartTime:l1l1ll11l.href=l1l111lI+"?_t="+_tool_pkg_.loadStartTime):(l1l1ll11l.async=!0,l1l111lI&&l1l111lI.indexOf("?")>0?l1l1ll11l.src=l1l111lI+"&_t="+_tool_pkg_.loadStartTime:l1l1ll11l.src=l1l111lI+"?_t="+_tool_pkg_.loadStartTime),this.currentlyAddingScript=l1l1ll11l,this.baseElement?this.head.insertBefore(l1l1ll11l,this.baseElement):this.head.appendChild(l1l1ll11l),this.currentlyAddingScript=null}},Cons:function(l1l111lI){if(this.init(),l1l111lI)for(var l1l1l111 in l1l111lI)this[l1l1l111]=l1l111lI[l1l1l111]},Stat:{allLoaders:[],loadStates:{},callOver:function(){},clearLoaders:function(){for(var I1I111I1=_tool_pkg_.biz.Tool.Loader.allLoaders,l1I1I11l=0,l1l11ll11=I1I111I1.length;l1l11ll11>l1I1I11l;l1I1I11l++)_tool_pkg_.biz.Tool.Clear(I1I111I1[l1I1I11l]),I1I111I1[l1I1I11l]=null;I1I111I1.length=0},stoped:!1,onStop:function(){if(1!=_tool_pkg_.biz.Tool.Loader.stoped){_tool_pkg_.biz.Tool.Loader.stoped=!0,_tool_pkg_.biz.Tool.Loader.clearLoaders();var l1I111I1=_tool_pkg_.biz.Tool.Loader.callOver;return l1I111I1&&l1I111I1()}},hasStop:function(){for(var l1l111ll=_tool_pkg_.biz.Tool.Loader.allLoaders,l1I1I11I=l1l111ll.length,I1I11II1l=0;l1I1I11I>I1I11II1l;I1I11II1l++){if("undefined"==typeof l1l111ll[I1I11II1l].over)return!1;if(0==l1l111ll[I1I11II1l].over)return!1}return!0},require:function(l1l111ll,I1l1l11l){if(null==l1l111ll||0==l1l111ll.length)return I1l1l11l&&I1l1l11l();var l1I11II1I="";0==_tool_pkg_.biz.Tool.Loader.allLoaders.length?(_tool_pkg_.biz.Tool.Loader.stoped=!1,_tool_pkg_.biz.Tool.Loader.callOver=I1l1l11l,l1I11II1I=function(){1==_tool_pkg_.biz.Tool.Loader.hasStop()&&_tool_pkg_.biz.Tool.Loader.onStop()}):l1I11II1I=function(){I1l1l11l(),1==_tool_pkg_.biz.Tool.Loader.hasStop()&&_tool_pkg_.biz.Tool.Loader.onStop()};var l1lllll1=_tool_pkg_.biz.Tool.contextPath,I1l1ll111=new _tool_pkg_.biz.Tool.Loader;_tool_pkg_.biz.Tool.Loader.allLoaders.push(I1l1ll111),I1l1ll111.count=0,I1l1ll111.len=l1l111ll.length,I1l1ll111.currFun=l1I11II1I,I1l1ll111.urls=l1l111ll;for(var I1I1111Il=0,I1lll1ll1=l1l111ll.length;I1lll1ll1>I1I1111Il;I1I1111Il++){var I1l1l1lI=l1lllll1+l1l111ll[I1I1111Il];(0==l1l111ll[I1I1111Il].indexOf("http://")||0==l1l111ll[I1I1111Il].indexOf("https://"))&&(I1l1l1lI=l1l111ll[I1I1111Il]),I1l1ll111.use(I1l1l1lI,function(){I1l1ll111.count++,I1l1ll111.count==I1l1ll111.len?(I1l1ll111.over=!0,null!=I1l1ll111.currFun&&I1l1ll111.currFun()):I1l1ll111.over=!1},"utf-8")}}}})}(window),function(l1l111l1){var I1I1I11l=l1l111l1._tool_pkg_,l1I11II11={"package":I1I1I11l.NAME+".cfg","class":"JsClassPath",getCfgs:function(){return"undefined"!=typeof l1I11II11.cfgs&&l1I11II11.cfgs||l1I11II11.init(),l1I11II11.cfgs},get:function(l1I111Il){return l1I11II11.getCfgs()[l1I111Il]},requiredData:{},preRequireRefs:function(I1I111II){"string"==typeof I1I111II?I1I111II=I1I111II.split(","):I1I111II||(I1I111II=[]);for(var l1I1I11I=l1I11II11.requiredData,l1lllll1=0,I1l1ll11l=I1I111II.length;I1l1ll11l>l1lllll1;l1lllll1++)"undefined"==typeof l1I1I11I[I1I111II[l1lllll1]]&&(l1I1I11I[I1I111II[l1lllll1]]=!0,l1I11II11.preRequireRefs(l1I11II11.refs[I1I111II[l1lllll1]]||[]))},getRequireUrls:function(){var I1I111Il=l1I11II11.requires;l1I11II11.preRequireRefs(I1I111Il),l1I11II11.preRequireRefs(l1I11II11.requirePlugins);var I1I1I111=l1I11II11.requiredData,I1I11II1l=[],I1IIIIIl=l1I11II11.cfgs,l1l1ll11I=[];for(var l1I1111I1 in I1I1I111)"undefined"!=typeof I1IIIIIl[l1I1111I1]&&I1IIIIIl[l1I1111I1]?I1IIIIIl[l1I1111I1].lastIndexOf("Plugin.js")>0?l1l1ll11I.push(I1IIIIIl[l1I1111I1]):I1I11II1l.push(I1IIIIIl[l1I1111I1]):alert("请检查你的配置文件;没有配置["+l1I1111I1+" 的js路径]");return{urls:I1I11II1l,pluginUrls:l1l1ll11I}},createConfig:function(I1I111Il){if("undefined"!=typeof I1I111Il)for(var l1l1l11I in I1I111Il){if("undefined"!=typeof l1I11II11.cfgs[l1l1l11I])return void alert("你的资源配置文件中配置了重复别名:可能原因1:当前页面引入的资源配置文件中存在与公共资源中相同的别名:["+l1l1l11I+"]");l1I11II11.cfgs[l1l1l11I]=I1I111Il[l1l1l11I]}},createRefs:function(I1I111I1){if("undefined"!=typeof I1I111I1)for(var I1l1l111 in I1I111I1){if("undefined"!=typeof l1I11II11.refs[I1l1l111])return void alert("你的资源配置文件中配置了重复依赖:可能原因1:当前页面引入的资源配置文件中存在与公共资源依赖配置中相同的别名:["+I1l1l111+"]");l1I11II11.refs[I1l1l111]=I1I111I1[I1l1l111]}},imports:function(l1I111I1){if("undefined"!=typeof l1I111I1&&l1I111I1){"string"==typeof l1I11II11.requires?l1I11II11.requires=l1I11II11.requires.split(","):l1I11II11.requires||(l1I11II11.requires=[]),"string"==typeof l1I111I1&&(l1I111I1=l1I111I1.split(","));for(var I1I1I111=0,I1I11II11=l1I111I1.length;I1I11II11>I1I1I111;I1I1I111++)l1I11II11.requires.push(l1I111I1[I1I1I111])}},importPlugins:function(I1I111Il){if("undefined"!=typeof I1I111Il&&I1I111Il){"string"==typeof l1I11II11.requirePlugins?l1I11II11.requirePlugins=l1I11II11.requirePlugins.split(","):l1I11II11.requirePlugins||(l1I11II11.requirePlugins=[]),"string"==typeof I1I111Il&&(I1I111Il=I1I111Il.split(","));for(var I1l1l11I=0,l1l11ll11=I1I111Il.length;l1l11ll11>I1l1l11I;I1l1l11I++)l1I11II11.requirePlugins.push(I1I111Il[I1l1l11I])}},config:function(){l1I11II11.createConfig({}),l1I11II11.createRefs({}),l1I11II11.imports([]),l1I11II11.importPlugins([]);
},init:function(){l1I11II11.cfgs={},l1I11II11.refs={},l1I11II11.requires=[],l1I11II11.requirePlugins=[],l1I11II11.config()}};l1I11II11=I1I1I11l.biz.Tool.crateOrUpdateClass(l1I11II11)}(window),function(I1l111l1){var I1I1I111=I1l111l1._tool_pkg_,I1l11ll1l={"package":I1I1I111.NAME+".cfg","class":"CssClassPath",getCfgs:function(){return"undefined"!=typeof I1l11ll1l.cfgs&&I1l11ll1l.cfgs||I1l11ll1l.init(),I1l11ll1l.cfgs},get:function(I1l111l1){return I1l11ll1l.getCfgs()[I1l111l1]},requiredData:{},preRequireRefs:function(I1I111I1){"string"==typeof I1I111I1?I1I111I1=I1I111I1.split(","):I1I111I1||(I1I111I1=[]);for(var l1I1I11l=I1l11ll1l.requiredData,l1l11ll1l=0,l1llllll=I1I111I1.length;l1llllll>l1l11ll1l;l1l11ll1l++)"undefined"==typeof l1I1I11l[I1I111I1[l1l11ll1l]]&&(l1I1I11l[I1I111I1[l1l11ll1l]]=!0,I1l11ll1l.preRequireRefs(I1l11ll1l.refs[I1I111I1[l1l11ll1l]]||[]))},getRequireUrls:function(){var I1l111lI=I1l11ll1l.requires;I1l11ll1l.preRequireRefs(I1l111lI),I1l11ll1l.preRequireRefs(I1l11ll1l.requirePlugins);var I1l1l11l=I1l11ll1l.requiredData,I1I11II1l=[],I1IIIIIl=I1l11ll1l.cfgs,l1I1II11I=[];for(var I1l1111l1 in I1l1l11l)"undefined"!=typeof I1IIIIIl[I1l1111l1]&&I1IIIIIl[I1l1111l1]?I1IIIIIl[I1l1111l1].lastIndexOf("Plugin.js")>0?l1I1II11I.push(I1IIIIIl[I1l1111l1]):I1I11II1l.push(I1IIIIIl[I1l1111l1]):alert("请检查你的配置文件;没有配置["+I1l1111l1+" 的js路径]");return{urls:I1I11II1l,pluginUrls:l1I1II11I}},createConfig:function(l1I111Il){if("undefined"!=typeof l1I111Il)for(var l1I1I111 in l1I111Il){if("undefined"!=typeof I1l11ll1l.cfgs[l1I1I111])return void alert("你的资源配置文件中配置了重复别名:可能原因1:当前页面引入的资源配置文件中存在与公共资源中相同的别名:["+l1I1I111+"]");I1l11ll1l.cfgs[l1I1I111]=l1I111Il[l1I1I111]}},createRefs:function(I1I111II){if("undefined"!=typeof I1I111II)for(var l1l1l11I in I1I111II){if("undefined"!=typeof I1l11ll1l.refs[l1l1l11I])return void alert("你的资源配置文件中配置了重复依赖:可能原因1:当前页面引入的资源配置文件中存在与公共资源依赖配置中相同的别名:["+l1l1l11I+"]");I1l11ll1l.refs[l1l1l11I]=I1I111II[l1l1l11I]}},imports:function(I1l111ll){if("undefined"!=typeof I1l111ll&&I1l111ll){"string"==typeof I1l11ll1l.requires?I1l11ll1l.requires=I1l11ll1l.requires.split(","):I1l11ll1l.requires||(I1l11ll1l.requires=[]),"string"==typeof I1l111ll&&(I1l111ll=I1l111ll.split(","));for(var I1l1l11l=0,l1I11II11=I1l111ll.length;l1I11II11>I1l1l11l;I1l1l11l++)I1l11ll1l.requires.push(I1l111ll[I1l1l11l])}},importPlugins:function(I1l111lI){if("undefined"!=typeof I1l111lI&&I1l111lI){"string"==typeof I1l11ll1l.requirePlugins?I1l11ll1l.requirePlugins=I1l11ll1l.requirePlugins.split(","):I1l11ll1l.requirePlugins||(I1l11ll1l.requirePlugins=[]),"string"==typeof I1l111lI&&(I1l111lI=I1l111lI.split(","));for(var I1I1I111=0,I1I11II11=I1l111lI.length;I1I11II11>I1I1I111;I1I1I111++)I1l11ll1l.requirePlugins.push(I1l111lI[I1I1I111])}},config:function(){I1l11ll1l.createConfig({}),I1l11ll1l.createRefs({}),I1l11ll1l.imports([]),I1l11ll1l.importPlugins([])},init:function(){I1l11ll1l.cfgs={},I1l11ll1l.refs={},I1l11ll1l.requires=[],I1l11ll1l.requirePlugins=[],I1l11ll1l.config()}};I1l11ll1l=I1I1I111.biz.Tool.crateOrUpdateClass(I1l11ll1l)}(window),function(win){var _tool_pkg_=win._tool_pkg_;_tool_pkg_.biz.Tool.JSON=new function(){var sb=[],_dateFormat=null,useHasOwn=!!{}.hasOwnProperty,replaceString=function(I1l111l1,l1l1l111){var l1l11ll1l=m[l1l1l111];return l1l11ll1l?l1l11ll1l:(l1l11ll1l=l1l1l111.charCodeAt(),"\\u00"+Math.floor(l1l11ll1l/16).toString(16)+(l1l11ll1l%16).toString(16))},doEncode=function(l1l111l1,l1I1I11l){if(null===l1l111l1)return void(sb[sb.length]="null");var l1I11II1l=typeof l1l111l1;if("undefined"==l1I11II1l)return void(sb[sb.length]="null");if(l1l111l1.push){sb[sb.length]="[";var l1llllll,I1l1ll11I,I1l1111l1,I1III1II1=l1l111l1.length;for(I1l1ll11I=0;I1III1II1>I1l1ll11I;I1l1ll11I+=1)I1l1111l1=l1l111l1[I1l1ll11I],l1I11II1l=typeof I1l1111l1,"undefined"==l1I11II1l||"function"==l1I11II1l||"unknown"==l1I11II1l||(l1llllll&&(sb[sb.length]=","),doEncode(I1l1111l1),l1llllll=!0);return void(sb[sb.length]="]")}{if(!l1l111l1.getFullYear){if("string"==l1I11II1l)return strReg1.test(l1l111l1)?(sb[sb.length]='"',sb[sb.length]=l1l111l1.replace(strReg2,replaceString),void(sb[sb.length]='"')):void(sb[sb.length]='"'+l1l111l1+'"');if("number"==l1I11II1l)return void(sb[sb.length]=l1l111l1);if("boolean"==l1I11II1l)return void(sb[sb.length]=String(l1l111l1));sb[sb.length]="{";var l1llllll,I1l1ll11I,I1l1111l1;for(I1l1ll11I in l1l111l1)(!useHasOwn||Object.prototype.hasOwnProperty.call(l1l111l1,I1l1ll11I))&&(I1l1111l1=l1l111l1[I1l1ll11I],l1I11II1l=typeof I1l1111l1,"undefined"==l1I11II1l||"function"==l1I11II1l||"unknown"==l1I11II1l||(l1llllll&&(sb[sb.length]=","),doEncode(I1l1ll11I),sb[sb.length]=":",doEncode(I1l1111l1,I1l1ll11I),l1llllll=!0));return void(sb[sb.length]="}")}if(_dateFormat)sb[sb.length]='"',"function"==typeof _dateFormat?sb[sb.length]=_dateFormat(l1l111l1,l1I1I11l):sb[sb.length]=_tool_pkg_.biz.Tool.formatDate(l1l111l1,_dateFormat),sb[sb.length]='"';else{var l1l1l1ll;sb[sb.length]='"',sb[sb.length]=l1l111l1.getFullYear(),sb[sb.length]="-",l1l1l1ll=l1l111l1.getMonth()+1,sb[sb.length]=10>l1l1l1ll?"0"+l1l1l1ll:l1l1l1ll,sb[sb.length]="-",l1l1l1ll=l1l111l1.getDate(),sb[sb.length]=10>l1l1l1ll?"0"+l1l1l1ll:l1l1l1ll,sb[sb.length]="T",l1l1l1ll=l1l111l1.getHours(),sb[sb.length]=10>l1l1l1ll?"0"+l1l1l1ll:l1l1l1ll,sb[sb.length]=":",l1l1l1ll=l1l111l1.getMinutes(),sb[sb.length]=10>l1l1l1ll?"0"+l1l1l1ll:l1l1l1ll,sb[sb.length]=":",l1l1l1ll=l1l111l1.getSeconds(),sb[sb.length]=10>l1l1l1ll?"0"+l1l1l1ll:l1l1l1ll,sb[sb.length]='"'}}},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},strReg1=/["\\\x00-\x1f]/,strReg2=/([\x00-\x1f\\"])/g;this.encode=function(){return function(l1I111II,l1I1I11I){return sb=[],_dateFormat=l1I1I11I,doEncode(l1I111II),_dateFormat=null,sb.join("")}}(),this.decode=function(){var dateRe1=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.*\d*)?)Z*$/,dateRe2=new RegExp("^/+Date\\((-?[0-9]+).*\\)/+$","g"),re=/[\"\'](\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})[\"\']/g;return function(json,parseDate){function evalParse(json){return parseDate!==!1&&(json=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx,"$1new Date($2)"),json=json.replace(re,"new Date($1,$2-1,$3,$4,$5,$6)"),json=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx2,"new Date($1)")),eval("("+json+")")}if(""===json||null===json||void 0===json)return json;"object"==typeof json&&(json=this.encode(json));var data=null;if(window.JSON&&window.JSON.parse){var dateReviver=function(I1l111ll,I1l1l11I){if("string"==typeof I1l1l11I&&parseDate!==!1){dateRe1.lastIndex=0;var l1l11ll1I=dateRe1.exec(I1l1l11I);if(l1l11ll1I)return I1l1l11I=new Date(l1l11ll1I[1],l1l11ll1I[2]-1,l1l11ll1I[3],l1l11ll1I[4],l1l11ll1I[5],l1l11ll1I[6]);dateRe2.lastIndex=0;var l1l11ll1I=dateRe2.exec(I1l1l11I);if(l1l11ll1I)return I1l1l11I=new Date(parseInt(l1l11ll1I[1]))}return I1l1l11I};try{var json2=json.replace(_tool_pkg_.biz.Tool.__js_dateRegEx,'$1"/Date($2)/"');data=window.JSON.parse(json2,dateReviver)}catch(ex){data=evalParse(json)}}else data=evalParse(json);return data}}()},_tool_pkg_.biz.Tool.dateInfo={monthsLong:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],daysLong:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["日","一","二","三","四","五","六"],quarterLong:["一季度","二季度","三季度","四季度"],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["上半年","下半年"],patterns:{d:"yyyy-M-d",D:"yyyy年M月d日",f:"yyyy年M月d日 H:mm",F:"yyyy年M月d日 H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd日",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyy年M月d日 HH:mm:ss",y:"yyyy年MM月"},tt:{AM:"上午",PM:"下午"},ten:{Early:"上旬",Mid:"中旬",Late:"下旬"},today:"今天",clockType:24},_tool_pkg_.biz.Tool.__js_dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g"),_tool_pkg_.biz.Tool.__js_dateRegEx2=new RegExp("[\"']/Date\\(([0-9]+)\\)/[\"']","g"),_tool_pkg_.biz.Tool.encode=_tool_pkg_.biz.Tool.JSON.encode,_tool_pkg_.biz.Tool.decode=_tool_pkg_.biz.Tool.JSON.decode,_tool_pkg_.biz.Tool.formatDate=function(l1I111II,I1I1I111,l1l11ll1I){if(!l1I111II||!l1I111II.getFullYear||isNaN(l1I111II))return"";var l1lllll1=l1I111II.toString(),l1I1II11l=_tool_pkg_.biz.Tool.dateInfo;if("undefined"!=typeof l1I1II11l){var l1l1111l1="undefined"!=typeof l1I1II11l.patterns[I1I1I111]?l1I1II11l.patterns[I1I1I111]:I1I1I111,I1III1II1=l1I111II.getFullYear(),l1l1l1l1=l1I111II.getMonth(),l1111l11=l1I111II.getDate();if("yyyy-MM-dd"==I1I1I111)return l1l1l1l1=10>l1l1l1l1+1?"0"+(l1l1l1l1+1):l1l1l1l1+1,l1111l11=10>l1111l11?"0"+l1111l11:l1111l11,I1III1II1+"-"+l1l1l1l1+"-"+l1111l11;if("MM/dd/yyyy"==I1I1I111)return l1l1l1l1=10>l1l1l1l1+1?"0"+(l1l1l1l1+1):l1l1l1l1+1,l1111l11=10>l1111l11?"0"+l1111l11:l1111l11,l1l1l1l1+"/"+l1111l11+"/"+I1III1II1;l1lllll1=l1l1111l1.replace(/yyyy/g,I1III1II1),l1lllll1=l1lllll1.replace(/yy/g,(I1III1II1+"").substring(2));var l1I1111l=l1I111II.getHalfYear();l1lllll1=l1lllll1.replace(/hy/g,l1I1II11l.halfYearLong[l1I1111l]);var l1II111I1=l1I111II.getQuarter();l1lllll1=l1lllll1.replace(/Q/g,l1I1II11l.quarterLong[l1II111I1]),l1lllll1=l1lllll1.replace(/q/g,l1I1II11l.quarterShort[l1II111I1]),l1lllll1=l1lllll1.replace(/MMMM/g,l1I1II11l.monthsLong[l1l1l1l1].escapeDateTimeTokens()),l1lllll1=l1lllll1.replace(/MMM/g,l1I1II11l.monthsShort[l1l1l1l1].escapeDateTimeTokens()),l1lllll1=l1lllll1.replace(/MM/g,10>l1l1l1l1+1?"0"+(l1l1l1l1+1):l1l1l1l1+1),l1lllll1=l1lllll1.replace(/(\\)?M/g,function(l1l111l1,l1l1l11I){return l1l1l11I?l1l111l1:l1l1l1l1+1});var I1II1IIII=l1I111II.getDay();l1lllll1=l1lllll1.replace(/dddd/g,l1I1II11l.daysLong[I1II1IIII].escapeDateTimeTokens()),l1lllll1=l1lllll1.replace(/ddd/g,l1I1II11l.daysShort[I1II1IIII].escapeDateTimeTokens()),l1lllll1=l1lllll1.replace(/dd/g,10>l1111l11?"0"+l1111l11:l1111l11),l1lllll1=l1lllll1.replace(/(\\)?d/g,function(l1l111l1,I1l1l11l){return I1l1l11l?l1l111l1:l1111l11});var I11I1III=l1I111II.getHours(),l111I11I=I11I1III>12?I11I1III-12:I11I1III;12==l1I1II11l.clockType&&I11I1III>12&&(I11I1III-=12),l1lllll1=l1lllll1.replace(/HH/g,10>I11I1III?"0"+I11I1III:I11I1III),l1lllll1=l1lllll1.replace(/(\\)?H/g,function(I1l111ll,l1I1I11l){return l1I1I11l?I1l111ll:I11I1III}),l1lllll1=l1lllll1.replace(/hh/g,10>l111I11I?"0"+l111I11I:l111I11I),l1lllll1=l1lllll1.replace(/(\\)?h/g,function(l1l111ll,l1I1I11I){return l1I1I11I?l1l111ll:l111I11I});var l1IIII1l=l1I111II.getMinutes();l1lllll1=l1lllll1.replace(/mm/g,10>l1IIII1l?"0"+l1IIII1l:l1IIII1l),l1lllll1=l1lllll1.replace(/(\\)?m/g,function(l1l111lI,I1l1l11I){return I1l1l11I?l1l111lI:l1IIII1l});var I1IIIII1I=l1I111II.getSeconds();l1lllll1=l1lllll1.replace(/ss/g,10>I1IIIII1I?"0"+I1IIIII1I:I1IIIII1I),l1lllll1=l1lllll1.replace(/(\\)?s/g,function(I1l111l1,I1l1l111){return I1l1l111?I1l111l1:I1IIIII1I}),l1lllll1=l1lllll1.replace(/fff/g,l1I111II.getMilliseconds()),l1lllll1=l1lllll1.replace(/tt/g,l1I111II.getHours()>12||0==l1I111II.getHours()?l1I1II11l.tt.PM:l1I1II11l.tt.AM);var l1I111II=l1I111II.getDate(),I1I111IIl="";I1I111IIl=10>=l1I111II?l1I1II11l.ten.Early:20>=l1I111II?l1I1II11l.ten.Mid:l1I1II11l.ten.Late,l1lllll1=l1lllll1.replace(/ten/g,I1I111IIl)}return l1lllll1.replace(/\\/g,"")},_tool_pkg_.biz.Tool.clone=function(l1I111I1,I1I1I111){function I1I11II11(I1l111ll){for(var I1I1I11I=0,l1l11ll1I=I1l111ll.length;l1l11ll1I>I1I1I11I;I1I1I11I++){var I1IIIIIl=I1l111ll[I1I1I11I];delete I1IIIIIl._state,delete I1IIIIIl._id,delete I1IIIIIl._pid,delete I1IIIIIl._uid;for(var l1l1ll11l in I1IIIIIl){var I1l1111l1=I1IIIIIl[l1l1ll11l];I1l1111l1 instanceof Array&&I1I11II11(I1l1111l1)}}}if(null===l1I111I1||void 0===l1I111I1)return l1I111I1;var l1llllll=_tool_pkg_.biz.Tool.encode(l1I111I1),I1I1II11I=_tool_pkg_.biz.Tool.decode(l1llllll);return I1I1I111!==!1&&I1I11II11(I1I1II11I instanceof Array?I1I1II11I:[I1I1II11I]),I1I1II11I},_tool_pkg_.encode=_tool_pkg_.biz.Tool.encode,_tool_pkg_.decode=_tool_pkg_.biz.Tool.decode,_tool_pkg_.clone=_tool_pkg_.biz.Tool.clone}(window),function(I1l111l1){var l1l1l11I=(I1l111l1.__jsclazz_,I1l111l1._tool_pkg_),I1l11ll1l=(I1l111l1.__jsclazz_.Clz_Data,l1l1l11I.Tool,{"package":l1l1l11I.NAME+".biz","class":"Events",prefix:l1l1l11I.get("eventPrefix"),suffix:"",controllPrefix:l1l1l11I.get("controlPrefix"),init:function(){I1l11ll1l.bindGlobalEvents()},getEventTarget:function(I1l111lI){var l1I1I111=I1l111lI.target?I1l111lI.target:I1l111lI.srcElement;return l1I1I111},bindEvents:function(I1I111I1,I1l1l111,I1l11ll1I){var I1lllll1=I1l11ll1I||"["+I1l11ll1l.prefix+I1I111I1+I1l11ll1l.suffix+"]";return"propertychange"==I1I111I1?l1l1l11I.browser.ie&&(""+l1l1l11I.browser.ie).indexOf("9")>=0?void $(document).on("mouseover",I1lllll1,function(I1l111l1){if(this===I1l11ll1l.getEventTarget(I1l111l1)&&!$(this).data("__hasBindChange")){var l1l1l11l=null,I1I11II11=function(I1I111I1){var I1I1I11l=l1l1l11l||I1l11ll1l.getEventTarget(I1I111I1),l1I11II1I=$(I1I1I11l).data("data-oval")||"";l1I11II1I!==I1I1I11l.value&&($(I1I1I11l).data("data-oval",I1I1I11l.value),I1l1l111&&I1l1l111.call(I1I1I11l,I1I111I1))},l1llllll=function(l1I111II){l1l1l11l=this,"focus"===l1I111II.type?($(this).data("data-oval",this.value),document.addEventListener("propertychange",I1I11II11,!1)):document.removeEventListener("propertychange",I1I11II11,!1)};this.addEventListener("input",I1I11II11,!1),this.addEventListener("mouseup",I1I11II11,!1),this.addEventListener("cut",I1I11II11,!1),this.addEventListener("focus",l1llllll,!1),this.addEventListener("blur",l1llllll,!1),this.addEventListener("keyup",I1I11II11,!1),$(this).on("cut",function(){window.setTimeout(I1I11II11,5)}),$(this).data("__hasBindChange",!0)}}):void $(document).on("input propertychange",I1lllll1,I1l1l111):void $(document).on(I1I111I1,I1lllll1,I1l1l111)},getEvFun:function(I1l111lI){return"undefined"==typeof I1l11ll1l[I1l11ll1l.prefix+"_"+I1l111lI]&&(I1l11ll1l[I1l11ll1l.prefix+"_"+I1l111lI]=function(l1I111II){var l1l1l11I=$(this).attr(I1l11ll1l.prefix+I1l111lI+I1l11ll1l.suffix),l1IIIII1=$(this).attr(I1l11ll1l.controllPrefix+"own"),I1l1ll11l=$(this).attr(I1l11ll1l.prefix+"param")||"";l1IIIII1?I1l11ll1l.runObjectFunByFun({fun:l1l1l11I,el:this,e:l1I111II,controllId:l1IIIII1,param:I1l1ll11l}):I1l11ll1l.runGlobalFunByFun({fun:l1l1l11I,el:this,e:l1I111II,param:I1l1ll11l})}),I1l11ll1l[I1l11ll1l.prefix+"_"+I1l111lI]},bindGlobalEvents:function(I1l111ll){for(var I1l111ll=I1l111ll||"move,load,tap,touchstart,touchmove,touchend,oninput,toggle,propertychange,hover,blur,change,click,dblclick,focus,focusin,focusout,keydown,keypress,keyup,mousedown,mousewheel,contextmenu,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload",I1l1l11I=I1l111ll.split(","),I1I11II1I="",l1lllll1=0,l1I1II11I=I1l1l11I.length;l1I1II11I>l1lllll1;l1lllll1++)I1I11II1I=I1l1l11I[l1lllll1],I1l11ll1l[I1l11ll1l.prefix+"_"+I1I11II1I]||I1l11ll1l.bindEvents(I1l1l11I[l1lllll1],I1l11ll1l.getEvFun(I1l1l11I[l1lllll1]));l1l1l11I.browser.ie&&(l1l1l11I.browser.ie+"").indexOf("9")>=0&&($(document).on("keydown",function(I1I111Il){return I1I111Il=I1I111Il||event,I1I111Il.ctrlKey&&90==I1I111Il.keyCode?(I1I111Il.returnValue=!1,!1):void 0}),$(document).on("cut",function(l1l111lI){l1l111lI=l1l111lI||event}))},runObjectFunByFun:function(l1l111lI){var I1I1I11I=l1l111lI.fun,l1l11ll1l=l1l111lI.el,l1IIIIII=l1l111lI.e,I1l1ll11l=l1l111lI.controllId,l1I1111II=l1l111lI.param||"";if(I1I1I11I){var I1lll1ll1=l1l1l11I.getByControllId(I1l1ll11l);I1l11ll1l.runObjectFun({object:I1lll1ll1,fun:I1I1I11I,el:l1l11ll1l,e:l1IIIIII,controllId:I1l1ll11l,param:l1I1111II})}},runGlobalFunByFun:function(I1I111I1){var I1I1I11I=I1I111I1.fun,I1I11II1l=I1I111I1.el,l1IIIIIl=I1I111I1.e,l1I1II111=I1I111I1.param||"";if(I1I1I11I){var I1I1111I1=l1l1l11I.biz.Tool.getClassAndFun(I1I1I11I,I1I111I1);I1l11ll1l.runGlobalFun({clz:I1I1111I1.clz||"",fun:I1I1111I1.funName||"",el:I1I11II1l,e:l1IIIIIl,runFun:I1I1111I1.fun||"",param:l1I1II111})}},runObjectFun:function(I1l111lI){var I1l1l11l=I1l111lI.object,I1l11ll1I=I1l111lI.fun;I1l111lI.el;if(I1l1l11l){I1l11ll1l.runGlobalFunTestStart(I1l111lI,"");var I1lllllI=$("["+l1l1l11I.get("controlPrefix")+"controllId="+I1l111lI.controllId+"]").attr(l1l1l11I.get("beforePrifix")+I1l11ll1I),I1l1ll11I=l1l1l11I.biz.Tool.getClassAndFun(I1lllllI,I1l111lI);if(I1l1ll11I.clz&&I1l1ll11I.fun){var I1l1111ll=I1l1ll11I.fun.call(I1l1ll11I.clz,I1l111lI);if("undefined"!=typeof I1l1111ll&&I1l1111ll===!1)return void I1l11ll1l.runGlobalFunTestEnd(I1l111lI,"")}I1l1l11l[I1l11ll1I]&&I1l1l11l[I1l11ll1I](I1l111lI);var l1III1III=$("["+l1l1l11I.get("controlPrefix")+"controllId="+I1l111lI.controllId+"]").attr(l1l1l11I.get("afterPrifix")+I1l11ll1I),l1I1I1I1=l1l1l11I.biz.Tool.getClassAndFun(l1III1III,I1l111lI);l1I1I1I1.clz&&l1I1I1I1.fun&&l1I1I1I1.fun.call(l1I1I1I1.clz,I1l111lI),I1l11ll1l.runGlobalFunTestEnd(I1l111lI,"")}},runGlobalFun:function(l1I111I1){var I1I1I11l=l1I111I1.clz,I1I11II1I=l1I111I1.fun;if(I1I1I11l){I1l11ll1l.runGlobalFunTestStart(l1I111I1,"");l1I111I1.el;if(I1I1I11l[I1I11II1I+"Before"]){var I1IIIII1=I1I1I11l[I1I11II1I+"Before"](l1I111I1);if("undefined"!=typeof I1IIIII1&&I1IIIII1===!1)return void I1l11ll1l.runGlobalFunTestEnd(l1I111I1,"")}I1I1I11l[I1I11II1I]&&I1I1I11l[I1I11II1I](l1I111I1),I1I1I11l[I1I11II1I+"After"]&&I1I1I11l[I1I11II1I+"After"](l1I111I1),I1l11ll1l.runGlobalFunTestEnd(l1I111I1,"")}},runGlobalFunTestStart:function(l1I111Il,I1I1I11l){var l1l11ll1l=l1I111Il.clz,I1lllllI=l1I111Il.fun;if(l1l11ll1l)return l1l11ll1l[I1lllllI+I1I1I11l+"_start"]&&l1l11ll1l[I1lllllI+I1I1I11l+"_start"]?void l1l11ll1l[I1lllllI+I1I1I11l+"_start"](l1I111Il):void 0},runGlobalFunTestEnd:function(l1I111II,l1l1l111){var l1l11ll1I=l1I111II.clz,l1IIIII1=l1I111II.fun,l1l1ll111=l1I111II.ownClz;if(l1l11ll1I)return l1l1ll111&&l1l1ll111[l1IIIII1+l1l1l111+"_end"]?void l1l1ll111[l1IIIII1+l1l1l111+"_end"](l1I111II):l1l11ll1I[l1IIIII1+l1l1l111+"_end"]&&l1l11ll1I[l1IIIII1+l1l1l111+"_end"]?void l1l11ll1I[l1IIIII1+l1l1l111+"_end"](l1I111II):void 0}});I1l11ll1l=l1l1l11I.biz.Tool.crateOrUpdateClass(I1l11ll1l),oui.os.mobile||I1l11ll1l.init()}(window);var test4Date=new Date;!function(){var FlowBiz={"package":"oui.flow","class":"FlowCommon",flowData:{},isNotCheckSaved:!1,newId:0,toProcessProps:!1,isVertical:!0,zoomScale:1,themeId:1,newId4server:2,contextMenus:{},eventBefore2hideTipsOrActionSheetFunNames:"event2setAutoBranch,event2setSelectBranch,event2deleteBranch,event2replaceNode,event2editProp,event2addNode,event2delNode,event2addBrotherNode,event2delCurrNode,event2trans,event2vertical,event2renderByThemeId",eventBefore2validateFunNames:"saveWorkFlow,event2addNode,event2addBrotherNode,event2replaceNode,event2editProp,event2trans,event2vertical,event2processProps,event2processGraph",setInterceptFuns:function(l1I111I1,l1l1l111){var I1I11II1I,I1IIIIII=this;I1I11II1I="string"==typeof l1I111I1?l1I111I1.split(","):l1I111I1||[];for(var l1l1ll11I,I1l1111ll=0,l1III1II1=I1I11II1I.length;l1III1II1>I1l1111ll;I1l1111ll++)l1l1ll11I=I1I11II1I[I1l1111ll],l1l1ll11I&&(I1IIIIII[l1l1ll11I+"Before"]=l1l1l111)},getFlowUi:function(){throw new Error("未实现getFlowUi方法")},getFlowBiz:function(){throw new Error("未实现getFlowBiz方法")},nodeIdMap:{},initStart:function(I1l111ll){var l1I1I11I=this;l1I1I11I.design4Runtime="true"==oui.getParam("design4Runtime")?!0:!1,l1I1I11I.offsetY=100,l1I1I11I.x_distance_S=60,l1I1I11I.x_distance=180-l1I1I11I.offsetY,l1I1I11I.y_distance=100,l1I1I11I.rootPosX=150,l1I1I11I.nodeWidth=65,l1I1I11I.nodeHeight=65,l1I1I11I.nodeSplitWidth=16,l1I1I11I.rootPosY=10,l1I1I11I.Events={click:"click",actionMenu:"contextmenu"},oui.os.mobile?(l1I1I11I.Events={click:"tap",actionMenu:"tap"},l1I1I11I.isVertical=!0):(l1I1I11I.isFlowNew&&(l1I1I11I.flowData.viewType=l1I1I11I.ViewType.horizontal.value),l1I1I11I.isVertical=!1);var I1I11II11=this.getFlowUi();I1I11II11.setBiz(l1I1I11I),l1I1I11I.initAttrsByUrlParam(),I1I11II11.config=$.extend(!0,I1I11II11.config,I1I11II11.themes[l1I1I11I.themeId]||{}),template.helper("oui",oui),template.helper("FlowBiz",l1I1I11I),template.helper("console",console),oui.parse(),I1I11II11.render(),l1I1I11I.setInterceptFuns(l1I1I11I.eventBefore2validateFunNames,function(l1l111ll){l1I1I11I.updateWorkFlowProps();var l1l1l11I=l1I1I11I.validate();return l1l1l11I?void 0:!1})},initAttrsByUrlParam:function(){var l1I111II=oui.getParam(),l1I1I11l=this;for(var I1l11ll1l in l1I111II)l1I111II[I1l11ll1l]&&"true"==l1I111II[I1l11ll1l]?l1I1I11l[I1l11ll1l]=!0:l1I111II[I1l11ll1l]&&"false"==l1I111II[I1l11ll1l]?l1I1I11l[I1l11ll1l]=!1:l1I1I11l[I1l11ll1l]=l1I111II[I1l11ll1l]},initEnd:function(){var l1I111Il=this;l1I111Il.inited=!0,data=l1I111Il.flowData,l1I111Il.oldProcessPropData={name:data.name||"",importance:data.importance}},changeView:function(){},serverData2Model:function(){var l1l111l1=this,I1l1l11I=l1l111l1.flowData.workFlowNodeList||[],l1I11II1I="",I1lllllI="";l1l111l1.flowData.viewType==l1l111l1.ViewType.vertical.value?l1l111l1.isVertical=!0:l1l111l1.isVertical=!1,l1l111l1.isPreview&&I1l1l11I&&I1l1l11I[0]&&(I1l1l11I[0].nodeDisplayName=l1l111l1.currLoginNodeName,I1l1l11I[0].nodeName=l1l111l1.currLoginNodeName,I1l1l11I[0].nodeId=l1l111l1.currLoginNodeId);for(var l1l1ll111=0,l1l1111lI=I1l1l11I.length;l1l1111lI>l1l1ll111;l1l1ll111++)I1l1l11I[l1l1ll111].name=I1l1l11I[l1l1ll111].nodeDisplayName,l1I11II1I=I1l1l11I[l1l1ll111].parentId||[],"object"!=typeof l1I11II1I&&(l1I11II1I=[l1I11II1I]),I1lllllI=I1l1l11I[l1l1ll111].nodeType,I1lllllI&&"join"==I1lllllI&&(I1l1l11I[l1l1ll111].isJoin=!0),I1lllllI&&"split"==I1lllllI&&(I1l1l11I[l1l1ll111].isSplit=!0),I1lllllI&&"end"==I1lllllI&&(I1l1l11I[l1l1ll111].isEnd=!0),I1l1l11I[l1l1ll111].id=I1l1l11I[l1l1ll111].id+"",I1l1l11I[l1l1ll111].pid=l1I11II1I?l1I11II1I.join(","):"",l1l111l1.nodePersonMap2nodePersonList(I1l1l11I[l1l1ll111])},nodePersonMap2nodePersonList:function(l1I111I1){var l1l1l111=this;if(l1l1l111.isIndex){var I1l11ll1I=[];l1I111I1.nodePersonList=l1I111I1.nodePersonList||I1l11ll1I;for(var l1IIIIIl=[],I1I1II111=l1I111I1.nodePersonList,I1I1111I1=0,l1III1III=I1I1II111.length;l1III1III>I1I1111I1;I1I1111I1++)I1I1II111[I1I1111I1].comment&&l1IIIIIl.push(I1I1II111[I1I1111I1].comment);l1I111I1.comments=l1IIIIIl}},model2ServerData:function(){for(var l1I111Il=this,l1l1l11I=l1I111Il.workFlowNodeList||[],I1I11II1I="",l1lllll1=[],I1l1ll11I=0,I1I1111I1=l1l1l11I.length;I1I1111I1>I1l1ll11I;I1l1ll11I++)l1l1l11I[I1l1ll11I].nodeDisplayName=l1l1l11I[I1l1ll11I].name||l1l1l11I[I1l1ll11I].nodeName,I1I11II1I=l1l1l11I[I1l1ll11I].pid+""||"",l1l1l11I[I1l1ll11I].isSplit&&(l1l1l11I[I1l1ll11I].nodeType="split",l1l1l11I[I1l1ll11I].nodeName=void 0,l1l1l11I[I1l1ll11I].nodeDisplayName=void 0,l1l1l11I[I1l1ll11I].nodeId=void 0),l1l1l11I[I1l1ll11I].isJoin&&(l1l1l11I[I1l1ll11I].nodeType="join",l1l1l11I[I1l1ll11I].nodeName=void 0,l1l1l11I[I1l1ll11I].nodeDisplayName=void 0,l1l1l11I[I1l1ll11I].nodeId=void 0),l1l1l11I[I1l1ll11I].isEnd&&(l1l1l11I[I1l1ll11I].nodeType="end",l1l1l11I[I1l1ll11I].nodeName=void 0,l1l1l11I[I1l1ll11I].nodeDisplayName=void 0,l1l1l11I[I1l1ll11I].nodeId=void 0),l1l1l11I[I1l1ll11I].nodeName&&l1lllll1.push(l1l1l11I[I1l1ll11I].nodeName),l1l1l11I[I1l1ll11I].parentId=I1I11II1I?I1I11II1I.split(","):void 0;l1I111Il.flowData.workFlowNodeNames=l1lllll1.join(","),l1I111Il.flowData.bizId||(l1I111Il.flowData.bizId=l1I111Il.flowData.moduleId,l1I111Il.flowData.bizType=l1I111Il.flowData.moduleType)},getFlowData:function(){var I1I111I1=this;I1I111I1.model2ServerData();var I1I1I11I=I1I111I1.flowData;return I1I1I11I.workFlowNodeList=I1I111I1.workFlowNodeList,I1I1I11I},saveWorkFlowCallback:function(msg,cfg){console.log("save workflow callback...");var _self=this,id=msg.id;if(msg.isNew=_self.isFlowNew,_self.flowData.id=id,cfg){var saveType=$(cfg.el).attr("saveType"),saveWorkFlowCallbackBiz=_self.moduleBizController||$(cfg.el).attr("saveWorkFlowCallbackBiz");if(saveWorkFlowCallbackBiz&&"save4test"==saveType){var successFun=function(I1l111ll){_self.getWorkFlowFromServerCallback(I1l111ll,cfg,id)},errorFun=function(I1l111ll){_self.getWorkFlowFromServerError(I1l111ll,cfg,id)},saveSuccess=function(msg){eval(saveWorkFlowCallbackBiz+".getWorkFlowFromServer(successFun,errorFun);")},saveError=function(msg){eval(saveWorkFlowCallbackBiz+".getWorkFlowFromServer(successFun,errorFun);")};try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowSuccess(msg,cfg,saveSuccess,saveError)")}catch(eve){throw eve}}if(saveWorkFlowCallbackBiz)try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowSuccess(msg,cfg);")}catch(eve){throw eve}}},saveWorkFlowError:function(msg,cfg){var _self=this;if("string"==typeof msg&&console.log(msg),console.log("保存流程模板失败"),cfg){var saveWorkFlowCallbackBiz=_self.moduleBizController||$(cfg.el).attr("saveWorkFlowCallbackBiz");if(saveWorkFlowCallbackBiz){if(eval(saveWorkFlowCallbackBiz)==_self)return;try{eval(saveWorkFlowCallbackBiz+".saveWorkFlowError(msg,cfg);")}catch(eve){throw eve}}}},getWorkFlowFromServerCallback:function(I1l111lI,I1I1I111,l1l11ll1I){var l1IIIIII=this;if(I1I1I111&&I1I1I111.el){var l1I1II11l=$(I1I1I111.el).attr("saveType");if("save4test"==l1I1II11l){var I1I1111I1=l1IIIIII.getFlowData();l1IIIIII.testCompareJson(I1I1111I1,I1l111lI)}}},testCompareJson:function(I1l111ll,l1I1I11I){var l1I11II1l=oui.biz.Tool,l1lllll1=this,l1I1II111=l1I11II1l.encode(I1l111ll),l1l1111ll=l1I11II1l.encode(l1I1I11I);return"undefined"==typeof oui.showCompareJsonDialog?void l1I11II1l.require(["res_engine/workflow/compareJson.js"],function(){l1lllll1.testCompareJson4recuired(l1I1II111,l1l1111ll)}):void l1lllll1.testCompareJson4recuired(l1I1II111,l1l1111ll)},testCompareJson4recuired:function(l1I111I1,I1I1I11I){oui.getTop().oui.showCompareJsonDialog({leftJson:l1I111I1,rightJson:I1I1I11I})},getWorkFlowFromServerError:function(l1I111Il,I1I1I111,l1l11ll1l){console.log("加载服务端流程数据数据失败;id="+l1l11ll1l),console.log(l1I111Il)},getWorkFlowFromServer:function(l1I111Il){oui.getTop().oui.alert("流程图 没有实现getWorkFlowFromServer接口")},updateWorkFlowProps:function(){var I1l111l1=this;if($.trim($("#flow-ui-processProp").html())){var I1l1l11l=I1l111l1.getFlowData(),l1l11ll1I=oui.getFormValue(),I1IIIII1=oui.getFormData();l1l11ll1I.selectPerson4right&&(l1l11ll1I.selectPerson4right=I1IIIII1.selectPerson4right),$.extend(!0,I1l1l11l,l1l11ll1I);for(var l1l1ll11I=l1l11ll1I.selectPerson4right||"[]",I1l1111lI=oui.parseJson(l1l1ll11I),I1lll1llI=[],l1I1I1I1=0,I1111l1l=I1l1111lI.length;I1111l1l>l1I1I1I1;l1I1I1I1++)I1lll1llI.push({toId:I1l1111lI[l1I1I1I1].id,toName:I1l1111lI[l1I1I1I1].name,toType:I1l1111lI[l1I1I1I1].typeFlag});I1l1l11l.rights=I1lll1llI}},changed:function(){this.isEdit&&this.inited&&(this.hasChange=!0,this.changeView())},hasSaveData:function(){var I1l111lI=this;return I1l111lI.isNotCheckSaved?!0:!this.hasChange},clear4topDialog:function(){try{var l1l111ll=this;if(l1l111ll.editPropDialog){var I1I1I11I=l1l111ll.editPropDialog.getEl();oui.getTop().oui.clearByContainer(I1I1I11I),oui.getTop().$(I1I1I11I).remove()}if(l1l111ll.editBranchDialog){var I1I1I11I=l1l111ll.editBranchDialog.getEl();oui.getTop().oui.clearByContainer(I1I1I11I),oui.getTop().$(I1I1I11I).remove()}}catch(l1I11II11){}},saveWorkFlow:function(l1I111I1){var l1I1I11I=this,l1l11ll11=l1I1I11I.getFlowData(),I1lllll1=(oui.getContextPath(),oui.validate4value(l1l11ll11.workFlowNodeList.length,{failMsg:"流程节点数不能小于{{validateValue}}",minValue:l1I1I11I.ValidateConfig.workFlowNodeListMinSize,failMode:l1I1I11I.ValidateConfig.failMode}));if(!I1lllll1)return!1;l1I1I11I.clear4topDialog();var l1I1II11I=oui.getPageParam("saveWorkFlowUrl");oui.postData(l1I1II11I,l1l11ll11,function(I1l111l1){if(I1l111l1.success){l1I1I11I.hasChange=!1,l1I1I11I.isNotCheckSaved=!0;var l1l1l11l=oui.parseJson(I1l111l1.msg);l1I1I11I.saveWorkFlowCallback.call(l1I1I11I,l1l1l11l,l1I111I1)}},function(l1l111lI){l1I1I11I.saveWorkFlowError.call(l1I1I11I,l1l111lI,l1I111I1)})},init4default:function(){var l1l111lI=this;$.extend(!0,l1l111lI,{flowData:{state:l1l111lI.StateEnum.enable.value,viewType:l1l111lI.ViewType.vertical.value,importance:l1l111lI.WorkFlowImportance.normal.value}})},event2formList:function(){var l1I111I1=this;l1I111I1.clear4topDialog();var I1l1l11I=oui.getPageParam("returnFormListUrl"),l1l11ll1I={formType:"bizForm"};return I1l1l11I=oui.addParams(I1l1l11I,l1l11ll1I),oui.getTopMain().oui.go(I1l1l11I,{},!0),!1},clearNodes:function(I1l111l1){var I1I1I111=this;I1I1I111.workFlowNodeList=[],$.each(I1I1I111.emptyNodes,function(){I1I1I111.workFlowNodeList.push($.extend(!0,{},this))}),I1I1I111.workFlowNodeList[0].formRight="-2",I1I1I111.flowData.workFlowNodeList=I1I1I111.workFlowNodeList,I1I1I111.serverData2Model(),I1I1I111.refresh()},initEmptyNodes:function(I1I111II,l1I1I111){var I1I11II1I=this,I1llllll=[{id:"jsuuid-1",nodeType:"person",nodeDisplayName:"发起人",formRight:"-2",nodeRight:I1I11II1I.WorkFlowNodeRight.cancel.name,nodeName:l1I1I111.currLoginNodeName,nodeId:l1I1I111.currLoginNodeId},{id:"jsuuid-2",nodeType:"end",nodeName:"end",nodeId:"end",parentId:["jsuuid-1"]}];return!I1I111II||!I1I111II.workFlowNodeList||I1I111II.workFlowNodeList.length<2?(I1I11II1I.emptyNodes=I1llllll,I1I11II1I.emptyNodes):(I1I11II1I.emptyNodes=[{id:I1I111II.workFlowNodeList[0].id,nodeType:"person",nodeDisplayName:"发起人",nodeRight:I1I111II.workFlowNodeList[0].nodeRight||"",nodeName:l1I1I111.currLoginNodeName,nodeId:l1I1I111.currLoginNodeId},{id:I1I111II.workFlowNodeList[I1I111II.workFlowNodeList.length-1].id,nodeType:"end",nodeName:"end",nodeId:"end",parentId:[I1I111II.workFlowNodeList[0].id]}],I1I11II1I.emptyNodes)},findNodeRightValue:function(l1I111I1){var I1I1I111=this;return l1I111I1&&l1I111I1.nodeRight?l1I111I1.nodeRight:[I1I1I111.WorkFlowNodeRight.addNodes.name,I1I1I111.WorkFlowNodeRight.rollBack.name,I1I1I111.WorkFlowNodeRight.stop.name,I1I1I111.WorkFlowNodeRight.notify.name].join(",")},init:function(param){var ouiInDialog=oui.getParam("ouiInDialog"),ouiDialogId=oui.getParam("ouiDialogId");if(ouiDialogId&&ouiInDialog){var currDialog=oui.getCurrUrlDialog();if(currDialog){var workflowJSON=currDialog.attr("workflowJSON");workflowJSON&&("object"==typeof workflowJSON&&(workflowJSON=oui.parseString(workflowJSON),workflowJSON=workflowJSON.replace(/jsuuid-/gi,oui.getUUIDLong())),param.workFlowJSONStr=workflowJSON)}}if(!param||"object"!=typeof param)throw new Error("oui.flow.FlowBiz.init流程初始化必须传入对象参数");var sd=new Date,_self=this;_self.init4default(),_self.urlParam=oui.getParam()||{},_self.urlParam.method&&"viewFlowDiagram"!=_self.urlParam.method?_self.isIndex=!1:_self.isIndex=!0,_self.urlParam.hideSaveButton&&"true"==_self.urlParam.hideSaveButton?_self.isHideSaveButton=!0:_self.isHideSaveButton=!1,_self.isIndex&&(_self.isHideSaveButton=!0);var workFlowJson=null;if(param.workFlowJSONStr&&"null"!=param.workFlowJSONStr)workFlowJson=oui.parseJson(param.workFlowJSONStr),_self.initEmptyNodes(workFlowJson,param);else{_self.initEmptyNodes(null,param);var arr=[];$.each(_self.emptyNodes,function(){arr.push($.extend(!0,{},this))}),workFlowJson={workFlowNodeList:arr}}param.flowData=workFlowJson,param.isPreview&&(param.isHideSaveButton=!0);var controller=$("body",window.parent.document).attr("oui-controller"),moduleBizController=controller;moduleBizController=controller&&window!=window.parent?"window.parent."+controller:window.FlowBizModuleController;try{if(!param.workFlowJSONStr||"null"==param.workFlowJSONStr){var json=eval(moduleBizController+".getWorkFlowJson4String()"),moduleJson=oui.parseJson(json);$.extend(!0,param.flowData,moduleJson)}}catch(e){}if($.extend(!0,_self,param),_self.moduleBizController=moduleBizController,_self.serverData2Model(),_self.initStart(param),_self.isEdit&&(_self.chooseTypeItemsJson=oui.parseString([{display:_self.WorkFlowChooseType.single.desc,value:_self.WorkFlowChooseType.single.value},{display:_self.WorkFlowChooseType.multi.desc,value:_self.WorkFlowChooseType.multi.value},{display:_self.WorkFlowChooseType.all.desc,value:_self.WorkFlowChooseType.all.value},{display:_self.WorkFlowChooseType.competition.desc,value:_self.WorkFlowChooseType.competition.value}]),_self.nodeRightItemsJson=oui.parseString([{display:_self.WorkFlowNodeRight.addNodes.desc,value:_self.WorkFlowNodeRight.addNodes.name
},{display:_self.WorkFlowNodeRight.rollBack.desc,value:_self.WorkFlowNodeRight.rollBack.name},{display:_self.WorkFlowNodeRight.stop.desc,value:_self.WorkFlowNodeRight.stop.name},{display:_self.WorkFlowNodeRight.notify.desc,value:_self.WorkFlowNodeRight.notify.name}]),_self.nodeRightItemsJson4notify=oui.parseString([{display:_self.WorkFlowNodeRight.notify.desc,value:_self.WorkFlowNodeRight.notify.name}]),_self.nodeRightItemsJson4cancel=oui.parseString([{display:_self.WorkFlowNodeRight.cancel.desc,value:_self.WorkFlowNodeRight.cancel.name}]),_self.otherAttrs4notifyNodeJson=oui.parseString({notifyJson:oui.parseJson(_self.nodeRightItemsJson4notify),nodeRightItemsJson:oui.parseJson(_self.nodeRightItemsJson)}),_self.nodePropDialogActions=[{text:"确定",id:"confirm-ok",cls:"oui-dialog-ok",action:function(){var l1I111I1=_self.updateNodeProp();l1I111I1&&(_self.clearNodePropOuiControls(),_self.editPropDialog.hide())}},{cls:"oui-dialog-cancel",text:"取消",id:"cancel",action:function(){_self.clearNodePropOuiControls(),_self.editPropDialog.hide()}}],_self.branchEditActions=[{text:"确定",id:"confirm-ok",cls:"oui-dialog-ok",action:function(){var l1l111ll=_self.updateNodeBranch();("boolean"!=typeof l1l111ll||l1l111ll)&&_self.editBranchDialog.hide()}},{cls:"oui-dialog-cancel",text:"取消",id:"cancel",action:function(){_self.editBranchDialog.hide()}}],!_self.formRightHtml&&oui.os.mobile)){var cellRightUrl=oui.getPageParam("cellRightUrl");_self.design4Runtime||(_self.formRightHtml=oui.loadUrl(cellRightUrl,!0,!1))}var workFlowNodeList=_self.flowData.workFlowNodeList?_self.flowData.workFlowNodeList:arr;_self.workFlowNodeList=workFlowNodeList,"undefined"!=typeof _self.currentNodeIdx&&_self.currentNodeIdx>=0?_self.currentNodeId=_self.workFlowNodeList[_self.currentNodeIdx].id||null:_self.currentNodeId=null,_self.refresh(),_self.bindEvents(),this.initEnd()},setModuleBizController:function(l1l111lI){var I1l1l111=this;I1l1l111.moduleBizController=l1l111lI},ADD_TYPE:oui.SelectPerson_ADD_TYPE,bindEvents:function(){},event2showEditIcon:function(l1I111Il){var I1I1I111=this,l1I11II11=$(l1I111Il.el).attr("nodeid"),l1IIIIII=I1I1I111.nodeIdMap[l1I11II11];I1I1I111.isEdit&&l1IIIIII&&"end"!=l1IIIIII.nodeType&&$(l1I111Il.el).attr("href",$(l1I111Il.el).attr("node-img-high-src"))},event2hideEditIcon:function(I1l111ll){var l1l1l11l=this,I1I11II1l=$(I1l111ll.el).attr("nodeid"),l1IIIIIl=l1l1l11l.nodeIdMap[I1I11II1l];l1l1l11l.isEdit&&l1IIIIIl&&"end"!=l1IIIIIl.nodeType&&$(I1l111ll.el).attr("href",$(I1l111ll.el).attr("node-img-src"))},event2contextMenuBefore:function(l1I111I1){var l1I1I11l,I1l11ll1l=this,l1lllll1=$(l1I111I1.el).attr("toId");if(I1l11ll1l.isPreview&&!l1lllll1)return!1;if(l1lllll1){if(I1l11ll1l.design4Runtime)return!1;if(oui.os.mobile)return!1;l1I1I11l=l1lllll1;var l1l1ll111=$(l1I111I1.el).attr("fromId");if(!l1l1ll111)return!1;var I1I1111Il=I1l11ll1l.nodeIdMap[l1l1ll111];if(!I1I1111Il)return!1;var I1III1IIl=I1l11ll1l.nodeIdMap[l1I1I11l];return I1III1IIl&&I1III1IIl.notifyNode?!1:I1III1IIl&&I1III1IIl.isSplit?!1:I1I1111Il.isSplit||I1l11ll1l.isIndex||I1l11ll1l.isPreview?!0:!1}l1I1I11l=$(l1I111I1.el).attr("nodeId");var I1III1IIl=I1l11ll1l.nodeIdMap[l1I1I11l];if(I1l11ll1l.isIndex){if(I1III1IIl.isJoin)return!1;if(!I1III1IIl.state)return!1;if(I1III1IIl.state==I1l11ll1l.WorkFlowNodeState.state_done.value){if(!I1III1IIl.nodePersonList)return!1;if(!I1III1IIl.nodePersonList.length)return!1}if(I1III1IIl.state===I1l11ll1l.WorkFlowNodeState.state_none.value)return!1;if(!(I1III1IIl.comments&&0!=I1III1IIl.comments.length||I1III1IIl.nodePersonList&&0!=I1III1IIl.nodePersonList.length&&"person"!=I1III1IIl.nodeType)&&"person"==I1III1IIl.nodeType&&I1III1IIl.state!=I1l11ll1l.WorkFlowNodeState.state_done.value)return!1}return"undefined"!=typeof I1III1IIl.isSplit&&I1III1IIl.isSplit?!1:void 0},updateNodeProp:function(){var l1l111lI=this,l1I1I11l=l1l111lI.editPropDialog.getEl(),I1l11ll1l=($(l1I1I11l),oui.getTop().oui.getById("chooseType")),l1lllllI=I1l11ll1l.attr("value");l1lllllI=parseInt(l1lllllI);var l1l1ll11l=oui.getTop().oui.getById("nodeRight"),l1I1111I1=oui.getTop().oui.getById("notifyNode"),l1lll1ll1="";l1l1ll11l&&(l1lll1ll1=l1l1ll11l.attr("value"));var I1l1l1l1=oui.getTop().oui.getById("nodeDisplayName"),l1111l1l=I1l1l1l1.attr("value");l1111l1l=$.trim(l1111l1l);var l1l11111=l1l111lI.editPropDialog.attr("nodeId"),l1II111Il=l1l111lI.getIndexByNodeId(l1l11111),I1ll1lll1=l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeDisplayName;if(l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeDisplayName=l1111l1l||l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeName,l1l111lI.flowData.workFlowNodeList[l1II111Il].chooseType=l1lllllI,l1l1ll11l&&(l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeRight=l1lll1ll1),l1I1111I1){var I11I1III=l1I1111I1.attr("value")||!1;"string"==typeof I11I1III&&(I11I1III="true"==I11I1III?!0:!1),I11I1III&&(l1l111lI.flowData.workFlowNodeList[l1II111Il].branchObject=null),l1l111lI.flowData.workFlowNodeList[l1II111Il].notifyNode=I11I1III}l1l111lI.flowData.workFlowNodeList[l1II111Il].name=l1111l1l||l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeName;try{var l111l111=l1l111lI.findFormRightByUI();l1l111lI.flowData.workFlowNodeList[l1II111Il].formRight=l111l111}catch(I1llll1l){}var I1IIIII1I=l1l111lI.validateWorkFlowNode(l1l111lI.flowData.workFlowNodeList[l1II111Il]);return I1IIIII1I?(l1l111lI.refresh(),!0):(l1l111lI.flowData.workFlowNodeList[l1II111Il].nodeDisplayName=I1ll1lll1,l1l111lI.flowData.workFlowNodeList[l1II111Il].name=I1ll1lll1,!1)},findFormRightByUI:function(){var l1l111ll="";try{l1l111ll=oui.os.mobile?oui.getTop().formBizControls.getData4string():oui.getTop().$("#form-right-iframe-flow")[0].contentWindow.formBizControls.getData4string()}catch(l1l1l111){}return l1l111ll||(l1l111ll="-1"),l1l111ll},fillbackFormRight:function(I1l111l1){try{oui.getTop().formBizControls.fillbackRight(I1l111l1)}catch(l1l1l111){}},clearNodePropOuiControls:function(){var l1l111l1=this,l1l1l111=l1l111l1.editPropDialog.attr("chooseTypeOuiId"),I1I11II11=l1l111l1.editPropDialog.attr("nodeDisplayNameOuiId");l1l1l111&&oui.getTop().oui.clearByOuiId(l1l1l111),I1I11II11&&oui.getTop().oui.clearByOuiId(I1I11II11)},updateNodePropOuiIds:function(){var I1I111Il=this,l1l1l11I=oui.getTop().oui.getById("chooseType"),I1l11ll11=oui.getTop().oui.getById("nodeDisplayName");l1l1l11I&&I1I111Il.editPropDialog.attr("chooseTypeOuiId",l1l1l11I.attr("ouiId")),I1l11ll11&&I1I111Il.editPropDialog.attr("nodeDisplayNameOuiId",I1l11ll11.attr("ouiId"));var I1lllll1=I1I111Il.editPropDialog.attr("nodeId"),I1I1II11l=I1I111Il.getIndexByNodeId(I1lllll1),l1I1111II=I1I111Il.flowData.workFlowNodeList[I1I1II11l].formRight;if(l1I1111II||(l1I1111II="-1",0==I1I1II11l&&(l1I1111II="-2")),I1I111Il.flowData.workFlowNodeList[I1I1II11l].formRight=l1I1111II,oui.os.mobile){I1I111Il.fillbackFormRight(l1I1111II);var l1III1III=$(I1I111Il.editPropDialog.getEl()),I1l1l1ll=l1III1III.find(".oui-html-dialog-content");I1l1l1ll.hasClass("flow-ui-nodeProps-dialog-box")||I1l1l1ll.addClass("flow-ui-nodeProps-dialog-box")}},event2cancelEditProp:function(I1I111Il){var I1I1I111=this;return I1I1I111.hideContextMenu&&I1I1I111.hideContextMenu(),!1},event2setLineCondition:function(l1l111l1){var I1I1I11l=this,l1I11II1l=$(l1l111l1.el).attr("fromId"),l1IIIII1=$(l1l111l1.el).attr("toId");if(l1I11II1l&&l1IIIII1){var l1I1II11l=I1I1I11l.nodeIdMap[l1I11II1l],I1l1111lI=I1I1I11l.nodeIdMap[l1IIIII1];l1I1II11l&&I1l1111lI&&!l1I1II11l.isSplit}},event2mouseenterJoin:function(I1l111ll){var l1I1I11I=this,l1I11II1l=l1I1I11I.getFlowUi(),I1lllll1=I1l111ll.el;$(I1lllll1).attr("href",l1I11II1l.config.basePath+l1I1I11I.getJoinImgSrc(!0));var I1l1ll11l=$(I1l111ll.el).attr("nodeId"),l1l1111ll=(l1I1I11I.nodeIdMap[I1l1ll11l],l1I1I11I.hasElWidth(I1l111ll.el));oui.showTips({el:I1l111ll.el,content:"添加节点",left:l1l1111ll?0:8,top:l1l1111ll?8:26,mustRender:!0,singleton:!0})},event2leaveJoin:function(I1l111l1){var l1l1l111=this,l1I11II11=l1l1l111.getFlowUi(),l1lllllI=I1l111l1.el;$(l1lllllI).attr("href",l1I11II11.config.basePath+l1l1l111.getJoinImgSrc(!1)),oui.hideTips()},hasElWidth:function(I1l111lI){var I1l1l111=$(I1l111lI).width();return 0==I1l1l111?!1:!0},event2mouseenterLine:function(I1I111Il){var l1I1I111=this,l1I11II1l=l1I1I111.getFlowUi(),I1lllll1=$(I1I111Il.el).attr("fromId"),l1I1II111=$(I1I111Il.el).attr("toId");if(I1lllll1&&l1I1II111){var I1I1111II=l1I1I111.nodeIdMap[I1lllll1],l1lll1llI=l1I1I111.nodeIdMap[l1I1II111];if(I1I1111II&&l1lll1llI&&(I1I1111II.isSplit||l1I1I111.isIndex)&&!l1I1I111.design4Runtime&&!l1lll1llI.isSplit){var l1l1l1l1,I1111I1l=I1I111Il.el;$(I1I111Il.el).is("image")?(I1111I1l=$(I1I111Il.el).parent().find("path[fromid="+I1lllll1+"][toid="+l1I1II111+"]")[0],l1l1l1l1=I1I111Il.el,l1l1l1l1&&$(l1l1l1l1).attr("href",l1I11II1l.config.basePath+l1I1I111.getSplitImgSrc(!0))):(l1l1l1l1=$(I1I111Il.el).parent().find("image[fromid="+I1lllll1+"][toid="+l1I1II111+"]")[0],l1l1l1l1&&$(l1l1l1l1).attr("href",l1I11II1l.config.basePath+l1I1I111.getSplitImgSrc(!0)));var I1I1111l="设置分支条件";if(l1I1I111.isIndex||l1I1I111.isPreview?(I1I1111l="查看分支条件",l1lll1llI&&l1lll1llI.notifyNode&&(I1I1111l="知会节点无分支条件")):l1lll1llI&&l1lll1llI.notifyNode&&(I1I1111l="知会节点不能设置分支条件"),l1l1l1l1){var I1ll111l1=l1I1I111.hasElWidth(l1l1l1l1);oui.showTips({el:l1l1l1l1,content:I1I1111l,left:I1ll111l1?0:8,top:I1ll111l1?8:26,mustRender:!0,singleton:!0})}$(I1111I1l).attr("stroke-width","5"),$(I1111I1l).css("stroke-width","5"),$(I1111I1l).attr("stroke","#ffaa1f"),$(I1111I1l).css("stroke","#ffaa1f")}}},event2leaveLine:function(I1l111l1){var I1I1I11I=this,l1l11ll11=I1I1I11I.getFlowUi(),I1lllll1=$(I1l111l1.el).attr("fromId"),I1l1ll11I=$(I1l111l1.el).attr("toId");if(I1lllll1&&I1l1ll11I){var l1I1111Il=I1I1I11I.nodeIdMap[I1lllll1],l1III1III=I1I1I11I.nodeIdMap[I1l1ll11I];if(l1I1111Il&&l1III1III&&(l1I1111Il.isSplit||I1I1I11I.isIndex)&&!l1III1III.isSplit){var I1l1l1l1=I1l111l1.el;if($(I1l111l1.el).is("image")){I1l1l1l1=$(I1l111l1.el).parent().find("path[fromid="+I1lllll1+"][toid="+I1l1ll11I+"]")[0];var l1111I1I=I1l111l1.el;$(l1111I1I).attr("href",l1l11ll11.config.basePath+I1I1I11I.getSplitImgSrc(!1))}else{var l1111I1I=$(I1l111l1.el).parent().find("image[fromid="+I1lllll1+"][toid="+I1l1ll11I+"]")[0];$(l1111I1I).attr("href",l1l11ll11.config.basePath+I1I1I11I.getSplitImgSrc(!1))}oui.hideTips(),$(I1l1l1l1).attr("stroke-width","3"),$(I1l1l1l1).css("stroke-width","3"),$(I1l1l1l1).attr("stroke","#b7b7b7"),$(I1l1l1l1).css("stroke","#b7b7b7")}}},removeBranchLine:function(l1l111l1){$(l1l111l1).attr("stroke-dasharray","")},renderBranchLine:function(l1I111I1){$(l1I111I1).attr("stroke-dasharray","10,3"),$(l1I111I1).attr("stroke-width","3"),$(l1I111I1).css("stroke-width","3")},hasBranch:function(I1l111lI){return I1l111lI&&I1l111lI.branchObject?!0:!1},event2setAutoBranch:function(l1l111ll){var I1l1l11I=this;return I1l1l11I.isAutoBranch=!0,I1l1l11I.event2setNodeBranch(l1l111ll),!1},event2setSelectBranch:function(I1l111lI){var I1l1l11I=this;return I1l1l11I.isAutoBranch=!1,I1l1l11I.event2setNodeBranch(I1l111lI),!1},event2deleteBranch:function(I1l111l1){var I1l1l111=this,I1I11II1l=$(I1l111l1.el).attr("nodeId"),I1lllll1=I1l1l111.getIndexByNodeId(I1I11II1l);if(!(0>I1lllll1)){var l1l1ll11I=I1l1l111.flowData.workFlowNodeList[I1lllll1];return l1l1ll11I.branchObject=null,I1l1l111.refresh(),!1}},event2setNodeBranch:function(I1l111l1){var l1l1l111=this,l1I11II1l=l1l1l111.getFlowUi(),I1IIIIIl=$(I1l111l1.el).attr("nodeId"),l1I1II11l=l1l1l111.nodeIdMap[I1IIIIIl];l1l1l111.branchSetting={node:l1I1II11l};var l1I1111I1=l1I11II1l.render("flow-tpl-branchSetting",!0);l1l1l111.clear4topDialogLastCache();var l1lll1ll1,I1l1l1l1=l1l1l111.branchEditActions;return l1lll1ll1=l1l1l111.isAutoBranch?"自动分支条件":"手动选择分支",l1l1l111.editBranchDialog=oui.getTop().oui.showHTMLDialog({title:l1lll1ll1,dialog4bizType:"workflow",contentStyle:"width:690px;",content:l1I1111I1,center:!1,nodeId:l1I1II11l.id,actions:I1l1l1l1}),oui.getTop().oui.parse(),l1l1l111.fillbackNodeBranch(l1I1II11l.id),!1},clear4topDialogLastCache:function(){oui.getTop().oui.clearBy(function(I1I111II){return I1I111II&&I1I111II.attr&&"workflow"==I1I111II.attr("dialog4bizType")?(oui.getTop().$(I1I111II.getEl()).remove(),!0):!1})},fillbackNodeBranch:function(I1I111I1){var l1l1l11I=this,l1I11II11=l1l1l11I.getIndexByNodeId(I1I111I1);if(!(0>l1I11II11)){var l1IIIII1=l1l1l11I.workFlowNodeList,l1l1ll11l=l1IIIII1[l1I11II11],l1l1111l1=oui.getTop().oui.getById("condition4branch"),l1lll1llI=l1l1ll11l.branchObject&&l1l1ll11l.branchObject.conditionList?l1l1ll11l.branchObject.conditionList:[];l1l1111l1&&l1l1111l1.fillback(l1lll1llI)}},updateNodeBranch:function(){var I1l111l1=this,l1I1I111=I1l111l1.editBranchDialog;if(l1I1I111){var I1l11ll11=l1I1I111.attr("nodeId"),l1IIIII1=I1l111l1.getIndexByNodeId(I1l11ll11);if(!(0>l1IIIII1)){var l1I1II111=I1l111l1.flowData.workFlowNodeList[l1IIIII1],I1I1111Il=oui.getTop().oui.getById("nodeBranchDes"),I1III1II1="";if(I1I1111Il&&(I1III1II1=I1I1111Il.attr("value"),I1III1II1=$.trim(I1III1II1)),!I1III1II1)return $(l1I1I111.getEl()).find("#condition4branch-error").html("分支描述不能为空"),!1;var I1I1I1II=null,I1111I1l=oui.getTop().oui.getById("condition4branch"),l1I11111="";if(I1111I1l&&(I1I1I1II=I1111I1l.getConditions(),l1I11111=I1111I1l.getConditionInfo()),I1l111l1.isAutoBranch){if(!I1I1I1II||!I1I1I1II.length)return l1I1II111.branchObject={des:I1III1II1,autoBranch:!1,conditionList:null},$(l1I1I111.getEl()).find("#condition4branch-error-condition").html("分支条件不能为空"),!1;l1I1II111.branchObject={des:I1III1II1,autoBranch:I1l111l1.isAutoBranch,conditionList:I1I1I1II,conditionInfo:l1I11111}}else l1I1II111.branchObject={des:I1III1II1,autoBranch:!1,conditionList:null};I1l111l1.refresh()}}},updateNotifyFunBind:function(){var I1l111ll=this;oui.getTop().oui.setPageParam("flow_node_update_isNotify",function(l1l111l1){var I1I1I111=l1l111l1.attr("value"),l1I11II1l=l1l111l1.attr("otherAttrs");l1I11II1l=oui.parseJson(l1I11II1l);var l1lllllI=(I1l111ll.nodeProps.node||{},oui.getTop().oui.getById("nodeRight")),l1I1II111=I1l111ll.findNodeRightValue().split(","),I1l1111lI=oui.getTop().oui.getById("chooseType"),I1III1IIl=I1l111ll.nodeProps.node||{};if(I1I1I111){if(l1lllllI&&l1lllllI.attr("data",l1I11II1l.notifyJson),I1l1111lI){var l1I1I1I1=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1?I1l111ll.WorkFlowChooseType.single.value:I1l111ll.WorkFlowChooseType.all.value;I1l1111lI.attr("value",l1I1I1I1),I1l1111lI.attr("right","readOnly"),I1l1111lI.render()}}else if(l1lllllI&&l1lllllI.attr("data",l1I11II1l.nodeRightItemsJson),I1l1111lI){I1l1111lI.attr("right","edit");var l1I1I1I1=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1?I1l111ll.WorkFlowChooseType.single.value:I1l111ll.WorkFlowChooseType.all.value;I1l1111lI.attr("value",l1I1I1I1);var I1111I1I=I1III1IIl.nodeType==I1l111ll.WorkFlowNodeType.person.value||"relRole_sender"==I1III1IIl.nodeId||I1III1IIl.nodeId.indexOf("member#")>-1&&I1III1IIl.nodeType!=I1l111ll.WorkFlowNodeType.formControl.value||I1III1IIl.nodeId.indexOf("deptLeader#")>-1;I1111I1I&&I1l1111lI.attr("right","readOnly"),I1l1111lI.render()}var l1l1111l=l1lllllI.attr("data")||[],I1II111I1=[];for(var l1ll1lllI in l1l1111l)l1I1II111.indexOf(l1l1111l[l1ll1lllI].value+"")<0||I1II111I1.push(l1l1111l[l1ll1lllI].value);l1lllllI.attr("value",I1II111I1.join(",")),l1lllllI.render()})},event2editProp:function(l1l111ll){var I1l1l11I=this,l1l11ll11=I1l1l11I.getFlowUi(),l1IIIIII=$(l1l111ll.el).attr("nodeId"),I1I1II11l=I1l1l11I.nodeIdMap[l1IIIIII];I1l1l11I.nodeProps={node:I1I1II11l},I1I1II11l.formRight||(I1I1II11l.isRoot?I1I1II11l.formRight="-2":I1I1II11l.formRight="-1"),I1l1l11I.clear4topDialogLastCache();var I1I1111II=l1l11ll11.render("flow-tpl-nodeProps",!0);I1l1l11I.updateNotifyFunBind();var l1lll1lll=I1l1l11I.nodePropDialogActions;return I1l1l11I.editPropDialog=oui.getTop().oui.showHTMLDialog({title:"节点属性",contentStyle:"width:1050px",dialog4bizType:"workflow",content:I1I1111II,center:!1,nodeId:I1I1II11l.id,actions:l1lll1lll}),oui.getTop().oui.parse(),I1l1l11I.updateNodePropOuiIds(),!1},showNodeProps:function(){},showTipsMsg4nodeDisplayName:function(l1I111Il){var l1I1I11I=this,l1I11II1l=$(l1I111Il.el).attr("nodeId"),I1lllll1=l1I1I11I.nodeIdMap[l1I11II1l],I1l1ll11l=$("rect[nodeid="+l1I11II1l+"]")[0],I1l1111lI=l1I1I11I.hasElWidth(I1l1ll11l);oui.showTips({el:I1l1ll11l,content:oui.escapeStringToHTML(I1lllll1.name||""),left:I1l1111lI?0:32.5,top:I1l1111lI?8:70,mustRender:!0,singleton:!0})},hideTips4nodeDisplayName:function(I1I111Il){oui.hideTips()},putContextMenu4event:function(I1l111lI){var l1I1I11I=I1l111lI.e;l1I1I11I.stopPropagation&&l1I1I11I.stopPropagation(),l1I1I11I.preventDefault&&l1I1I11I.preventDefault();var I1l11ll11,I1llllll=this,I1l1ll11l=!1,l1I1111Il=$(I1l111lI.el).attr("toId");l1I1111Il?(I1l1ll11l=!0,I1l11ll11=l1I1111Il):I1l11ll11=$(I1l111lI.el).attr("nodeId");var I1III1II1="text-"+I1l11ll11,l1l1l1l1=I1llllll.nodeIdMap[I1l11ll11],l1111l1l=I1llllll.Events.click,I1I1111l=I1llllll.contextMenus;I1I1111l||(I1I1111l=I1llllll.contextMenus={}),I1I1111l.menuClick=l1111l1l,I1I1111l.nodeId=I1l11ll11,I1I1111l.isRoot=l1l1l1l1.isRoot?!0:!1,I1I1111l.node=l1l1l1l1,I1I1111l.isFirst=I1l11ll11==I1llllll.flowData.workFlowNodeList[0].id,I1I1111l.hasNodeMembers=l1l1l1l1.nodePersonList&&l1l1l1l1.nodePersonList.length>0&&"person"!=l1l1l1l1.nodeType,I1I1111l.hasComments=l1l1l1l1.comments&&l1l1l1l1.comments.length>0,I1I1111l.isLine=I1l1ll11l;var I1ll111ll,I1II1IIIl=I1llllll.getFlowUi(),I11l1ll1=I1II1IIIl.render("flow-ui-contextMenus",!0);I1l1ll11l?I1ll111ll=I1l111lI.el:(I1ll111ll="[nodeTextId="+I1III1II1+"][nodeId="+I1l11ll11+"]",I1ll111ll="rect[nodeId="+I1l11ll11+"]",I1ll111ll=I1ll111ll.toLowerCase());var l111l11I=I1llllll.nodeWidth/2,I1IIII11=I1llllll.nodeHeight-2;return{isLine:I1l1ll11l,nodeId:I1l11ll11,el:$(I1ll111ll),left:l111l11I,top:I1IIII11,content:I11l1ll1}},event2contextMenu:function(I1I111I1){},event2HastenWork:function(I1l111lI){var I1I1I11I=$(I1l111lI.el).attr("nodeId"),I1I11II11=oui.getNS().WorkflowRuntime||window.parent.oui.getNS().WorkflowRuntime||{};I1I11II11.event2HastenWork&&I1I11II11.event2HastenWork(I1I1I11I)},addNodes4Serial:function(I1l111lI,l1l1l11l,l1l11ll1I){for(var I1lllll1=this,l1I1II111=0,l1l1111l1=l1l1l11l.length;l1l1111l1>l1I1II111;l1I1II111++)0==l1I1II111?I1lllll1.addNodes([l1l1l11l[l1I1II111]],I1l111lI,!1,l1l11ll1I):I1lllll1.addNodes([l1l1l11l[l1I1II111]],l1l1l11l[l1I1II111-1].id)},updateChildNode4brotherJoin:function(l1l111ll,I1I1I11l,l1I11II11){var l1IIIIIl=this;if(I1I1I11l&&!I1I1I11l.isJoin){I1I1I11l.pid=l1I11II11;var l1I1II11l=l1IIIIIl.getIndexByNodeId(I1I1I11l.id);l1IIIIIl.flowData.workFlowNodeList[l1I1II11l].pid=l1I11II11}else if(I1I1I11l&&I1I1I11l.isJoin){var l1l1111lI=I1I1I11l.pid?(I1I1I11l.pid+"").split(","):[],I1III1II1=l1l1111lI.indexOf(l1l111ll.id+"");I1III1II1>=0?l1l1111lI.splice(I1III1II1,1,l1I11II11):l1l1111lI.push(l1I11II11),I1I1I11l.pid=l1l1111lI.join(",");var l1I1II11l=l1IIIIIl.getIndexByNodeId(I1I1I11l.id);l1IIIIIl.flowData.workFlowNodeList[l1I1II11l].pid=l1l1111lI.join(",")}},getDefaultChooseTypeByNodeType:function(I1I111I1,I1I1I111){var I1l11ll11=this;return I1I1I111==I1l11ll11.WorkFlowNodeType.person.value||"relRole_sender"==I1I111I1||I1I111I1.indexOf("member#")>-1&&I1I1I111!=I1l11ll11.WorkFlowNodeType.formControl.value||I1I111I1.indexOf("deptLeader#")>-1?I1l11ll11.WorkFlowChooseType.single.value:I1l11ll11.WorkFlowChooseType.all.value},createArrayNodesByPersonSelectedNodes:function(I1I111I1){if(!I1I111I1)return[];for(var l1I1I11l=[],l1l11ll1I=this,I1IIIII1=0,l1l1ll11l=I1I111I1.length;l1l1ll11l>I1IIIII1;I1IIIII1++)l1I1I11l.push({nodeId:I1I111I1[I1IIIII1].id,nodeName:I1I111I1[I1IIIII1].name,nodeRight:l1l11ll1I.findNodeRightValue({}),nodeDisplayName:I1I111I1[I1IIIII1].name,name:I1I111I1[I1IIIII1].name,chooseType:l1l11ll1I.getDefaultChooseTypeByNodeType(I1I111I1[I1IIIII1].id,I1I111I1[I1IIIII1].typeFlag),nodeType:I1I111I1[I1IIIII1].typeFlag});return l1I1I11l},getJoinIdBySplitId:function(l1I111Il){var I1l1l111=this,I1I11II11=I1l1l111.nodeIdMap[l1I111Il],l1IIIIIl=I1l1l111.findJoin(I1I11II11);return l1IIIIIl?l1IIIIIl.id:""},getCurrBranchIndex:function(l1l111lI){var I1l1l11I=this;if(!l1l111lI)return-1;if(!l1l111lI.parents)return-1;if(!l1l111lI.parents[0])return-1;var I1I11II1I=l1l111lI.parents[0].id,l1IIIIIl=I1l1l11I.getJoinIdBySplitId(I1I11II1I),I1I1II11l=I1l1l11I.getIndexByNodeId(l1IIIIIl),I1I1111Il=I1l1l11I.flowData.workFlowNodeList[I1I1II11l],I1III1IIl=I1I1111Il.pid?I1I1111Il.pid.split(","):[],I1l1l1l1=I1l1l11I.getCurrBranchNodeByFirstNode(l1l111lI);return I1l1l1l1?I1III1IIl.indexOf(I1l1l1l1.id):-1},getCurrBranchNodeByFirstNode:function(I1I111I1){var l1I1I111=this;if(!I1I111I1)return null;if(!I1I111I1.parents)return null;if(!I1I111I1.parents[0])return null;var l1l11ll11=I1I111I1.parents[0].id,l1IIIIIl=l1I1I111.getJoinIdBySplitId(l1l11ll11),I1I1II11I=l1I1I111.getCurrBranchNode(I1I111I1,I1I111I1.children,l1l11ll11,l1IIIIIl);return I1I1II11I},getCurrBranchNode:function(l1l111ll,l1l1l11l,l1l11ll1I,I1llllll){var l1I1II11l=this;if(l1l1l11l[0].id==I1llllll)return l1l111ll;if(!l1l1l11l||!l1l1l11l.length)return l1l111ll;for(var I1I1111II=0,l1lll1llI=l1l1l11l.length;l1lll1llI>I1I1111II;I1I1111II++){var I1l1l1ll=l1I1II11l.getCurrBranchNode(l1l1l11l[I1I1111II],l1l1l11l[I1I1111II].children,l1l11ll1I,I1llllll);if(I1l1l1ll===l1l1l11l[I1I1111II])return I1l1l1ll;if(!I1l1l1ll)return l1l1l11l[I1I1111II]}return null},selectBrotherOkFun:function(I1l111lI,I1l1l11l){var I1I11II11=this,l1lllllI=I1l1l11l.data,l1I1II111=I1l1l11l.flowType,I1I1111I1=!1;if(l1I1II111+""==I1I11II11.ADD_TYPE.serial+""&&(I1I1111I1=!0),l1lllllI&&!(l1lllllI.length<=0)){var I1III1II1=I1I11II11.createArrayNodesByPersonSelectedNodes(l1lllllI),l1l1l1l1=I1I11II11.nodeIdMap[I1l111lI],l1111l1I=l1l1l1l1.parents[0].id,l1I1111I=l1l1l1l1.children[0];if(l1l1l1l1.parents[0]&&l1l1l1l1.parents[0].isSplit){var l1II111I1=l1l1l1l1.parents[0].id,I1II1III1=I1I11II11.getJoinIdBySplitId(l1II111I1),l11l1llI=I1I11II11.getCurrBranchIndex(l1l1l1l1);l11l1llI=-1;var l111l11l=I1I11II11.getIndexByNodeId(l1l1l1l1.id);if(!I1I1111I1&&I1III1II1.length>0){I1I11II11.addNodes(I1III1II1,l1II111I1,!1,l111l11l,!0);for(var l1IIII1l=[],l1lllll11=0,l1l111llI=I1III1II1.length;l1l111llI>l1lllll11;l1lllll11++)l1IIII1l.push(I1III1II1[l1lllll11].id);I1I11II11.updateJoinNodeParentIds(I1II1III1,l1IIII1l,l11l1llI)}else I1I11II11.addNodes4Serial(l1II111I1,I1III1II1,l111l11l,!0),I1I11II11.updateJoinNodeParentIds(I1II1III1,[I1III1II1[I1III1II1.length-1].id],l11l1llI)}else{var I1III1I1=I1I11II11.createSplitNode(l1111l1I);l1l1l1l1.pid=I1III1I1;var I11III11=I1I11II11.getIndexByNodeId(l1l1l1l1.id);if(I1I11II11.flowData.workFlowNodeList[I11III11].pid=I1III1I1,!I1I1111I1&&I1III1II1.length>0){var l111l11l=I1I11II11.getIndexByNodeId(l1l1l1l1.id);I1I11II11.addNodes(I1III1II1,I1III1I1,!1);for(var I1II1III1=I1I11II11.createJoinNode(I1l111lI),l1IIII1l=[],l1lllll11=0,l1l111llI=I1III1II1.length;l1l111llI>l1lllll11;l1lllll11++)l1IIII1l.push(I1III1II1[l1lllll11].id);I1I11II11.updateJoinNodeParentIds(I1II1III1,l1IIII1l),I1I11II11.updateChildNode4brotherJoin(l1l1l1l1,l1I1111I,I1II1III1);var l1111111=I1I11II11.getIndexByNodeId(l1l1l1l1.id),l1l1ll1lI=I1I11II11.flowData.workFlowNodeList[l1111111];I1I11II11.flowData.workFlowNodeList.splice(l1111111,1);var I1ll1111=I1I11II11.getIndexByNodeId(I1III1II1[0].id);I1I11II11.flowData.workFlowNodeList.splice(I1ll1111,0,l1l1ll1lI)}else{I1I11II11.addNodes4Serial(I1III1I1,I1III1II1);var I1II1III1=I1I11II11.createJoinNode(I1l111lI);I1I11II11.updateJoinNodeParentIds(I1II1III1,[I1III1II1[I1III1II1.length-1].id]),I1I11II11.updateChildNode4brotherJoin(l1l1l1l1,l1I1111I,I1II1III1);var l1111111=I1I11II11.getIndexByNodeId(l1l1l1l1.id),l1l1ll1lI=I1I11II11.flowData.workFlowNodeList[l1111111];I1I11II11.flowData.workFlowNodeList.splice(l1111111,1);var I1ll1111=I1I11II11.getIndexByNodeId(I1III1II1[0].id);I1I11II11.flowData.workFlowNodeList.splice(I1ll1111,0,l1l1ll1lI)}}I1I11II11.refresh()}},updateJoinNodeParentIds:function(I1l111lI,l1l1l11I,I1l11ll1l){if(l1l1l11I&&l1l1l11I.length){var I1lllllI=this,l1l1ll111=I1lllllI.getIndexByNodeId(I1l111lI),l1I1111I1=I1lllllI.flowData.workFlowNodeList[l1l1ll111].pid+"";l1I1111I1=l1I1111I1?l1I1111I1.split(","):[];var I1lll1llI=[];if(I1lll1llI="string"==typeof l1l1l11I?l1l1l11I?(l1l1l11I+"").split(","):[]:l1l1l11I,"number"==typeof I1l11ll1l&&I1l11ll1l>-1)for(var l1l1l1lI=0,l1111l1l=I1lll1llI.length;l1111l1l>l1l1l1lI;l1l1l1lI++)l1I1111I1.splice(I1l11ll1l+l1l1l1lI+1,0,I1lll1llI[l1l1l1lI]);else for(var l1l1l1lI=0,l1111l1l=I1lll1llI.length;l1111l1l>l1l1l1lI;l1l1l1lI++)l1I1111I1.push(I1lll1llI[l1l1l1lI]);I1lllllI.flowData.workFlowNodeList[l1l1ll111].pid=l1I1111I1.join(",")}},addNodes4SelfOrBrother:function(l1l111lI,I1I1I11I,l1l11ll11){var l1lllll1=this;return l1l11ll11?l1lllll1.selectBrotherOkFun(l1l111lI,I1I1I11I):l1lllll1.selectOkFun(l1l111lI,I1I1I11I),l1lllll1.getFlowData()},selectOkFun:function(I1I111I1,l1I1I11I){var l1I11II1l=this,l1lllll1=l1I1I11I.data,I1l1ll11l=l1I1I11I.flowType,l1l1111ll=!1;if(I1l1ll11l+""==l1I11II1l.ADD_TYPE.serial+""&&(l1l1111ll=!0),l1lllll1&&!(l1lllll1.length<=0)){for(var I1III1II1=[],I1l1l1lI=0,I1111l1l=l1lllll1.length;I1111l1l>I1l1l1lI;I1l1l1lI++)I1III1II1.push({nodeId:l1lllll1[I1l1l1lI].id,nodeName:l1lllll1[I1l1l1lI].name,nodeDisplayName:l1lllll1[I1l1l1lI].name,nodeRight:l1I11II1l.findNodeRightValue({}),name:l1lllll1[I1l1l1lI].name,chooseType:l1I11II1l.getDefaultChooseTypeByNodeType(l1lllll1[I1l1l1lI].id,l1lllll1[I1l1l1lI].typeFlag),nodeType:l1lllll1[I1l1l1lI].typeFlag});l1I11II1l.nodeIdMap[I1I111I1];if(!l1l1111ll&&I1III1II1.length>1){var I1l1111l=l1I11II1l.addNodes(I1III1II1,I1I111I1,!0);l1I11II1l.updateParentId(I1I111I1,I1l1111l,!0)}else{for(var I1l1l1lI=0,I1111l1l=I1III1II1.length;I1111l1l>I1l1l1lI;I1l1l1lI++)0==I1l1l1lI?l1I11II1l.addNodes([I1III1II1[I1l1l1lI]],I1I111I1):l1I11II1l.addNodes([I1III1II1[I1l1l1lI]],I1III1II1[I1l1l1lI-1].id);l1I11II1l.updateParentId(I1I111I1,I1III1II1[I1III1II1.length-1].id)}l1I11II1l.refresh()}},selectBrotherOkCallback:function(I1l111lI){var I1l1l111=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,I1l11ll11=I1l1l111.attr("nodeId"),I1lllll1=this;I1lllll1.selectBrotherOkFun(I1l11ll11,I1l111lI)},selectOkCallback:function(l1I111II){var I1I1I11I=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,I1I11II1l=I1I1I11I.attr("nodeId"),I1llllll=this;I1llllll.selectOkFun(I1I11II1l,l1I111II)},replaceNodeFun:function(l1l111lI,l1l1l111){for(var l1l11ll1l=this,l1IIIIIl=l1l1l111.data,l1I1II11I=[],l1I1111II=0,I1lll1llI=l1IIIIIl.length;I1lll1llI>l1I1111II;l1I1111II++)l1I1II11I.push({nodeId:l1IIIIIl[l1I1111II].id,name:l1IIIIIl[l1I1111II].name,nodeName:l1IIIIIl[l1I1111II].name,nodeDisplayName:l1IIIIIl[l1I1111II].name,nodeType:l1IIIIIl[l1I1111II].typeFlag});1==l1I1II11I.length&&(l1l11ll1l.replaceNodeById(l1I1II11I[0],l1l111lI),l1l11ll1l.refresh())},replaceCallBack:function(l1l111ll){var l1I1I11I=this,l1l11ll1I=oui.getTop().oui.$.ctrl.dialog.SelectPersonDialog,l1llllll=l1l11ll1I.attr("nodeId");l1I1I11I.replaceNodeFun(l1llllll,l1l111ll)},findSelectPersonTabs4workflow:function(){var l1l111ll=oui.getParam("design4Runtime"),I1l1l11I="";return I1l1l11I=l1l111ll&&"true"==l1l111ll||"boolean"==typeof l1l111ll&&l1l111ll?"3":"3,4,1,2,5"},event2replaceNode:function(I1I111Il){var I1l1l11I=$(I1I111Il.el).attr("nodeId"),I1I11II1I=this,I1IIIIII=I1I11II1I.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:I1IIIIII,nodeId:I1l1l11I,title:"替换节点",isAll:!1,allowCompany:!1,isFlow:!0,fillback:[],isMulti:!1,maxSize:1,extend:I1I11II1I.findSelectPersonExtend(),operType:"replace",callbackOk:function(I1I111I1){I1I11II1I.replaceCallBack(I1I111I1)},callbackCancel:function(l1I111II){}}),!1},event2addBrotherNode:function(I1l111lI){var I1l1l11I=$(I1l111lI.el).attr("nodeId"),l1l11ll11=this,l1IIIIIl=l1l11ll11.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:l1IIIIIl,isFlow:!0,isAll:!1,allowCompany:!1,fillback:[],maxSize:-1,duplicate:!1,extend:l1l11ll11.findSelectPersonExtend(),nodeId:I1l1l11I,title:"节点选择",operType:"addBrother",callbackOk:function(I1I111II,l1l1l11I){l1l11ll11.selectBrotherOkCallback(I1I111II,I1l1l11I)},callbackCancel:function(){}}),!1},findSelectPersonExtend:function(){var I1l111ll=this;if(!I1l111ll.flowData.bizId)return null;var I1I1I11l=oui.getParam("design4Runtime");if(I1I1I11l&&"true"==I1I1I11l||"boolean"==typeof I1I1I11l&&I1I1I11l)return null;var I1I11II1l={tabs:[{title:"表单控件",type:"formControl",icon:"forms",des:"表单内组织机构控件",url:oui.addParams(oui.getPageParam("selectPersonUrl"),{formId:I1l111ll.flowData.bizId,subFormId:"",type:"3",showSub:!1,containMulti:"true,false"})}]};return I1I11II1l},event2addNode:function(I1I111II){var l1I1I111=$(I1I111II.el).attr("nodeId"),I1I11II11=this,I1lllll1=I1I11II11.findSelectPersonTabs4workflow();return oui.getTop().oui.selectPerson({showType:5,filterSelf:!1,defaultTabIndex:1,tabs:I1lllll1,isFlow:!0,isAll:!1,allowCompany:!1,fillback:[],maxSize:-1,extend:I1I11II11.findSelectPersonExtend(),nodeId:l1I1I111,title:"节点选择",operType:"add",callbackOk:function(l1I111Il,I1I1I111){I1I11II11.selectOkCallback(l1I111Il)},callbackCancel:function(){}}),!1},zoomPx:0,event2ZoomBig:function(I1l111lI){var l1l1l111=this;l1l1l111.zoomPx+=10,l1l1l111.zoomScale=(l1l1l111.mc_width+l1l1l111.zoomPx)/l1l1l111.mc_width,$(l1l1l111.getFlowUi().RaphaelObj.canvas).css("zoom",l1l1l111.zoomScale)},event2ZoomSmall:function(l1l111ll){var l1l1l111=this;l1l1l111.zoomPx-=10,l1l1l111.zoomScale=(l1l1l111.mc_width+l1l1l111.zoomPx)/l1l1l111.mc_width,l1l1l111.zoomScale<.5&&(l1l1l111.zoomPx+=10,l1l1l111.zoomScale=(l1l1l111.mc_width+l1l1l111.zoomPx)/l1l1l111.mc_width),$(l1l1l111.getFlowUi().RaphaelObj.canvas).css("zoom",l1l1l111.zoomScale)},updateParentId:function(I1l111ll,l1I1I11l){var I1l11ll1I=this,I1IIIIIl=I1l11ll1I.nodeIdMap[I1l111ll],I1l1ll111=I1l11ll1I.getIdsByParentNode(I1IIIIIl),I1l1111lI=I1l11ll1I.workFlowNodeList;if(!(I1l1ll111.length<=0))for(var l1lll1ll1=0,I1l1l1l1=I1l1111lI.length;I1l1l1l1>l1lll1ll1;l1lll1ll1++)if(I1l1ll111.indexOf(I1l1111lI[l1lll1ll1].id)>=0){var I1111I1l=(I1l1111lI[l1lll1ll1].pid+"").split(","),I1I1111l=I1111I1l.indexOf(I1l111ll+"");"undefined"!=typeof I1l11ll1I.nodeIdMap[l1I1I11l].isSplit&&I1l11ll1I.nodeIdMap[l1I1I11l].isSplit&&I1l1111lI[l1lll1ll1].isJoin?I1111I1l.splice(I1I1111l,1):I1111I1l.splice(I1I1111l,1,l1I1I11l),I1l1111lI[l1lll1ll1].pid=I1111I1l.join(",")}},getIdsByParentNode:function(l1I111Il){for(var l1I1I111=[],I1I11II1I=l1I111Il.children,I1IIIII1=0,I1I1II11I=I1I11II1I.length;I1I1II11I>I1IIIII1;I1IIIII1++)l1I1I111.push(I1I11II1I[I1IIIII1].id);return l1I1I111},event2delNode:function(l1I111Il){var l1I1I11l=this,l1I11II1l=$(l1I111Il.el).attr("nodeId"),l1IIIIII=l1I1I11l.nodeIdMap[l1I11II1l];return l1I1I11l.removeByTreeNode(l1IIIIII),l1I1I11l.refresh(),!1},event2delCurrNode:function(I1I111II){var I1I1I111=this,l1l11ll11=$(I1I111II.el).attr("nodeId"),l1lllllI=I1I1I111.nodeIdMap[l1l11ll11];if(l1lllllI.parents&&1==l1lllllI.parents.length&&l1lllllI.children&&1==l1lllllI.children.length&&2==l1lllllI.parents[0].children.length&&l1lllllI.parents[0].isSplit&&l1lllllI.children[0].isJoin){var l1I1II11I=l1lllllI.parents[0].children;I1I1I111.updateParentId(l1lllllI.parents[0].id,l1lllllI.parents[0].pid),I1I1I111.removeByTreeNode(l1lllllI.parents[0],!0);var l1l1111lI;l1l1111lI=l1lllllI.id+""==l1lllllI.children[0].parents[0].id+""?l1lllllI.children[0].parents[1]:l1lllllI.children[0].parents[0],l1l1111lI.branchObject=null;var l1lll1ll1=I1I1I111.getIndexByNodeId(l1l1111lI.id);I1I1I111.flowData.workFlowNodeList[l1lll1ll1]&&(I1I1I111.flowData.workFlowNodeList[l1lll1ll1].branchObject=null);
for(var I1I1I1Il=0,I1111I11=l1I1II11I.length;I1111I11>I1I1I1Il;I1I1I1Il++)if(l1I1II11I[I1I1I1Il]){l1I1II11I[I1I1I1Il].branchObject=null;var l1l1111l=I1I1I111.getIndexByNodeId(l1I1II11I[I1I1I1Il].id);I1I1I111.flowData.workFlowNodeList[l1l1111l]&&(I1I1I111.flowData.workFlowNodeList[l1l1111l].branchObject=null)}I1I1I111.updateParentId(l1lllllI.children[0].id,l1l1111lI.id),I1I1I111.removeByTreeNode(l1lllllI.children[0],!0)}return I1I1I111.updateParentId(l1l11ll11,l1lllllI.pid),I1I1I111.removeByTreeNode(l1lllllI,!0),I1I1I111.refresh(),!1},createSplitNode:function(l1I111II){var I1l1l11I=this,I1I11II1l=I1l1l11I.workFlowNodeList,I1IIIII1=I1l1l11I.getIndexByNodeId(l1I111II),l1l1ll11l=I1l1l11I.createNewId4server();return I1l1l11I.nodeIdMap[l1l1ll11l]={id:l1l1ll11l,name:"",isSplit:!0,pid:l1I111II},I1I11II1l.splice(I1IIIII1+1,0,I1l1l11I.nodeIdMap[l1l1ll11l]),l1l1ll11l},createJoinNode:function(I1l111ll){var l1I1I111=this,l1I11II1I=l1I1I111.workFlowNodeList,I1lllllI=l1I1I111.getIndexByNodeId(I1l111ll),I1I1II11l=l1I1I111.createNewId4server();return l1I1I111.nodeIdMap[I1I1II11l]={id:I1I1II11l,name:"",isJoin:!0,pid:I1l111ll},l1I11II1I.splice(I1lllllI+1,0,l1I1I111.nodeIdMap[I1I1II11l]),I1I1II11l},addNodes:function(I1I111Il,I1I1I11l,I1I11II1I,l1lllllI,I1I1II11l){var I1l1111l1=this,I1lll1lll=I1l1111l1.workFlowNodeList,I1I1I1I1=I1l1111l1.getIndexByNodeId(I1I1I11l),I1111l1l=[],I1l11111=null;I1I11II1I&&I1I111Il.length>1&&(I1l11111=I1l1111l1.createNewId4server(),I1l1111l1.nodeIdMap[I1l11111]={id:I1l11111,name:"",isSplit:!0,pid:I1I1I11l},I1lll1lll.splice(I1I1I1I1+1,0,I1l1111l1.nodeIdMap[I1l11111]));for(var I1II111Il=0,l1II1III1=I1I111Il.length;l1II1III1>I1II111Il;I1II111Il++)I1I111Il[I1II111Il].id||(I1I111Il[I1II111Il].id=I1l1111l1.createNewId4server()),I1I111Il[I1II111Il].pid=I1l11111?I1l11111:I1I1I11l,I1l1111l1.nodeIdMap[I1I111Il[I1II111Il].id]=I1I111Il[I1II111Il],"number"==typeof l1lllllI&&l1lllllI>-1?I1lll1lll.splice(l1lllllI+I1II111Il+1,0,I1I111Il[I1II111Il]):I1lll1lll.splice(I1l11111?I1I1I1I1+I1II111Il+2:I1I1I1I1+I1II111Il+1,0,I1I111Il[I1II111Il]),I1111l1l.push(I1I111Il[I1II111Il].id);if(I1I11II1I&&I1I111Il.length>1){var l11I1III=I1l1111l1.createNewId4server();return I1l1111l1.nodeIdMap[l11I1III]={id:l11I1III,name:"",isJoin:!0,pid:I1111l1l.join(",")},I1lll1lll.splice(I1I1I1I1+I1II111Il+2,0,I1l1111l1.nodeIdMap[l11I1III]),l11I1III}return null},replaceNodeById:function(I1l111lI,l1I1I11l){var l1I11II1I=this,l1IIIIIl=l1I11II1I.workFlowNodeList,l1l1ll11l=l1I11II1I.getIndexByNodeId(l1I1I11l);if(!(0>l1l1ll11l)){var l1l1111lI=l1IIIIIl[l1l1ll11l].pid;if(I1l111lI.pid=l1l1111lI,I1l111lI.nodeType==l1I11II1I.WorkFlowNodeType.person.value||"relRole_sender"==I1l111lI.nodeId?I1l111lI.chooseType=l1I11II1I.WorkFlowChooseType.single.value:I1l111lI.chooseType=l1IIIIIl[l1l1ll11l].chooseType||l1I11II1I.WorkFlowChooseType.single.value,I1l111lI.formRight=l1IIIIIl[l1l1ll11l].formRight||"-1",I1l111lI.nodeRight=l1IIIIIl[l1l1ll11l].nodeRight||"",I1l111lI.notifyNode=l1IIIIIl[l1l1ll11l].notifyNode||!1,I1l111lI.branchObject=l1IIIIIl[l1l1ll11l].branchObject||null,l1IIIIIl.splice(l1l1ll11l,1,I1l111lI),I1l111lI.id||(I1l111lI.id=l1I11II1I.createNewId4server()),I1l111lI.notifyNode){"string"==typeof I1l111lI.notifyNode&&("true"==I1l111lI.notifyNode?I1l111lI.notifyNode=!0:I1l111lI.notifyNode=!1);var I1lll1ll1=I1l111lI.nodeType==l1I11II1I.WorkFlowNodeType.person.value||"relRole_sender"==I1l111lI.nodeId?l1I11II1I.WorkFlowChooseType.single.value:l1I11II1I.WorkFlowChooseType.all.value;I1l111lI.chooseType=I1lll1ll1}l1I11II1I.nodeIdMap[I1l111lI.id]=I1l111lI,l1I11II1I.updateParentId(l1I1I11l,I1l111lI.id)}},getIndexByNodeId:function(l1I111I1){for(var I1l1l11l=this,l1l11ll1I=I1l1l11l.workFlowNodeList,l1lllll1=0,l1I1II11I=l1l11ll1I.length;l1I1II11I>l1lllll1;l1lllll1++)if(l1l11ll1I[l1lllll1].id+""==l1I111I1+"")return l1lllll1;return-1},removeByTreeNode:function(l1I111I1,l1I1I111){var I1l11ll1I=this,l1lllllI=I1l11ll1I.getIndexByNodeId(l1I111I1.id);if(!(-1>l1lllllI)){var I1l1ll11I=I1l11ll1I.workFlowNodeList,l1l1111ll=[];l1I1I111||(l1l1111ll=I1l11ll1I.getChildrenIdsByTreeNode(l1I111I1));var l1III1III=[];if(l1l1111ll||(l1l1111ll=[]),l1l1111ll.push(l1I111I1.id),1==l1l1111ll.length)return void I1l1ll11I.splice(l1lllllI,1);for(var I1l1l1ll=0,I1111l1l=I1l1ll11I.length;I1111l1l>I1l1l1ll;I1l1l1ll++)l1l1111ll.indexOf(I1l1ll11I[I1l1l1ll].id)>-1&&(I1l1ll11I[I1l1l1ll]=null);for(var I1l1l1ll=0,I1111l1l=I1l1ll11I.length;I1111l1l>I1l1l1ll;I1l1l1ll++)I1l1ll11I[I1l1l1ll]&&l1III1III.push(I1l1ll11I[I1l1l1ll]);I1l11ll1I.workFlowNodeList=l1III1III}},getChildrenIdsByTreeNode:function(l1I111II){for(var I1I1I111=this,I1l11ll1I=(I1I1I111.workFlowNodeList,[]),I1llllll=l1I111II.children,l1I1II111=0,l1I1111I1=I1llllll.length;l1I1111I1>l1I1II111;l1I1II111++){var I1lll1llI=I1I1I111.getChildrenIdsByTreeNode(I1llllll[l1I1II111]);I1l11ll1I.push(I1llllll[l1I1II111].id),I1l11ll1I=I1l11ll1I.concat(I1lll1llI)}return I1l11ll1I},flowIdPrefix:"jsuuid-",createNewId:function(){var l1l111lI=this;return l1l111lI.newId++,l1l111lI.flowIdPrefix+l1l111lI.newId},createNewId4server:function(){var l1I111I1=this;return l1I111I1.newId4server++,l1I111I1.flowIdPrefix+l1I111I1.newId4server},getChildrenByNode:function(I1I111II,I1I1I111,l1l11ll11){var l1lllllI=this,l1l1ll11l=l1l11ll11||0;l1l1ll11l+=1,l1lllllI.nodeIdMap[I1I111II.id]=I1I111II;var I1l1111ll=l1lllllI.createNewId();I1I111II.newId=I1l1111ll;for(var l1lll1llI=[],l1l1l1ll=I1I1I111.length;l1l1l1ll>l1l1ll11l;l1l1ll11l++)(""+I1I1I111[l1l1ll11l].pid).split(",").indexOf(I1I111II.id+"")<0||(l1lll1llI.push(I1I1I111[l1l1ll11l]),I1I1I111[l1l1ll11l].children=l1lllllI.getChildrenByNode(I1I1I111[l1l1ll11l],I1I1I111,l1l1ll11l),l1lllllI.setNodeParents(I1I1I111[l1l1ll11l],I1I111II));return l1lllllI.isVertical&&(l1lll1llI=l1lll1llI.reverse()),l1lll1llI},setNodeParents:function(I1l111l1,I1I1I111){I1l111l1.parents||(I1l111l1.parents=[]);for(var I1l11ll1I=I1l111l1.parents,l1IIIIIl=!1,I1l1ll11l=0,I1l1111ll=I1l11ll1I.length;I1l1111ll>I1l1ll11l;I1l1ll11l++)if(I1l11ll1I[I1l1ll11l].id==I1I1I111.id){l1IIIIIl=!0;break}l1IIIIIl||I1l111l1.parents.push(I1I1I111),I1I1I111&&I1I1I111.isSplit?I1l111l1.isParentSplit=!0:I1l111l1.isParentSplit=!1},createTreeNode:function(l1I111II){var I1I1I111=this,l1I11II11=l1I111II[0];return this.nodeIdMap={},l1I11II11.children=I1I1I111.getChildrenByNode(l1I11II11,l1I111II,0),l1I11II11.parents=[],l1I11II11.isRoot=!0,l1I11II11},createNodeData:function(I1l111lI,I1l1l11I){for(var l1l11ll11,l1lllll1,l1l1ll11l,l1l1111ll=this,l1lll1ll1=l1l1111ll.getFlowUi(),l1l1l1lI={states:{},paths:{}},l1111l1I=l1l1l1lI.states,l1l1111l=l1l1l1lI.paths,I1ll111lI=0,I1II1IIII=I1l111lI.length;I1II1IIII>I1ll111lI;I1ll111lI++){var l11l1llI=I1l111lI[I1ll111lI].newId,l111I11l=null,l1llll1I=null;I1l1l11I?(l1l1ll11l=l1l1111ll.rotate({x:I1l111lI[I1ll111lI].x,y:I1l111lI[I1ll111lI].y},Math.PI/2),l1l11ll11=l1l1ll11l.x,l1lllll1=l1l1ll11l.y):(l1l11ll11=I1l111lI[I1ll111lI].x,l1lllll1=I1l111lI[I1ll111lI].y);var l1IIIII1l;l1IIIII1l=0==I1ll111lI?$.extend(!0,{},l1lll1ll1.config.tools.states.start.attr,{x:l1l11ll11,y:l1lllll1,width:l1l1111ll.nodeWidth,height:l1l1111ll.nodeHeight}):I1l111lI[I1ll111lI].isEnd?$.extend(!0,{},l1lll1ll1.config.tools.states.end.attr,{x:l1l11ll11,y:l1lllll1,width:l1l1111ll.nodeWidth,height:l1l1111ll.nodeHeight}):l1lll1ll1.config.tools.states[I1l111lI[I1ll111lI].nodeType]&&l1l1111ll.WorkFlowNodeType[I1l111lI[I1ll111lI].nodeType]?$.extend(!0,{},l1lll1ll1.config.tools.states[I1l111lI[I1ll111lI].nodeType].attr,{x:l1l11ll11,y:l1lllll1,width:l1l1111ll.nodeWidth,height:l1l1111ll.nodeHeight}):{x:l1l11ll11,y:l1lllll1,width:l1l1111ll.nodeWidth,height:l1l1111ll.nodeHeight};var l1l111ll1=I1l111lI[I1ll111lI].type||"task";if(I1l111lI[I1ll111lI].isSplit){l1l111ll1="split";var l1III1II=l1lll1ll1.config.tools.states.split.attr.width,l11III11=l1lll1ll1.config.tools.states.split.attr.height;l1IIIII1l.x=l1IIIII1l.x+l1IIIII1l.width/2-l1III1II/2,l1IIIII1l.y=l1IIIII1l.y+l1IIIII1l.height/2-l11III11/2,l1IIIII1l.width=l1III1II,l1IIIII1l.height=l11III11}else if(I1l111lI[I1ll111lI].isJoin){l1l111ll1="join";var l1III1II=l1lll1ll1.config.tools.states.join.attr.width,l11III11=l1lll1ll1.config.tools.states.join.attr.height;l1IIIII1l.x=l1IIIII1l.x+l1IIIII1l.width/2-l1III1II/2,l1IIIII1l.y=l1IIIII1l.y+l1IIIII1l.height/2-l11III11/2,l1IIIII1l.width=l1III1II,l1IIIII1l.height=l11III11}else if(I1l111lI[I1ll111lI].isEnd)l1l111ll1="end";else if(l1l1111ll.isIndex){var I111111l=I1l111lI[I1ll111lI].state;if("person"==I1l111lI[I1ll111lI].nodeType){var I1l1ll1ll,I1II111I;I111111l!==l1l1111ll.WorkFlowNodeState.state_done.value||I1l111lI[I1ll111lI].nodePersonList&&I1l111lI[I1ll111lI].nodePersonList.length?(I1l1ll1ll=I1l111lI[I1ll111lI].nodePersonList&&I1l111lI[I1ll111lI].nodePersonList.length>0?I1l111lI[I1ll111lI].nodePersonList[0].state:l1l1111ll.WorkFlowPersonState.state_none.value,I1II111I=I1l111lI[I1ll111lI].nodePersonList&&I1l111lI[I1ll111lI].nodePersonList.length>0?I1l111lI[I1ll111lI].nodePersonList[0].attitude:l1l1111ll.WorkFlowPersonAttitude.no_read.value):(I1l1ll1ll=l1l1111ll.WorkFlowPersonState.state_done.value,I1II111I=l1l1111ll.WorkFlowPersonAttitude.agree.value),l111I11l=l1l1111ll.getStatusImg({nodeType:I1l111lI[I1ll111lI].nodeType,nodeState:I111111l,personState:I1l1ll1ll,personAttitude:I1II111I,isCurrent:I1l111lI[I1ll111lI].id==l1l1111ll.currentNodeId,isFirst:0==I1ll111lI})}else l111I11l=l1l1111ll.getStatusImg({nodeType:I1l111lI[I1ll111lI].nodeType,nodeState:I111111l,isCurrent:I1l111lI[I1ll111lI].id==l1l1111ll.currentNodeId,isFirst:0==I1ll111lI});l1llll1I=l1l1111ll.getHastenWorkImg({nodeType:I1l111lI[I1ll111lI].nodeType,notifyNode:I1l111lI[I1ll111lI].notifyNode,nodeState:I111111l,isCurrent:I1l111lI[I1ll111lI].id==l1l1111ll.currentNodeId,isFirst:0==I1ll111lI}),I1l111lI[I1ll111lI].id==l1l1111ll.currentNodeId&&l1IIIII1l&&(l1IIIII1l.fill="#fa8d00")}var I11IIIIl=l1l1111ll.getNotifyImg({nodeType:I1l111lI[I1ll111lI].nodeType,notifyNode:I1l111lI[I1ll111lI].notifyNode,nodeState:I111111l,isCurrent:I1l111lI[I1ll111lI].id==l1l1111ll.currentNodeId,isFirst:0==I1ll111lI});if(l1111l1I[l11l1llI]={id:I1l111lI[I1ll111lI].id,type:0==I1ll111lI?"start":l1l111ll1,text:{text:I1l111lI[I1ll111lI].name},attr:l1IIIII1l},l111I11l&&l111I11l.indexOf("state_none")<0&&(l1111l1I[l11l1llI].statusImg={width:22,height:22,src:l111I11l}),l1llll1I&&l1llll1I.length>0&&(l1111l1I[l11l1llI].hastenWorkImg={cursor:"pointer",width:38,height:17,src:l1llll1I}),I11IIIIl&&I11IIIIl.length&&(l1111l1I[l11l1llI].notifyImg={width:17,height:17,src:I11IIIIl}),I1l111lI[I1ll111lI].isParentSplit&&!I1l111lI[I1ll111lI].isSplit){var l1IIIIIIl=l1l1111ll.getSplitImgSrc();l1111l1I[l11l1llI].splitImg={pid:I1l111lI[I1ll111lI].pid,cursor:"pointer",width:16,height:16,src:l1IIIIIIl}}else l1111l1I[l11l1llI].splitImg=null;if(I1l111lI[I1ll111lI].isJoin?l1111l1I[l11l1llI].joinImg={cursor:"pointer",width:16,height:16,src:l1l1111ll.getJoinImgSrc()}:l1111l1I[l11l1llI].joinImg=null,l1lll1ll1.config.tools.states[I1l111lI[I1ll111lI].nodeType]&&l1l1111ll.WorkFlowNodeType[I1l111lI[I1ll111lI].nodeType]){var I11II11l=l1lll1ll1.config.tools.states[I1l111lI[I1ll111lI].nodeType].img;I11II11l&&(l1111l1I[l11l1llI].img=I11II11l)}l1l1111ll.nodeIdMap[I1l111lI[I1ll111lI].id].attr=l1IIIII1l,l1l1111ll.buildPathsByNode(I1l111lI[I1ll111lI],l1l1111l,I1l1l11I)}return l1l1l1lI},buildPathsByNode:function(l1l111ll,I1l1l11l,l1l11ll11){for(var I1lllll1,l1l1ll11I=this,l1l1111lI=l1l111ll.lines,I1lll1ll1=0,I1l1l1ll=l1l1111lI.length;I1l1l1ll>I1lll1ll1;I1lll1ll1++){I1lllll1=l1l1ll11I.createNewId(),I1l1l11l[I1lllll1]=l1l1111lI[I1lll1ll1];var l1111l1I=l1l1111lI[I1lll1ll1].dots;l1l11ll11&&(l1l1111lI[I1lll1ll1].dots=l1l1ll11I.getDots4vertical(l1111l1I))}},getDots4vertical:function(I1l111l1){for(var l1l1l11l,l1I11II1l=this,I1IIIIIl=[],I1l1ll111=0,I1I1111II=I1l111l1.length;I1I1111II>I1l1ll111;I1l1ll111++)l1l1l11l=l1I11II1l.rotate(I1l111l1[I1l1ll111],Math.PI/2),l1l1l11l.x+=l1I11II1l.nodeWidth/2+l1I11II1l.nodeHeight/2,l1l1l11l.y-=l1I11II1l.nodeWidth/2-l1I11II1l.nodeHeight/2,I1IIIIIl.push(l1l1l11l);return I1IIIIIl},cloneWorkFlowNodeList:function(I1I111I1){for(var l1l1l11l=[],l1I11II1I=0,I1IIIII1=I1I111I1.length;I1IIIII1>l1I11II1I;l1I11II1I++)l1l1l11l[l1I11II1I]=$.extend(!0,{},I1I111I1[l1I11II1I]);return l1l1l11l},event2processGraph:function(l1I111Il){var I1l1l111=this,I1I11II1l=I1l1l111.getFlowUi();return I1l1l111.toProcessProps=!1,I1I11II1l.render("flow-ui-item"),I1I11II1l.render("flow-ui-bottomButtons"),$("#ouiflow").show(),$("#flow-ui-viewType").show(),$("#flow-ui-processProp").hide(),I1l1l111.scroll2center(),!1},event2processProps:function(l1l111l1){var l1l1l111=this,l1l11ll1I=l1l1l111.getFlowUi();if(l1l1l111.toProcessProps=!0,l1l11ll1I.render("flow-ui-item"),!$("#flow-ui-processProp").hasClass("flow-ui-processProp")){l1l1l111.processProp=l1l1l111.flowData;for(var l1llllll=l1l1l111.processProp.rights||"[]",I1l1ll11I=oui.parseJson(l1llllll),l1I1111II=[],I1lll1ll1="",l1I1I1II=[],l1111I1l=0,I1l1111l=I1l1ll11I.length;I1l1111l>l1111I1l;l1111I1l++)l1I1111II.push({id:I1l1ll11I[l1111I1l].toId,name:I1l1ll11I[l1111I1l].toName,typeFlag:I1l1ll11I[l1111I1l].toType}),l1I1I1II.push(I1l1ll11I[l1111I1l].toId);l1I1111II.length>0&&(I1lll1ll1=oui.parseString(l1I1111II)),l1l1l111.processProp.selectPerson4right=I1lll1ll1,l1l1l111.processProp.selectPerson4rightValue=l1I1I1II.join(","),l1l11ll1I.render("flow-ui-processProp"),oui.parse()}return l1l11ll1I.render("flow-ui-bottomButtons"),$("#ouiflow").hide(),$("#flow-ui-viewType").hide(),$("#flow-ui-processProp").show(),!1},event2trans:function(l1l111ll){var l1l1l11I=this,I1l11ll11=l1l1l11I.ViewType,I1lllllI=l1l1l11I.getFlowUi();return l1l1l11I.isVertical=!1,l1l1l11I.flowData.viewType=I1l11ll11.horizontal.value,I1lllllI.render("flow-ui-viewType"),$("#ouiflow").css({width:"",height:"",left:0,top:0}),l1l1l11I.refresh(),!1},event2vertical:function(I1I111I1){var I1I1I11I=this,l1l11ll11=I1I1I11I.ViewType,I1llllll=I1I1I11I.getFlowUi();return I1I1I11I.isVertical=!0,I1I1I11I.flowData.viewType=l1l11ll11.vertical.value,I1llllll.render("flow-ui-viewType"),$("#ouiflow").css({width:"",height:"",left:0,top:0}),I1I1I11I.refresh(),!1},event2renderByThemeId:function(l1l111ll){var l1l1l11I=this,I1I11II1l=l1l1l11I.getFlowUi(),l1lllll1=l1l111ll.el,I1I1II111=$(l1lllll1).attr("flow-themeId");l1l1l11I.themeId=I1I1II111,I1I11II1l.render("flow-ui-item"),I1I11II1l.config=$.extend(!0,I1I11II1l.config,I1I11II1l.themes[I1I1II111]||{}),l1l1l11I.refresh()},refresh:function(){this.newId=0;var _self=this;_self.progressBar=oui.progress("加载中..."),_self.hideContextMenu&&_self.hideContextMenu(),_self.isVertical?(_self.offsetY=100,_self.x_distance_S=64,_self.x_distance=120,_self.rootPosY=-17,_self.rootPosX=150):(_self.offsetY=60,_self.x_distance_S=65,_self.x_distance=130,_self.rootPosY=0,_self.rootPosX=50),_self.maxLevel_H=0,_self.maxLevel_V=0,_self.mc_width=0,_self.mc_height=0,_self.branchLevelVMap=new FlowBiz.Map,_self.splitJoinMap=new FlowBiz.Map,_self.joinSplitMap=new FlowBiz.Map;var cloneArr=_self.cloneWorkFlowNodeList(_self.workFlowNodeList),startNode=_self.createTreeNode(cloneArr);_self.countLevelH(startNode,0),_self.countLevelV(startNode,0),_self.countPosition(startNode,"false"),_self.countDistance(),_self.countNodeLinesPosition(startNode);var workflowTreeNode=_self.createNodeData(cloneArr,_self.isVertical);_self.workflowTreeNode=workflowTreeNode;var width=_self.isVertical?_self.mc_height:_self.mc_width,height=_self.isVertical?_self.mc_width:_self.mc_height;width+=100,height+=100,$(function(){$("#ouiflow").css({left:0,top:0,position:"relative",width:"",height:""}),$("#ouiflow").html(""),$("#ouiflow").FlowUi({basePath:oui.getContextPath()+"res_engine/workflow/",restore:workflowTreeNode,width:width,height:height,tools:{save:{onclick:function(data){console.log(data),console.log(oui.biz.Tool.encode(eval("("+data+")"))),alert("save:\n"+data)}}}}),_self.scroll2center(),_self.progressBar&&_self.progressBar.hide()}),_self.changed()}};FlowBiz.scroll2center=function(){var I1l111lI=this;if(I1l111lI.isVertical){var l1I1I11l=$(".flow-body")[0].scrollWidth-$(".flow-body").width(),l1I11II1l=$(".flow-body")[0].offsetWidth-$(".flow-body")[0].clientWidth,I1lllll1=$(".flow-body")[0].offsetHeight-$(".flow-body")[0].clientHeight;0>=l1I11II1l&&0>=I1lllll1?$("#ouiflow").css({position:"relative",left:"0px"}):0>=I1lllll1&&$("#ouiflow").css({position:"relative",left:"8.5px"}),$(".flow-body").scrollLeft(l1I1I11l/2)}else{var l1I1I11l=$(".flow-body")[0].scrollHeight-$(".flow-body").height();$(".flow-body").scrollTop(l1I1I11l/2)}},FlowBiz.countLevelH=function(I1I111II,l1l1l11l){var I1l11ll11=this,I1IIIIII=I1I111II.parents,I1I1II11I=I1I111II.children;if(I1I111II.index=l1l1l11l,I1I111II.level_H&&I1I111II.level_H>100)throw"流程图显示最大支持的横向节点数为100！";var I1I1111Il,I1III1IIl=0;if(0==I1IIIIII.length)I1I111II.level_H=1;else if(I1I111II.isJoin){for(var I1l1l1ll=0,I1111l11=I1IIIIII.length;I1111l11>I1l1l1ll;I1l1l1ll++)I1I1111Il=I1IIIIII[I1l1l1ll],I1I1111Il.level_H>I1III1IIl&&(I1III1IIl=I1I1111Il.level_H);if(I1III1IIl++,I1I111II.level_H>=I1III1IIl)return;I1I111II.level_H=I1III1IIl,I1I111II.level_H>I1l11ll11.maxLevel_H&&(I1l11ll11.maxLevel_H=I1I111II.level_H)}else{for(var I1l1l1ll=0,I1111l11=I1IIIIII.length;I1111l11>I1l1l1ll;I1l1l1ll++)I1I1111Il=I1IIIIII[I1l1l1ll],I1I111II.level_H=I1I1111Il.level_H+1,I1I111II.level_H>I1III1IIl&&(I1III1IIl=I1I111II.level_H);I1I111II.level_H>I1l11ll11.maxLevel_H&&(I1l11ll11.maxLevel_H=I1I111II.level_H)}for(var I1l1111l=0,I1111l11=I1I1II11I.length;I1111l11>I1l1111l;I1l1111l++)I1l11ll11.countLevelH(I1I1II11I[I1l1111l],I1l1111l)},FlowBiz.countLevelV=function(I1I111I1,l1I1I11I){var I1I11II11=this;if(!(I1I111I1.level_V>0)){var I1lllllI=I1I111I1.children;if(I1I111I1.index=l1I1I11I,I1I111I1.level_V>100)throw"流程图显示最大支持的纵向节点数为100！";var l1l1ll111;if(0==I1lllllI.length)I1I111I1.level_V=1;else{for(var l1I1111I1=0,l1III1III=0,I1I1I1II=I1lllllI.length;I1I1I1II>l1III1III;l1III1III++)l1l1ll111=I1lllllI[l1III1III],I1I11II11.countLevelV(l1l1ll111,l1III1III),l1I1111I1+=l1l1ll111.level_V;if(I1I111I1.level_V=l1I1111I1,I1I111I1.level_V>I1I11II11.maxLevel_V&&(I1I11II11.maxLevel_V=I1I111I1.level_V),I1I111I1.isSplit){var I1111l11=I1I11II11.findJoin(I1I111I1);l1I1111I1=0;for(var l1I1111l=0,l1II111I1=I1lllllI.length;l1II111I1>l1I1111l;l1I1111l++){l1l1ll111=I1lllllI[l1I1111l];var l1ll1lllI=I1I11II11.findAllSplit(l1l1ll111,I1111l11),I11I1IIl=1;l1l1ll111.isSplit&&l1ll1lllI.push(l1l1ll111);for(var I111I111=0,I1llll11=l1ll1lllI.length;I1llll11>I111I111;I111I111++){var l1lllll1I=l1ll1lllI[I111I111];I1I11II11.countLevelV(l1lllll1I,l1lllll1I.index),I11I1IIl<l1lllll1I.level_V&&(I11I1IIl=l1lllll1I.level_V)}l1I1111I1+=I11I1IIl}l1I1111I1<I1lllllI.length&&(l1I1111I1=I1lllllI.length),I1I111I1.level_V=l1I1111I1,l1I1111I1>I1I11II11.maxLevel_V&&(I1I11II11.maxLevel_V=l1I1111I1),null!=I1111l11&&(I1111l11.level_V=l1I1111I1)}else if(I1I111I1.isJoin||I1lllllI[0].isJoin)I1I111I1.level_V=1;else for(var I1l111lll=I1lllllI[0];!I1l111lll.isSplit&&0!=I1l111lll.children.length&&!I1l111lll.isJoin;)I1l111lll=I1l111lll.children[0]}}},FlowBiz.countDistance=function(){var I1l111ll=this;I1l111ll.mc_width=I1l111ll.countedSVGWidth+65,I1l111ll.mc_height=I1l111ll.mc_height=I1l111ll.y_distance*I1l111ll.maxLevel_V},FlowBiz.countNodeLinesPosition=function(l1l111l1){var I1l1l11I=(l1l111l1.x,l1l111l1.y,l1l111l1.children),l1I11II1l=[],I1llllll=this;if(I1l1l11I.length>0)for(var l1I11II1l=(I1l1l11I[0],I1l1l11I[I1l1l11I.length-1],[]),l1l1ll11I=[],l1l1111l1=0,I1III1III=I1l1l11I.length;I1III1III>l1l1111l1;l1l1111l1++)l1l1ll11I=[],l1l111l1.y==I1l1l11I[l1l1111l1].y||(l1l111l1.isSplit&&(l1l1ll11I=[{x:l1l111l1.x+I1llllll.nodeWidth/2,y:I1l1l11I[l1l1111l1].y+I1llllll.nodeHeight/2}]),I1l1l11I[l1l1111l1].isJoin&&(l1l1ll11I=[{x:I1l1l11I[l1l1111l1].x+I1llllll.nodeWidth/2,y:l1l111l1.y+I1llllll.nodeHeight/2}])),l1I11II1l.push({nodeId:l1l111l1.id,from:l1l111l1.newId,to:I1l1l11I[l1l1111l1].newId,dots:l1l1ll11I,text:{text:"",textPos:{x:-1,y:-1}},props:{text:{value:""}}}),I1llllll.countNodeLinesPosition(I1l1l11I[l1l1111l1]);var l1I1I1I1=[];if(l1I11II1l&&l1I11II1l.length){var l1111I11;l1111I11=l1I11II1l.length%2==0?l1I11II1l.length/2-1:parseInt(l1I11II1l.length/2),0>l1111I11&&(l1111I11=0);for(var l1l1111l1=0;l1111I11>=l1l1111l1;l1l1111l1++)l1I1I1I1.push(l1I11II1l[l1l1111l1]);for(var l1I1111I=l1I11II1l.length-1;l1I1111I>l1111I11;l1I1111I--)l1I1I1I1.push(l1I11II1l[l1I1111I])}l1l111l1.lines=l1I1I1I1},FlowBiz.rotate=function(l1l111ll,l1l1l111){var l1I11II11,I1IIIIIl,l1l1ll111=this;l1I11II11=Math.atan2(l1l111ll.y,l1l111ll.x),l1I11II11+=l1l1l111,I1IIIIIl=Math.sqrt(l1l111ll.x*l1l111ll.x+l1l111ll.y*l1l111ll.y);var l1l1111lI=Math.cos(l1I11II11)*I1IIIIIl,I1lll1ll1=Math.sin(l1I11II11)*I1IIIIIl;return l1l1111lI+=l1l1ll111.mc_height,I1lll1ll1-=l1l1ll111.y_distance,{x:l1l1111lI,y:I1lll1ll1}},FlowBiz.countPosition=function(I1l111lI,I1I1I111){var l1I11II1I=this,I1lllll1=I1l111lI.parents,I1I1II111=I1l111lI.children,l1I1111I1=!1,I1lll1lll=0,I1l1l1ll=0;if(0==I1lllll1.length)I1l111lI.x=l1I11II1I.rootPosX,I1l111lI.y=l1I11II1I.maxLevel_V*l1I11II1I.y_distance/2+l1I11II1I.rootPosY,l1I11II1I.firstPos={x:I1l111lI.x,y:I1l111lI.y};else{if(I1lll1lll=I1lllll1[0].x+l1I11II1I.x_distance,1==I1lllll1.length?I1l111lI.isSplit&&I1I1II111.length>1||I1lllll1[0].isSplit||I1lllll1[0].isJoin?I1lll1lll=I1lllll1[0].x+l1I11II1I.x_distance_S:0==I1I1II111.length:l1I1111I1=!0,l1I1111I1){for(var l1111l1l=I1lllll1[0].x||0,l1I11111=1,l1II111II=I1lllll1.length;l1II111II>l1I11111;l1I11111++)l1111l1l=Math.max(l1111l1l,I1lllll1[l1I11111].x||0);I1lll1lll=l1111l1l+l1I11II1I.x_distance_S}if(I1l111lI.x=I1lll1lll,1==I1lllll1.length&&I1lllll1[0].isJoin)I1l1l1ll=I1lllll1[0].y;else{var I1ll1llll=I1lllll1[0].level_V;I1l1l1ll=I1lllll1[0].y-I1ll1llll*l1I11II1I.y_distance/2;for(var l11l1llI,l1I11111=0,l1II111II=I1l111lI.index;l1II111II>l1I11111;l1I11111++){var I111I11I=I1lllll1[0].children[l1I11111];l11l1llI=l1I11II1I.getBranchLevelV(I111I11I),I1l1l1ll+=l11l1llI*l1I11II1I.y_distance}I1lllll1[0].isSplit?I1lllll1[0].children.length>1?(l11l1llI=l1I11II1I.getBranchLevelV(I1l111lI),I1l1l1ll+=l11l1llI*l1I11II1I.y_distance/2):I1l1l1ll=I1lllll1[0].y:I1l1l1ll+=I1l111lI.level_V*l1I11II1I.y_distance/2}I1lllll1.length>1?I1l111lI.y=(I1lllll1[0].y+I1lllll1[I1lllll1.length-1].y)/2:I1l111lI.y=I1l1l1ll}if(0!=I1l111lI.x&&0!=I1l111lI.y)for(var l1I11111=0,l1II111II=I1I1II111.length;l1II111II>l1I11111;l1I11111++){var l1llll1l=I1I1II111[l1I11111];l1I11II1I.countPosition(l1llll1l,I1I1I111)}I1l111lI.isEnd&&I1l111lI.x&&I1l111lI.y&&(l1I11II1I.endPos={x:I1l111lI.x,y:I1l111lI.y},l1I11II1I.countedSVGWidth=l1I11II1I.endPos.x-l1I11II1I.firstPos.x)},FlowBiz.findJoin=function(I1l111lI){var l1l1l11l=this,l1l11ll1I=I1l111lI.id;if(l1l1l11l.splitJoinMap.containsKey(l1l11ll1I))return l1l1l11l.splitJoinMap.get(l1l11ll1I);for(var l1lllllI=l1l1l11l.findAllJoin(I1l111lI),l1l1ll111=I1l111lI.children,I1I1111I1=[],l1III1III=0,I1l1l1lI=l1lllllI.length;I1l1l1lI>l1III1III;l1III1III++){for(var l1111l1I=l1lllllI[l1III1III],I1l1111I=!0,I1ll111ll=0,l1II1III1=l1l1ll111.length;l1II1III1>I1ll111ll;I1ll111ll++){var l11l1lll=l1l1ll111[I1ll111ll];if(!l1l1l11l.passThrough(l11l1lll,l1111l1I)){I1l1111I=!1;break}}I1l1111I&&I1I1111I1.push(l1111l1I)}if(null==I1I1111I1||I1I1111I1.length<1)return null;if(1==I1I1111I1.length)return I1I1111I1[0];for(var I111l11l=I1I1111I1[0],l1III1III=0,I1l1l1lI=I1I1111I1.length;I1l1l1lI>l1III1III;l1III1III++){var l1IIII1I=I1I1111I1[l1III1III];I111l11l.id!=l1IIII1I.id&&l1l1l11l.passThrough(l1IIII1I,I111l11l)&&(I111l11l=l1IIII1I)}return l1l1l11l.splitJoinMap.put(l1l11ll1I,I111l11l),l1l1l11l.joinSplitMap.put(I111l11l.id,I1l111lI),I111l11l},FlowBiz.findAllJoin=function(l1I111II){for(var I1I1I111=this,I1l11ll1I=[],I1IIIII1=l1I111II.children,l1I1II11I=0,I1l1111lI=I1IIIII1.length;I1l1111lI>l1I1II11I;l1I1II11I++){var l1III1III=I1IIIII1[l1I1II11I];l1III1III.parents.length>1&&I1l11ll1I.push(l1III1III);for(var I1I1I1Il=I1I1I111.findAllJoin(l1III1III),l1111l1l=0,l1l11111=I1I1I1Il.length;l1l11111>l1111l1l;l1111l1l++)I1l11ll1I.push(I1I1I1Il[l1111l1l])}return I1I1I111.unique(I1l11ll1I)},FlowBiz.unique=function(l1l111lI){for(var I1I1I11l=new FlowBiz.Map,I1I11II1l=0,l1IIIII1=l1l111lI.length;l1IIIII1>I1I11II1l;I1I11II1l++){var I1l1ll11l=l1l111lI[I1I11II1l];I1I1I11l.put(I1l1ll11l.id,I1l1ll11l)}return l1l111lI=null,I1I1I11l.values()},FlowBiz.passThrough=function(l1l111l1,I1I1I11l){for(var l1I11II1I=this,l1lllllI=l1l111l1.children,l1I1II11I=0,l1l1111l1=l1lllllI.length;l1l1111l1>l1I1II11I;l1I1II11I++){var I1III1II1=l1lllllI[l1I1II11I];if(I1III1II1.id==I1I1I11l.id)return!0;if(l1I11II1I.passThrough(I1III1II1,I1I1I11l))return!0}return!1},FlowBiz.findSplit=function(I1I111II){var I1I1I11I=this,I1l11ll1I=I1I111II.id;if(I1I1I11I.joinSplitMap.containsKey(I1l11ll1I))return I1I1I11I.joinSplitMap.get(I1l11ll1I);for(var I1lllllI=I1I1I11I.findAllSplit(I1I1I11I.startNode,I1I111II),I1l1ll11l=0,l1l1111lI=I1lllllI.length;l1l1111lI>I1l1ll11l;I1l1ll11l++){var I1lll1llI=I1lllllI[I1l1ll11l];if(I1I1I11I.findJoin(I1lll1llI).id==I1I111II.id)return I1I1I11I.joinSplitMap.put(I1l11ll1I,I1lll1llI),I1lll1llI}return null},FlowBiz.findAllSplit=function(I1l111l1,l1I1I11l){var l1I11II11=this,l1lllll1=[];if(null==I1l111l1||null==l1I1I11l)return l1lllll1;if(I1l111l1.id==l1I1I11l.id)return l1lllll1;for(var I1l1ll11l=I1l111l1.children,I1I1111Il=0,l1III1III=I1l1ll11l.length;l1III1III>I1I1111Il;I1I1111Il++){var l1I1I1I1=I1l1ll11l[I1I1111Il];l1I1I1I1.isSplit&&l1lllll1.push(l1I1I1I1);for(var I1111l1l=l1I11II11.findAllSplit(l1I1I1I1,l1I1I11l),l1I11111=0,l1ll111ll=I1111l1l.length;l1ll111ll>l1I11111;l1I11111++)l1lllll1.push(I1111l1l[l1I11111])}return l1I11II11.unique(l1lllll1)},FlowBiz.getBranchLevelV=function(l1l111l1){var I1l1l11l=this,I1l11ll1l=l1l111l1.id;if(I1l1l11l.branchLevelVMap.containsKey(I1l11ll1l))return I1l1l11l.branchLevelVMap.get(I1l11ll1l);var l1llllll,I1l1ll11l=l1l111l1.level_V;if(l1l111l1.isSplit){var l1I1111Il=I1l1l11l.findJoin(l1l111l1);l1llllll=I1l1l11l.getBranchLevelV(l1I1111Il),l1llllll>I1l1ll11l&&(I1l1ll11l=l1llllll)}else for(var l1III1IIl=l1l111l1.children,I1I1I1II=0,l1111I11=l1III1IIl.length;l1111I11>I1I1I1II;I1I1I1II++){var I1I1111I=l1III1IIl[I1I1I1II];if(I1I1111I.isJoin)break;I1I1111I.level_V>I1l1ll11l&&(I1l1ll11l=I1I1111I.level_V),l1llllll=I1l1l11l.getBranchLevelV(I1I1111I),l1llllll>I1l1ll11l&&(I1l1ll11l=l1llllll)}return I1l1l11l.branchLevelVMap.put(I1l11ll1l,I1l1ll11l),I1l1ll11l};var Map=function(){this.container={}};Map.prototype.put=function(l1I111I1,l1l1l11I){try{null!=l1I111I1&&""!=l1I111I1&&(this.container[l1I111I1]=l1l1l11I)}catch(I1l11ll11){return I1l11ll11}},Map.prototype.get=function(l1I111II){try{return this.container[l1I111II]}catch(I1I1I111){return I1I1I111}},Map.prototype.remove=function(I1l111l1){var l1I1I111=null;try{l1I1I111=this.container[I1l111l1],delete this.container[I1l111l1]}catch(I1l11ll11){return l1I1I111}return l1I1I111},Map.prototype.clear=function(){try{delete this.container,this.container={}}catch(l1I111II){return l1I111II}},Map.prototype.keys=function(){var I1l111lI=[];for(var I1l1l111 in this.container)I1l111lI.push(I1l1l111);return I1l111lI},Map.prototype.values=function(){for(var l1l111ll=[],l1I1I111=this.keys(),I1l11ll11=0;I1l11ll11<l1I1I111.length;I1l11ll11++)l1l111ll.push(this.container[l1I1I111[I1l11ll11]]);return l1l111ll},Map.prototype.containsKey=function(l1l111lI){try{for(var I1l1l11l in this.container)if(I1l1l11l==l1l111lI)return!0;return!1}catch(I1I11II1I){return I1I11II1I}},Map.prototype.containsValue=function(l1l111l1){try{for(var l1I1I111 in this.container)if(this.container[l1I1I111]===l1l111l1)return!0;return!1}catch(I1I11II1I){return I1I11II1I}},Map.prototype.size=function(){return this.keys().length},Map.prototype.isEmpty=function(){return 0==this.keys().length},Map.prototype.valueArray=function(){return this.values()},FlowBiz.Map=Map,FlowBiz=oui.createClass(FlowBiz),FlowBiz.StateEnum={enable:{value:1,desc:"启用"},disable:{value:2,desc:"停用"},DRAFT:{value:3,desc:"草稿"}},FlowBiz.WorkFlowState={waitSend:{value:0,desc:"保存待发"},on:{value:1,desc:"流转中"},stop:{value:2,desc:"终止"},off:{value:3,desc:"完结"}},FlowBiz.WorkFlowNodeState={state_none:{value:0,desc:"尚未到达"},state_waitDo:{value:1,desc:"流程到达,所有人员待办未处理"},state_waitDo_someOne:{value:2,desc:"流程到达,部分人员已处理"},state_done:{value:3,desc:"流程到达,所有人员已处理"}},FlowBiz.WorkFlowPersonState={state_none:{value:0,desc:"尚未到达"},state_waitSend:{value:1,desc:"保存待发"},state_sent:{value:2,desc:"已发"},state_waitDo:{value:3,desc:"待办"},state_done:{value:4,desc:"已办"}},FlowBiz.getStatusImgName=function(I1I111I1){var I1l1l111=this,l1l11ll11=I1I111I1.nodeState||0,I1llllll=I1I111I1.personState||0,I1I1II111=I1I111I1.personAttitude||1,I1I1111I1=I1I111I1.isCurrent||!1,l1lll1llI=I1I111I1.isFirst||!1,I1I1I1II=I1I111I1.nodeType,l1111l1l="";if("person"==I1I1I1II){var l1I11111=I1l1l111.getEnumKeyByValue(I1llllll,I1l1l111.WorkFlowPersonState),l1II111Il="";l1I11111||(l1I11111=I1l1l111.getEnumKeyByValue(I1l1l111.WorkFlowPersonState.state_none.value,I1l1l111.WorkFlowPersonState)),l1111l1l=l1I11111,l1I11111&&"state_none"!=l1I11111&&"state_waitSend"!=l1I11111&&"state_sent"!=l1I11111&&(l1II111Il=I1l1l111.getEnumKeyByValue(I1I1II111,I1l1l111.WorkFlowPersonAttitude),l1II111Il||(l1II111Il=I1l1l111.getEnumKeyByValue(I1l1l111.WorkFlowPersonAttitude.no_read.value,I1l1l111.WorkFlowPersonAttitude)),l1111l1l+="_"+l1II111Il)}else{var l1ll1llll=I1l1l111.getEnumKeyByValue(l1l11ll11,I1l1l111.WorkFlowNodeState);l1ll1llll||(l1ll1llll="state_none"),l1111l1l=l1ll1llll}return I1I1111I1?l1111l1l+"_3":l1lll1llI?l1111l1l+"_2":l1111l1l+"_1"},FlowBiz.getStatusImg=function(I1I111II){var l1I1I11I=this;return"img/16/"+l1I1I11I.getStatusImgName(I1I111II)+".png"},FlowBiz.getHastenWorkImg=function(l1I111II){var I1I1I111=this,l1l11ll1I=l1I111II.nodeState||"",l1IIIIIl="",I1l1ll11I=oui.getParam("noHastan");return I1l1ll11I&&"true"==I1l1ll11I?"":((I1I1I111.WorkFlowNodeState.state_waitDo.value==l1l11ll1I||I1I1I111.WorkFlowNodeState.state_waitDo_someOne.value==l1l11ll1I)&&(l1I111II.notifyNode||(l1IIIIIl="img/16/hasten_work.png")),l1IIIIIl)},FlowBiz.getNotifyImg=function(I1I111I1){var I1l1l111="";return I1I111I1.notifyNode&&(I1l1l111=I1I111I1.isCurrent?"img/16/notify_3.png":"img/16/notify_1.png"),I1l1l111},FlowBiz.getSplitImgSrc=function(I1I111II){return I1I111II?"img/16/split-high.png":"img/16/split.png"},FlowBiz.getJoinImgSrc=function(I1I111I1){return I1I111I1?"img/16/join-high.png":"img/16/join.png"},FlowBiz.getEnumKeyByValue=function(l1I111Il,I1I1I11l){for(var l1I11II1l in I1I1I11l)if(l1I111Il===I1I1I11l[l1I11II1l].value)return l1I11II1l;return null},FlowBiz.WorkFlowPersonAttitude={no_read:{value:1,desc:"未看"},has_read:{value:2,desc:"已阅"},hold:{value:3,desc:"暂存待办"},agree:{value:4,desc:"同意"},disagree:{value:5,desc:"不同意"},stop:{value:6,desc:"终止"}},FlowBiz.ViewType={horizontal:{value:1,desc:"横向"},vertical:{value:2,desc:"纵向"}},FlowBiz.WorkFlowNodeType=oui.WorkFlowNodeType,FlowBiz.WorkFlowImportance={normal:{value:1,desc:"普通"},important:{value:2,desc:"重要"},very_important:{value:3,desc:"非常重要"}},FlowBiz.FieldRightEnum={edit:{name:"edit",value:1,desc:"编辑"},view:{name:"view",value:2,desc:"浏览"},hidden:{name:"hidden",value:3,desc:"隐藏"},invisible:{name:"invisible",value:4,desc:"不可见"}},FlowBiz.WorkFlowChooseType=oui.WorkFlowChooseType,FlowBiz.WorkFlowNodeRight=oui.WorkFlowNodeRight,FlowBiz.ValidateConfig={workFlowNodeListMinSize:3,workFlowNodeListMaxSize:60,nodePersonListMaxSize:100,commentsMaxSize:100,failMode:"alert",workFlowProp:{name:{des:"流程名称",require:!0,maxLength:60},des:{des:"流程描述",maxLength:1e3}},workFlowNode:{nodeDisplayName:{maxLength:50}}},FlowBiz.validateWorkFlowNode=function(l1l111l1){var l1l1l11I=this;if(!l1l111l1||!l1l111l1.nodeDisplayName)return!0;var l1I11II1l=oui.validate4value(l1l111l1.nodeDisplayName,{failMsg:"节点显示名称长度不能超过{{validateValue}}个字符",maxLength:l1l1l11I.ValidateConfig.workFlowNode.nodeDisplayName.maxLength,failMode:l1l1l11I.ValidateConfig.failMode});return l1I11II1l?!0:!1},FlowBiz.RoleTypeEnum={orgMgr:{value:"orgMgr",display:"单位管理员"},departmentMgr:{value:"departmentMgr",display:"部门管理员"},depLeader:{value:"depLeader",display:"部门主管"
},formMgr:{value:"formMgr",display:"表单管理员"},surveyMgr:{value:"surveyMgr",display:"调查管理员"}},FlowBiz.roleVarFields=[FlowBiz.RoleTypeEnum.depLeader],FlowBiz.processVarFields=[{id:"relOrg_sender4Dept",title:"发起人所属部门",opt:"=,!=,in,notIn",controlType:"selectdept"},{id:"relOrg_sender4PartTimeDept",title:"发起人所属兼职部门",opt:"=,!=,in,notIn",controlType:"selectdept"},{id:"relOrg_sender4Role",title:"发起人角色",opt:"=,!=",controlType:"singleselect",showType:"",data:FlowBiz.roleVarFields},{id:"relOrg_preNode4Dept",title:"上节点所属部门",opt:"=,!=,in,notIn",controlType:"selectdept",showType:""},{id:"relOrg_preNode4PartTimeDept",title:"上节点所属兼职部门",opt:"=,!=,in,notIn",controlType:"selectdept",showType:""},{id:"relOrg_preNode4Role",title:"上节点角色",opt:"=,!=",controlType:"singleselect",showType:"",data:FlowBiz.roleVarFields}],FlowBiz.getNodesSize4validate=function(l1l111l1){for(var I1I1I11l=0,l1I11II11=0,I1IIIIII=l1l111l1.length;I1IIIIII>l1I11II11;l1I11II11++){var I1l1ll111=l1l111l1[l1I11II11];"split"!=I1l1ll111.nodeType&&"join"!=I1l1ll111.nodeType&&I1I1I11l++}return I1I1I11l},FlowBiz.validate=function(I1I111Il){var I1I1I11l=this,l1l11ll1l=I1I1I11l.getFlowData(),l1lllll1=!0,l1I1II11l=l1l11ll1l.workFlowNodeList.length;if(l1lllll1=oui.validate4value(l1I1II11l,{failMsg:"流程节点数不能大于{{validateValue}}",maxValue:I1I1I11l.ValidateConfig.workFlowNodeListMaxSize,failMode:I1I1I11l.ValidateConfig.failMode}),!l1lllll1)return!1;if(!I1I111Il)return!0;for(var l1I1111I1=l1l11ll1l.workFlowNodeList.length,I1III1III=l1l11ll1l.workFlowNodeList,I1I1I1Il=0;l1I1111I1>I1I1I1Il;I1I1I1Il++)if(l1lllll1=I1I1I11l.validateWorkFlowNode(I1III1III[I1I1I1Il]),!l1lllll1)return!1;return!0}}(),function(){var l1I111I1=null,l1I1I11I={"package":"oui.flow","class":"FlowUi",prefix:"flow",tpls:{"flow-tpl-viewType":"","flow-tpl-bottomButtons":""},setBiz:function(l1I111II){l1I111I1=l1I111II},getBiz:function(){return l1I111I1},render:function(I1I1I11l,l1I11II1l){if(this.tpls||(this.tpls={}),"undefined"!=typeof I1I1I11l){if(I1I1I11l){I1I1I11l.indexOf(this.prefix+"-ui-")>=0&&(I1I1I11l=this.prefix+"-tpl-"+I1I1I11l.replace(this.prefix+"-ui-","")),""!=typeof this.tpls[I1I1I11l]&&this.tpls[I1I1I11l]||(this.tpls[I1I1I11l]=template.compile(document.getElementById(I1I1I11l).innerHTML));var I1IIIII1=I1I1I11l.replace(this.prefix+"-tpl-",""),I1I1II11l=this.tpls[I1I1I11l](this.getData.call({Events:l1I111I1.Events,FlowBiz:l1I111I1},I1IIIII1));if("undefined"!=typeof l1I11II1l&&1==l1I11II1l)return I1I1II11l;var l1l1111lI=I1I1I11l.replace("-tpl-","-ui-");document.getElementById(l1l1111lI).outerHTML=I1I1II11l}}else{var l1III1II1=this.tpls;for(var I1I1I1Il in l1III1II1)this.render(I1I1I1Il)}},getData:function(l1I111I1){var l1I1I11l=this.FlowBiz;return l1I1I11l[l1I111I1]?(this[l1I111I1]=l1I1I11l[l1I111I1],this[l1I111I1]):this}};l1I1I11I=oui.createClass(l1I1I11I),l1I1I11I.themes=[],l1I1I11I.config={editable:!0,lineHeight:10,basePath:"",rect:{attr:{x:10,y:10,width:100,height:50,r:3,fill:"#5990cf",stroke:"","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"状态",fill:"#ffffff","font-size":13},margin:5,props:[],img:{}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#5990cf",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#5990cf",fill:"#5990cf","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":2},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":3},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new l1I1I11I.editors.textEditor}}}},tools:{attr:{left:10,top:10},pointer:{},path:{},states:{},save:{onclick:function(l1l111ll){alert(l1l111ll)}}},props:{attr:{top:10,right:30},props:{}},restore:"",activeRects:{rects:[],rectAttr:{stroke:"#ff0000","stroke-width":2}},historyRects:{rects:[],pathAttr:{path:{stroke:"#00ff00"},arrow:{stroke:"#00ff00",fill:"#00ff00"}}}},l1I1I11I.util={isLine:function(l1l111ll,I1I1I11l,l1I11II1I){var l1IIIIIl,l1I1II11I;return l1IIIIIl=l1l111ll.x-l1I11II1I.x==0?1:(l1l111ll.y-l1I11II1I.y)/(l1l111ll.x-l1I11II1I.x),l1I1II11I=(I1I1I11l.x-l1I11II1I.x)*l1IIIIIl+l1I11II1I.y,I1I1I11l.y-l1I1II11I<10&&I1I1I11l.y-l1I1II11I>-10?(I1I1I11l.y=l1I1II11I,!0):!1},center:function(l1I111II,l1I1I11I){return{x:(l1I111II.x-l1I1I11I.x)/2+l1I1I11I.x,y:(l1I111II.y-l1I1I11I.y)/2+l1I1I11I.y}},nextId:function(){var l1I111Il=0;return function(){return++l1I111Il}}(),connPoint:function(l1I111I1,l1l1l11I){var l1l11ll11=l1l1l11I,l1IIIII1={x:l1I111I1.x+l1I111I1.width/2,y:l1I111I1.y+l1I111I1.height/2},l1l1ll11l=(l1IIIII1.y-l1l11ll11.y)/(l1IIIII1.x-l1l11ll11.x);l1l1ll11l=isNaN(l1l1ll11l)?0:l1l1ll11l;var l1l1111l1,l1III1IIl,l1l1l1lI=l1I111I1.height/l1I111I1.width,I1111I1l=l1l11ll11.y<l1IIIII1.y?-1:1,l1I1111I=l1l11ll11.x<l1IIIII1.x?-1:1;return Math.abs(l1l1ll11l)>l1l1l1lI&&-1==I1111I1l?(l1l1111l1=l1IIIII1.y-l1I111I1.height/2,l1III1IIl=l1IIIII1.x+I1111I1l*l1I111I1.height/2/l1l1ll11l):Math.abs(l1l1ll11l)>l1l1l1lI&&1==I1111I1l?(l1l1111l1=l1IIIII1.y+l1I111I1.height/2,l1III1IIl=l1IIIII1.x+I1111I1l*l1I111I1.height/2/l1l1ll11l):Math.abs(l1l1ll11l)<l1l1l1lI&&-1==l1I1111I?(l1l1111l1=l1IIIII1.y+l1I1111I*l1I111I1.width/2*l1l1ll11l,l1III1IIl=l1IIIII1.x-l1I111I1.width/2):Math.abs(l1l1ll11l)<l1l1l1lI&&1==l1I1111I&&(l1l1111l1=l1IIIII1.y+l1I111I1.width/2*l1l1ll11l,l1III1IIl=l1IIIII1.x+l1I111I1.width/2),{x:l1III1IIl,y:l1l1111l1}},arrow:function(l1I111I1,l1l1l11I,I1l11ll11){var I1lllll1=Math.atan2(l1I111I1.y-l1l1l11I.y,l1l1l11I.x-l1I111I1.x)*(180/Math.PI),I1I1II11I=l1l1l11I.x-I1l11ll11*Math.cos(I1lllll1*(Math.PI/180)),I1I1111Il=l1l1l11I.y+I1l11ll11*Math.sin(I1lllll1*(Math.PI/180)),I1lll1lll=I1I1II11I+I1l11ll11*Math.cos((I1lllll1+120)*(Math.PI/180)),I1l1l1l1=I1I1111Il-I1l11ll11*Math.sin((I1lllll1+120)*(Math.PI/180)),l1111I1l=I1I1II11I+I1l11ll11*Math.cos((I1lllll1+240)*(Math.PI/180)),I1I1111l=I1I1111Il-I1l11ll11*Math.sin((I1lllll1+240)*(Math.PI/180));return[l1l1l11I,{x:I1lll1lll,y:I1l1l1l1},{x:l1111I1l,y:I1I1111l}]}},l1I1I11I.rect=function(I1l111lI,l1I1I11l){function I1l11ll1I(){var I1I111Il=I1I1I111I.x+I1III1I1.margin,I1I1I11I=I1I1I111I.y+I1III1I1.margin,l1I11II1I=I1I1I111I.width-2*I1III1I1.margin,I1IIIII1=I1I1I111I.height-2*I1III1I1.margin;switch(l1llllll.attr({x:I1I111Il,y:I1I1I11I,width:l1I11II1I,height:I1IIIII1}),I1III1I1.showType){case"image":I1l1ll111&&I1l1ll111.attr({x:I1I111Il+(l1I11II1I-I1III1I1.img.width)/2,y:I1I1I11I+(I1IIIII1-I1III1I1.img.height)/2}).show();break;case"text":l1llllll.show(),I1II1III1.attr({x:I1I111Il+l1I11II1I/2,y:I1I1I11I+I1IIIII1/2}).show();break;case"image&text":l1llllll.show(),I1II1III1.attr({x:I1I111Il+I1III1I1.img.width+(l1I11II1I-I1III1I1.img.width)/2,y:I1I1I11I+(I1IIIII1-I111I111.config.lineHeight)/2+I111I111.config.lineHeight}).show(),I1l1ll111&&I1l1ll111.attr({x:I1I111Il+I1III1I1.img.width/2,y:I1I1I11I+(I1IIIII1-I1III1I1.img.height)/2}).show()}$(I111111I).trigger("rectresize",l1IIIII1I)}var l1llllll,I1l1ll111,l1I1111I1,l1III1III,l1l1l1lI,I1111l11,l1l1111I,I1II111II,I1II1III1,l11I1II1,I111I111=oui.flow.FlowUi,l1IIII1l=I111I111.getBiz(),l1IIIII1I=(l1IIII1l.WorkFlowNodeState,this),I1l111lll=I111I111.util.nextId(),I1III1I1=$.extend(!0,{},I111I111.config.rect,I1l111lI),I11lll1I="rect"+I1l111lll,I111111I=l1I1I11l,I1I1II1II=l1IIII1l.nodeIdMap,I1ll111l=I1I1II1II[I1III1I1.id],I11lllll=I1ll111l&&I1ll111l.nodeType&&"end"==I1ll111l.nodeType;l1llllll=I111111I.rect(I1III1I1.attr.x,I1III1I1.attr.y,I1III1I1.attr.width,I1III1I1.attr.height,I1III1I1.attr.r).attr(I1III1I1.attr).attr({fill:"#ffffff"});var I1lllllll=I111I111.getBiz().nodeWidth;if(I1III1I1.attr.width==I1lllllll?l11I1II1=I111111I.rect(I1III1I1.attr.x+(I1lllllll-48)/2,I1III1I1.attr.y,48,48,I1III1I1.attr.r).attr(I1III1I1.attr).attr({x:I1III1I1.attr.x+(I1lllllll-48)/2,y:I1III1I1.attr.y,width:48,height:48}):1==I1III1I1.attr.width?l11I1II1=I111111I.rect(I1III1I1.attr.x,I1III1I1.attr.y,5,5,I1III1I1.attr.r).attr(I1III1I1.attr).attr({x:I1III1I1.attr.x-3,y:I1III1I1.attr.y-3,width:7,height:7}):15==I1III1I1.attr.width&&(l1llllll.attr("fill",I1III1I1.attr.fill),l1IIII1l.isIndex||l1IIII1l.isPreview||(I1II111II=I111111I.image(I111I111.config.basePath+I1III1I1.joinImg.src,I1III1I1.attr.x,I1III1I1.attr.y,I1III1I1.joinImg.width,I1III1I1.joinImg.height))),I1III1I1.img&&I1III1I1.img.src&&(I1l1ll111=I111111I.image(I111I111.config.basePath+I1III1I1.img.src,I1III1I1.attr.x+I1III1I1.attr.width/2-I1III1I1.img.width/2,I1III1I1.attr.y+(I1III1I1.attr.height-I1III1I1.img.height)/2-9,I1III1I1.img.width,I1III1I1.img.height)),I1III1I1.statusImg&&I1III1I1.statusImg.src&&(l1I1111I1=I111111I.image(I111I111.config.basePath+I1III1I1.statusImg.src,I1III1I1.attr.x-I1III1I1.statusImg.width/2+I1III1I1.attr.width/2+I1III1I1.attr.width/(2*Math.sqrt(2))-5,I1III1I1.attr.y-I1III1I1.statusImg.height/2+I1III1I1.attr.height/2+I1III1I1.attr.height/(2*Math.sqrt(2))-18,I1III1I1.statusImg.width,I1III1I1.statusImg.height)),I1III1I1._commentsImg&&I1III1I1._commentsImg.src&&(l1III1III=I111111I.image(I111I111.config.basePath+I1III1I1.commentsImg.src,I1III1I1.attr.x-I1III1I1.commentsImg.width/2+I1III1I1.attr.width/2+I1III1I1.attr.width/(2*Math.sqrt(2))-5,I1III1I1.attr.y-I1III1I1.commentsImg.height/2+I1III1I1.attr.height/2+I1III1I1.attr.height/(2*Math.sqrt(2)),I1III1I1.commentsImg.width,I1III1I1.commentsImg.height)),I1III1I1.hastenWorkImg&&I1III1I1.hastenWorkImg.src&&(l1l1l1lI=I111111I.image(I111I111.config.basePath+I1III1I1.hastenWorkImg.src,I1III1I1.attr.x+I1III1I1.attr.width-10,I1III1I1.attr.y,I1III1I1.hastenWorkImg.width,I1III1I1.hastenWorkImg.height)),I1III1I1.notifyImg&&I1III1I1.notifyImg.src&&(I1111l11=I111111I.image(I111I111.config.basePath+I1III1I1.notifyImg.src,I1III1I1.attr.x+I1III1I1.attr.width-10,I1III1I1.attr.y,I1III1I1.notifyImg.width,I1III1I1.notifyImg.height)),I1III1I1.splitImg&&I1III1I1.splitImg.src){var l11ll111=l1IIII1l.hasBranch(l1IIII1l.nodeIdMap[I1III1I1.id]),I1l11llI=!0;(l1IIII1l.isIndex||l1IIII1l.isPreview||l1IIII1l.design4Runtime)&&(l11ll111||(I1l11llI=!1)),I1l11llI&&(l1l1111I=l1IIII1l.isVertical?I111111I.image(I111I111.config.basePath+I1III1I1.splitImg.src,I1III1I1.attr.x+25,I1III1I1.attr.y-20,I1III1I1.splitImg.width,I1III1I1.splitImg.height):I111111I.image(I111I111.config.basePath+I1III1I1.splitImg.src,I1III1I1.attr.x-15,I1III1I1.attr.y+25,I1III1I1.splitImg.width,I1III1I1.splitImg.height))}I1II1III1=I111111I.text(I1III1I1.attr.x+I1III1I1.attr.width/2,I1III1I1.attr.y+I1III1I1.attr.height-5,I1III1I1.text.text).attr(I1III1I1.text),I1III1I1.text.text&&I1III1I1.text.text.length>6&&I1II1III1.attr({text:I1III1I1.text.text.substring(0,6)+"..."}),I1II1III1&&I1II1III1.node&&I1III1I1.text.text.length>0&&!oui.os.mobile&&$(I1II1III1.node).attr({"oui-e-mouseenter":"showTipsMsg4nodeDisplayName","oui-e-mouseleave":"hideTips4nodeDisplayName"}),("split"==I1III1I1.text.text||"join"==I1III1I1.text.text||"end"==I1III1I1.text.text)&&I1II1III1.attr({text:""});var I1I1I111I={x:I1III1I1.attr.x-I1III1I1.margin,y:I1III1I1.attr.y-I1III1I1.margin,width:I1III1I1.attr.width+2*I1III1I1.margin,height:I1III1I1.attr.height+2*I1III1I1.margin};$([l1llllll.node,I1II1III1.node]).attr({"class":I11lllll?"end":"",nodeId:I1III1I1.id}),$([l1llllll.node,I1II1III1.node]).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2contextMenu"),$([l1llllll.node,I1II1III1.node]).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu"),I1II111II&&I1II111II.node&&($(I1II111II.node).attr({nodeId:I1III1I1.id,style:"cursor:pointer;"}),$(I1II111II.node).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2contextMenu"),$(I1II111II.node).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu"),oui.os.mobile||($(I1II111II.node).attr("oui-e-mouseenter","event2mouseenterJoin"),$(I1II111II.node).attr("oui-e-mouseleave","event2leaveJoin"))),l11I1II1&&l11I1II1.node&&($(l11I1II1.node).attr({"class":I11lllll?"end":"",nodeId:I1III1I1.id}),$(l11I1II1.node).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2contextMenu"),$(l11I1II1.node).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu")),I1l1ll111&&I1l1ll111.node&&($(I1l1ll111.node).attr({"node-img-src":I111I111.config.basePath+I1III1I1.img.src,"node-img-high-src":I111I111.config.basePath+"img/16/flow-edit.png?_t="+oui.loadStartTime,"class":I11lllll?"end":"",nodeId:I1III1I1.id}),$(I1l1ll111.node).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2contextMenu"),$(I1l1ll111.node).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu"),$(I1l1ll111.node).attr("oui-e-mouseenter","event2showEditIcon"),$(I1l1ll111.node).attr("oui-e-mouseleave","event2hideEditIcon")),l1I1111I1&&l1I1111I1.node&&($(l1I1111I1.node).attr({nodeId:I1III1I1.id}),$(l1I1111I1.node).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2contextMenu"),$(l1I1111I1.node).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu")),$([I1II1III1.node]).attr({nodeTextId:"text-"+I1III1I1.id}),l1l1l1lI&&l1l1l1lI.node&&($(l1l1l1lI.node).attr({nodeId:I1III1I1.id,style:"cursor:pointer;"}),$(l1l1l1lI.node).attr("oui-e-"+l1IIII1l.Events.actionMenu,"event2HastenWork"),$(l1l1l1lI.node).attr("oui-e-"+l1IIII1l.Events.click,"event2HastenWork")),l1l1111I&&l1l1111I.node&&($(l1l1111I.node).attr({nodeId:I1III1I1.id,fromId:I1III1I1.splitImg.pid,toId:I1III1I1.id,style:l1IIII1l.design4Runtime?"":"cursor:pointer;"}),$(l1l1111I.node).attr("oui-e-"+l1IIII1l.Events.click,"event2contextMenu"),oui.os.mobile||l1IIII1l.design4Runtime||($(l1l1111I.node).attr("oui-e-mouseenter","event2mouseenterLine"),$(l1l1111I.node).attr("oui-e-mouseleave","event2leaveLine"))),this.toJson=function(){var I1l111l1="{type:'"+I1III1I1.type+"',text:{text:'"+I1II1III1.attr("text")+"'}, attr:{ x:"+Math.round(l1llllll.attr("x"))+", y:"+Math.round(l1llllll.attr("y"))+", width:"+Math.round(l1llllll.attr("width"))+", height:"+Math.round(l1llllll.attr("height"))+"}, props:{";for(var l1I1I111 in I1III1I1.props)I1l111l1+=l1I1I111+":{value:'"+I1III1I1.props[l1I1I111].value+"'},";return","==I1l111l1.substring(I1l111l1.length-1,I1l111l1.length)&&(I1l111l1=I1l111l1.substring(0,I1l111l1.length-1)),I1l111l1+="}}"},this.restore=function(I1I111II){var l1l1l111=I1I111II;I1III1I1=$.extend(!0,I1III1I1,I1I111II),I1II1III1.attr({text:l1l1l111.text.text}),I1l11ll1I()},this.getBBox=function(){return I1I1I111I},this.getId=function(){return I11lll1I},this.remove=function(){l1llllll.remove(),I1II1III1.remove(),I1l1ll111&&I1l1ll111.remove(),l1I1111I1&&l1I1111I1.remove(),l1III1III&&l1III1III.remove(),l1l1l1lI&&l1l1l1lI.remove(),I1111l11&&I1111l11.remove()},this.text=function(){return I1II1III1.attr("text")},this.attr=function(I1l111l1){I1l111l1&&l1llllll.attr(I1l111l1)}},l1I1I11I.path=function(l1l111l1,I1I11II1l,l1IIIIII,l1I1II111){function l1l1111l1(I1I111Il,l1l1l11l,I1l11ll1I,l1IIIII1){var I1I1II11l,l1I1111II=I1I111Il,I1lll1ll1=I1l11ll1I,l1l1l1lI=l1IIIII1,l1111l1l=l1l1l11l;switch(l1I1111II){case"from":I1I1II11l=l111I11l.rect(l1l1l11l.x-l1llll1I.attr.fromDot.width/2,l1l1l11l.y-l1llll1I.attr.fromDot.height/2,l1llll1I.attr.fromDot.width,l1llll1I.attr.fromDot.height).attr(l1llll1I.attr.fromDot);break;case"big":I1I1II11l=l111I11l.rect(l1l1l11l.x-l1llll1I.attr.bigDot.width/2,l1l1l11l.y-l1llll1I.attr.bigDot.height/2,l1llll1I.attr.bigDot.width,l1llll1I.attr.bigDot.height).attr(l1llll1I.attr.bigDot);break;case"small":I1I1II11l=l111I11l.rect(l1l1l11l.x-l1llll1I.attr.smallDot.width/2,l1l1l11l.y-l1llll1I.attr.smallDot.height/2,l1llll1I.attr.smallDot.width,l1llll1I.attr.smallDot.height).attr(l1llll1I.attr.smallDot);break;case"to":I1I1II11l=l111I11l.rect(l1l1l11l.x-l1llll1I.attr.toDot.width/2,l1l1l11l.y-l1llll1I.attr.toDot.height/2,l1llll1I.attr.toDot.width,l1llll1I.attr.toDot.height).attr(l1llll1I.attr.toDot)}$(I1I1II11l.node).on(l1I111I1.Events.click,function(){return!1}),this.type=function(I1I111II){return I1I111II?void(l1I1111II=I1I111II):l1I1111II},this.node=function(l1I111II){return l1I111II?void(I1I1II11l=l1I111II):I1I1II11l},this.left=function(I1I111I1){return I1I111I1?void(I1lll1ll1=I1I111I1):I1lll1ll1},this.right=function(I1l111l1){return I1l111l1?void(l1l1l1lI=I1l111l1):l1l1l1lI},this.remove=function(){I1lll1ll1=null,l1l1l1lI=null,I1I1II11l.remove()},this.pos=function(I1l111l1){return I1l111l1?("undefined"==typeof I1l111l1.x&&(I1l111l1.x=l1111l1l.x||0),"undefined"==typeof I1l111l1.y&&(I1l111l1.y=l1111l1l.y||0),l1111l1l=I1l111l1,I1I1II11l.attr({x:l1111l1l.x-I1I1II11l.attr("width")/2,y:l1111l1l.y-I1I1II11l.attr("height")/2}),this):l1111l1l},this.moveTo=function(I1l111lI,l1I1I111){switch(this.pos({x:I1l111lI,y:l1I1I111}),l1I1111II){case"from":l1l1l1lI&&l1l1l1lI.right()&&"to"==l1l1l1lI.right().type()&&l1l1l1lI.right().pos(l1I1I11I.util.connPoint(l1I111III.getBBox(),l1111l1l)),l1l1l1lI&&l1l1l1lI.right()&&l1l1l1lI.pos(l1I1I11I.util.center(l1111l1l,l1l1l1lI.right().pos()));break;case"big":l1l1l1lI&&l1l1l1lI.right()&&"to"==l1l1l1lI.right().type()&&l1l1l1lI.right().pos(l1I1I11I.util.connPoint(l1I111III.getBBox(),l1111l1l)),I1lll1ll1&&I1lll1ll1.left()&&"from"==I1lll1ll1.left().type()&&I1lll1ll1.left().pos(l1I1I11I.util.connPoint(I1lllll11.getBBox(),l1111l1l)),l1l1l1lI&&l1l1l1lI.right()&&l1l1l1lI.pos(l1I1I11I.util.center(l1111l1l,l1l1l1lI.right().pos())),I1lll1ll1&&I1lll1ll1.left()&&I1lll1ll1.pos(l1I1I11I.util.center(l1111l1l,I1lll1ll1.left().pos()));var I1I11II11={x:l1111l1l.x,y:l1111l1l.y};if(l1I1I11I.util.isLine(I1lll1ll1.left().pos(),I1I11II11,l1l1l1lI.right().pos())){l1I1111II="small",I1I1II11l.attr(l1llll1I.attr.smallDot),this.pos(I1I11II11);var I1IIIIIl=I1lll1ll1;I1lll1ll1.left().right(I1lll1ll1.right()),I1lll1ll1=I1lll1ll1.left(),I1IIIIIl.remove();var I1I1II11I=l1l1l1lI;l1l1l1lI.right().left(l1l1l1lI.left()),l1l1l1lI=l1l1l1lI.right(),I1I1II11I.remove()}break;case"small":if(I1lll1ll1&&l1l1l1lI&&!l1I1I11I.util.isLine(I1lll1ll1.pos(),{x:l1111l1l.x,y:l1111l1l.y},l1l1l1lI.pos())){l1I1111II="big",I1I1II11l.attr(l1llll1I.attr.bigDot);var I1IIIIIl=new l1l1111l1("small",l1I1I11I.util.center(I1lll1ll1.pos(),l1111l1l),I1lll1ll1,I1lll1ll1.right());I1lll1ll1.right(I1IIIIIl),I1lll1ll1=I1IIIIIl;var I1I1II11I=new l1l1111l1("small",l1I1I11I.util.center(l1l1l1lI.pos(),l1111l1l),l1l1l1lI.left(),l1l1l1lI);l1l1l1lI.left(I1I1II11I),l1l1l1lI=I1I1II11I}break;case"to":I1lll1ll1&&I1lll1ll1.left()&&"from"==I1lll1ll1.left().type()&&I1lll1ll1.left().pos(l1I1I11I.util.connPoint(I1lllll11.getBBox(),l1111l1l)),I1lll1ll1&&I1lll1ll1.left()&&I1lll1ll1.pos(l1I1I11I.util.center(l1111l1l,I1lll1ll1.left().pos()))}I1I1I1Il()}}function I1lll1ll1(){var I1l111lI,l1I1I111,I1I11II11,l1lllllI,l1I1II11l=I1lllll11.getBBox(),I1l1111ll=l1I111III.getBBox();I1I11II11=l1I1I11I.util.connPoint(l1I1II11l,{x:I1l1111ll.x+I1l1111ll.width/2,y:I1l1111ll.y+I1l1111ll.height/2}),l1lllllI=l1I1I11I.util.connPoint(I1l1111ll,I1I11II11),I1l111lI=new l1l1111l1("from",I1I11II11,null,new l1l1111l1("small",{x:(I1I11II11.x+l1lllllI.x)/2,y:(I1I11II11.y+l1lllllI.y)/2})),I1l111lI.right().left(I1l111lI),l1I1I111=new l1l1111l1("to",l1lllllI,I1l111lI.right(),null),I1l111lI.right().right(l1I1I111),this.toPathString=function(){if(!I1l111lI)return"";var I1l111l1=I1l111lI,I1I1I11l="M"+I1l111l1.pos().x+" "+I1l111l1.pos().y,l1I11II1I="";if("undefined"==typeof I1l111l1.pos()||"undefined"==typeof I1l111l1.pos().x)return"";if("undefined"==typeof I1l111l1.pos()||"undefined"==typeof I1l111l1.pos().y)return"";for(;I1l111l1.right();)I1l111l1=I1l111l1.right(),"undefined"!=typeof I1l111l1.pos()&&"undefined"!=typeof I1l111l1.pos().x&&"undefined"!=typeof I1l111l1.pos()&&"undefined"!=typeof I1l111l1.pos().y&&(I1I1I11l+="L"+I1l111l1.pos().x+" "+I1l111l1.pos().y);var I1lllllI=l1I1I11I.util.arrow(I1l111l1.left().pos(),I1l111l1.pos(),l1llll1I.attr.arrow.radius);return l1I11II1I="M"+I1lllllI[0].x+" "+I1lllllI[0].y+"L"+I1lllllI[1].x+" "+I1lllllI[1].y+"L"+I1lllllI[2].x+" "+I1lllllI[2].y+"z",[I1I1I11l,l1I11II1I]},this.toJson=function(){for(var l1l1l111="[",l1l11ll1l=I1l111lI;l1l11ll1l;)"big"==l1l11ll1l.type()&&(l1l1l111+="{x:"+Math.round(l1l11ll1l.pos().x)+",y:"+Math.round(l1l11ll1l.pos().y)+"},"),l1l11ll1l=l1l11ll1l.right();return","==l1l1l111.substring(l1l1l111.length-1,l1l1l111.length)&&(l1l1l111=l1l1l111.substring(0,l1l1l111.length-1)),l1l1l111+="]"},this.restore=function(l1I111I1){for(var l1I1I11I=l1I111I1,I1l11ll1l=I1l111lI.right(),I1lllllI=0;I1lllllI<l1I1I11I.length;I1lllllI++)I1l11ll1l.moveTo(l1I1I11I[I1lllllI].x,l1I1I11I[I1lllllI].y),I1l11ll1l.moveTo(l1I1I11I[I1lllllI].x,l1I1I11I[I1lllllI].y),I1l11ll1l=I1l11ll1l.right();this.hide()},this.fromDot=function(){return I1l111lI},this.toDot=function(){return l1I1I111},this.midDot=function(){for(var I1I111I1=I1l111lI.right(),l1l1l11I=I1l111lI.right().right();l1l1l11I.right()&&l1l1l11I.right().right();)l1l1l11I=l1l1l11I.right().right(),I1I111I1=I1I111I1.right();return I1I111I1},this.show=function(){for(var I1I111Il=I1l111lI;I1I111Il;)I1I111Il.node().show(),I1I111Il=I1I111Il.right()},this.hide=function(){for(var l1l111lI=I1l111lI;l1l111lI;)l1l111lI.node().hide(),l1l111lI=l1l111lI.right()},this.remove=function(){for(var I1I1I111=I1l111lI;I1I1I111;)I1I1I111.right()?(I1I1I111=I1I1I111.right(),I1I1I111.left().remove()):(I1I1I111.remove(),I1I1I111=null)}}function I1I1I1Il(){var l1I111II=l1ll1lll1.toPathString();l1ll1lll1.midDot().pos();l1I111II&&(l1111l1l.attr({path:l1I111II[0]}),l1I1111I&&l1I1111I.attr({path:l1I111II[1]}))}var l1111l1l,l1I1111I,I1II111Il,l1ll1lll1,l11l1lll=oui.flow.FlowBiz.workflowTreeNode||{},l111I11l=I1I11II1l,l1llll1I=$.extend(!0,{},l1I1I11I.config.path),I1lllll11=(l1llll1I.text.textPos,l1IIIIII),l1I111III=l1I1II111,I1III1Il="path"+l1I1I11I.util.nextId();l1llll1I=$.extend(!0,l1llll1I,l1l111l1),l1ll1lll1=new I1lll1ll1;var I11lll1I=l1ll1lll1.toPathString();l1ll1lll1.midDot().pos();if(l1llll1I.attr.path.path=I11lll1I[0],l1llll1I.attr.arrow.path=I11lll1I[1],l1111l1l=l111I11l.path(I11lll1I[0]).attr(l1llll1I.attr.path)){if(l1l111l1&&l1l111l1.from&&l1l111l1.to&&l11l1lll&&l11l1lll.states&&l11l1lll.states[l1l111l1.from]&&l11l1lll.states[l1l111l1.to]){$(l1111l1l.node).attr("fromId",l11l1lll.states[l1l111l1.from].id),$(l1111l1l.node).attr("toId",l11l1lll.states[l1l111l1.to].id),$(l1111l1l.node).attr("oui-e-"+l1I111I1.Events.click,"event2contextMenu"),oui.os.mobile||($(l1111l1l.node).attr("oui-e-mouseenter","event2mouseenterLine"),$(l1111l1l.node).attr("oui-e-mouseleave","event2leaveLine"));var l111111I=l1I111I1.hasBranch(l1I111I1.nodeIdMap[l11l1lll.states[l1l111l1.to].id]);l111111I&&l1I111I1.renderBranchLine(l1111l1l.node),l1I111I1.nodeIdMap[l11l1lll.states[l1l111l1.from].id].isSplit?l1I111I1.isIndex||l1I111I1.isPreview?l111111I||($(l1111l1l.node).attr("oui-e-"+l1I111I1.Events.click,""),$(l1111l1l.node).attr("oui-e-mouseenter",""),$(l1111l1l.node).attr("oui-e-mouseleave",""),$(l1111l1l.node).attr("stroke-width","1"),$(l1111l1l.node).css("stroke-width","1")):($(l1111l1l.node).attr("stroke-width","3"),$(l1111l1l.node).css("stroke-width","3")):l111111I&&l1I111I1.isIndex||($(l1111l1l.node).attr("oui-e-mouseenter",""),$(l1111l1l.node).attr("oui-e-mouseleave",""),$(l1111l1l.node).attr("oui-e-"+l1I111I1.Events.click,""))}l1111l1l.toBack()}this.from=function(){return I1lllll11},this.to=function(){return l1I111III},this.restore=function(I1l111lI){var I1I1I11I=I1l111lI;l1llll1I=$.extend(!0,l1llll1I,I1l111lI),l1ll1lll1.restore(I1I1I11I.dots)},this.remove=function(){l1ll1lll1.remove(),l1111l1l.remove(),l1I1111I&&l1I1111I.remove()},this.getId=function(){return I1III1Il},this.text=function(){return I1II111Il.attr("text")},this.attr=function(l1I111II){l1I111II&&l1I111II.path&&l1111l1l.attr(l1I111II.path),l1I111II&&l1I111II.arrow&&l1I1111I.attr(l1I111II.arrow)}},l1I1I11I.props=function(l1I111I1,l1I1I111){},l1I1I11I.editors={textEditor:function(){}},l1I1I11I.RaphaelObj=null,l1I1I11I.init=function(l1I111II,l1I11II11){var I1IIIIII,I1l1ll111=($(window).width(),$(window).height(),{}),l1I1111I1={};if(l1I1I11I.RaphaelObj&&(l1I1I11I.RaphaelObj.clear(),l1I1I11I.RaphaelObj=null),I1IIIIII=Raphael(l1I111II,l1I11II11.width,l1I11II11.height),l1I1I11I.RaphaelObj=I1IIIIII,$.extend(!0,l1I1I11I.config,l1I11II11),$(I1IIIIII).data("mod","point"),l1I11II11.restore){var l1III1IIl=l1I11II11.restore,I1l1l1l1={};if(l1III1IIl.states){new Date;for(var I1111I1l in l1III1IIl.states){var l1l1111l=(new Date,$.extend(!0,{},l1I1I11I.config.tools.states[l1III1IIl.states[I1111I1l].type],l1III1IIl.states[I1111I1l])),l1ll111l1=new l1I1I11I.rect(l1l1111l,I1IIIIII);new Date;I1l1l1l1[I1111I1l]=l1ll111l1,I1l1ll111[l1ll111l1.getId()]=l1ll111l1;new Date}new Date}if(l1III1IIl.paths){new Date;for(var I1111I1l in l1III1IIl.paths){var l1II1IIIl=$.extend(!0,{},l1I1I11I.config.tools.path,l1III1IIl.paths[I1111I1l]),I11I1II1=new l1I1I11I.path(l1II1IIIl,I1IIIIII,I1l1l1l1[l1III1IIl.paths[I1111I1l].from],I1l1l1l1[l1III1IIl.paths[I1111I1l].to]);I11I1II1.restore(l1III1IIl.paths[I1111I1l])}new Date}}var I111I11I=l1I1I11I.config.historyRects,I1IIII11=l1I1I11I.config.activeRects;if(I111I11I.rects.length||I1IIII11.rects.length){var I1l1l1l1={};for(var I1lllll11 in l1I1111I1)I1l1l1l1[l1I1111I1[I1lllll11].from().text()]||(I1l1l1l1[l1I1111I1[I1lllll11].from().text()]={rect:l1I1111I1[I1lllll11].from(),paths:{}}),I1l1l1l1[l1I1111I1[I1lllll11].from().text()].paths[l1I1111I1[I1lllll11].text()]=l1I1111I1[I1lllll11],I1l1l1l1[l1I1111I1[I1lllll11].to().text()]||(I1l1l1l1[l1I1111I1[I1lllll11].to().text()]={rect:l1I1111I1[I1lllll11].to(),paths:{}});for(var I1I111III=0;I1I111III<I111I11I.rects.length;I1I111III++){I1l1l1l1[I111I11I.rects[I1I111III].name]&&I1l1l1l1[I111I11I.rects[I1I111III].name].rect.attr(I111I11I.rectAttr);for(var I1lll1l1=0;I1lll1l1<I111I11I.rects[I1I111III].paths.length;I1lll1l1++)I1l1l1l1[I111I11I.rects[I1I111III].name].paths[I111I11I.rects[I1I111III].paths[I1lll1l1]]&&I1l1l1l1[I111I11I.rects[I1I111III].name].paths[I111I11I.rects[I1I111III].paths[I1lll1l1]].attr(I111I11I.pathAttr)}for(var I1I111III=0;I1I111III<I1IIII11.rects.length;I1I111III++){I1l1l1l1[I1IIII11.rects[I1I111III].name]&&I1l1l1l1[I1IIII11.rects[I1I111III].name].rect.attr(I1IIII11.rectAttr);for(var I1lll1l1=0;I1lll1l1<I1IIII11.rects[I1I111III].paths.length;I1lll1l1++)I1l1l1l1[I1IIII11.rects[I1I111III].name].paths[I1IIII11.rects[I1I111III].paths[I1lll1l1]]&&I1l1l1l1[I1IIII11.rects[I1I111III].name].paths[I1IIII11.rects[I1I111III].paths[I1lll1l1]].attr(I1IIII11.pathAttr)}}},$.fn.FlowUi=function(l1I111II){return this.each(function(){l1I1I11I.init(this,l1I111II)})},$.FlowUi=l1I1I11I}(),function(I1l111l1){var l1I1I11l=I1l111l1.FlowUi;oui.loadStartTime||(oui.loadStartTime=(new Date).getTime()),I1l111l1.extend(!0,l1I1I11l.config.tools.states,{start:{attr:{fill:"#73ae42",stroke:"",r:20},type:"start",name:{text:"<<start>>"},text:{text:"开始"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},end:{attr:{fill:"#b7b7b7",stroke:"",r:40},type:"end",name:{text:""},text:{fill:"#333"},img:{src:"img/16/end.png?_t="+oui.loadStartTime,width:30,height:30}},role:{attr:{fill:"#5990cf",stroke:"",r:40},type:"role",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},team:{attr:{fill:"#5990cf",stroke:"",r:40},type:"team",img:{src:"img/16/team.png?_t="+oui.loadStartTime,width:30,height:30}},post:{attr:{fill:"#5990cf",stroke:"",r:40},type:"post",img:{src:"img/16/post.png?_t="+oui.loadStartTime,width:30,height:30}},department:{attr:{fill:"#5990cf",stroke:"",r:40},type:"department",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},all:{attr:{fill:"#5990cf",stroke:"",r:40},type:"all",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},company:{attr:{fill:"#5990cf",stroke:"",r:40},type:"company",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},group:{attr:{fill:"#5990cf",stroke:"",r:40},type:"group",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},level:{attr:{fill:"#5990cf",stroke:"",r:40},type:"level",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},relativeRole:{attr:{fill:"#5990cf",stroke:"",r:40},type:"relativeRole",img:{src:"img/16/relative-role.png?_t="+oui.loadStartTime,width:30,height:30}},"end-cancel":{type:"end-cancel",name:{text:"<<end-cancel>>"},text:{text:"取消"},img:{src:"img/16/end_event_cancel.png?_t="+oui.loadStartTime,width:32,height:32}},"end-error":{type:"end-error",name:{text:"<<end-error>>"},text:{text:"错误"},img:{src:"img/16/end_event_error.png?_t="+oui.loadStartTime,width:32,height:32}},state:{type:"state",name:{text:"<<state>>"},text:{text:""},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:32,height:32}},fork:{type:"fork",name:{text:"<<fork>>"},text:{text:"分支"},img:{src:"img/16/gateway_parallel.png?_t="+oui.loadStartTime,width:32,height:32}},join:{type:"join",name:{text:"<<join>>"},text:{text:"合并"},img:{}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},decision:{type:"decision",name:{text:"<<decision>>"},text:{text:"决定"},img:{src:"img/16/gateway_parallel.png?_t="+oui.loadStartTime,width:32,height:32}}}),l1I1I11l.themes[1]={tools:{states:{start:{attr:{fill:"#73ae42",stroke:"",r:40},type:"start",name:{text:"<<start>>"},text:{text:"开始",fill:"#333"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},end:{attr:{fill:"#b7b7b7",stroke:"",r:40},type:"end",name:{text:""},text:{fill:"#333"},img:{src:"img/16/end.png?_t="+oui.loadStartTime,width:30,height:30}},split:{attr:{fill:"#B7B7B7",r:10,width:1,height:1},type:"split",name:{text:""},text:{text:"",fill:"#5990cf"},img:{}},join:{attr:{fill:"#B7B7B7","fill-opacity":1,"stroke-width":1,r:20,width:15,height:15},type:"join",name:{text:""},text:{text:"",fill:"#ffffff"},img:{}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},role:{attr:{fill:"#5990cf",stroke:"",r:40},type:"role",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},team:{attr:{fill:"#5990cf",stroke:"",r:40},type:"team",img:{src:"img/16/team.png?_t="+oui.loadStartTime,width:30,height:30}},department:{attr:{fill:"#5990cf",stroke:"",r:40},type:"department",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},post:{attr:{fill:"#5990cf",stroke:"",r:40},type:"post",img:{src:"img/16/post.png?_t="+oui.loadStartTime,width:30,height:30}},all:{attr:{fill:"#5990cf",stroke:"",r:40},type:"all",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},company:{attr:{fill:"#5990cf",stroke:"",r:40},type:"company",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},group:{attr:{fill:"#5990cf",stroke:"",r:40},type:"group",img:{src:"img/16/department.png?_t="+oui.loadStartTime,width:30,height:30}},level:{attr:{fill:"#5990cf",stroke:"",r:40},type:"level",img:{src:"img/16/role.png?_t="+oui.loadStartTime,width:30,height:30}},relativeRole:{attr:{fill:"#5990cf",stroke:"",r:40},type:"relativeRole",img:{src:"img/16/relative-role.png?_t="+oui.loadStartTime,width:30,height:30}}}},rect:{attr:{x:10,y:10,width:100,height:50,r:40,fill:"#5990cf",stroke:"","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"",fill:"#000000","font-size":13},margin:5,props:[],img:{}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#B7B7B7",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#5990cf",fill:"#5990cf","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new l1I1I11l.editors.textEditor}}}}},l1I1I11l.themes[2]={
tools:{states:{start:{attr:{fill:"#f8f8f8",stroke:"#929292",r:0},type:"start",name:{text:"<<start>>"},text:{text:"开始",fill:"#1eb222"},img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},task:{type:"task",name:{text:""},text:{text:"任务"},img:{src:"img/16/task_empty_b.png?_t="+oui.loadStartTime,width:30,height:30}}}},rect:{attr:{x:10,y:10,width:100,height:50,r:0,fill:"#f8f8f8",stroke:"#929292","stroke-width":1},showType:"image&text",type:"state",name:{text:"state","font-style":"normal"},text:{text:"",fill:"#5990cf","font-size":13},margin:5,props:[],img:{src:"img/16/task_empty.png?_t="+oui.loadStartTime,width:30,height:30}},path:{attr:{path:{path:"M10 10L100 100",stroke:"#686868",fill:"none","stroke-width":1},arrow:{path:"M10 10L10 10",stroke:"#959595",fill:"#959595","stroke-width":1,radius:4},fromDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},toDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},bigDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},smallDot:{width:5,height:5,stroke:"#fff",fill:"#000",cursor:"move","stroke-width":1},text:{cursor:"move",background:"#000"}},text:{patten:"TO {to}",textPos:{x:0,y:-10}},props:{text:{name:"text",label:"显示",value:"",editor:function(){return new l1I1I11l.editors.textEditor}}}}}}(jQuery),function(l1l111ll){var I1l1l11I={"package":"oui.flow","class":"FlowBiz",getFlowUi:function(){return l1l111ll},getFlowBiz:function(){return I1l1l11I},getSuper:function(){return oui.flow.FlowCommon},initStart:function(I1I111I1){var l1l1l11I=this;try{var l1l11ll11=window.parent.oui.getParam("isTest");l1l1l11I.isTest=l1l11ll11}catch(I1IIIIIl){}l1l1l11I.getSuper().initStart.call(l1l1l11I,I1I111I1)},initEnd:function(){var l1l111l1=this;l1l111l1.getSuper().initEnd.call(this),oui.Guide.trigger4custom("#ouiflow")},bindEvents:function(){var I1l111ll=this;$("#ouiflow").draggable({start:function(I1I111II,I1I1I11l){},stop:function(l1I111II,l1I1I111){$(this).find("p").html(":-|")}}),$(document).on("mousedown",function(l1I1I11I){I1l111ll.hideTips({e:l1I1I11I})}),I1l111ll.bindBeforeUnload()},bindBeforeUnload:function(){var l1I111II=this;l1I111II.isIndex||(window.onbeforeunload=function(l1l1l11I){return l1I111II.hasSaveData()||!oui_context||oui_context&&!oui_context.userId?void 0:(l1l1l11I||window.event).returnValue="有信息未保存"})},event2ZoomBig:function(I1l111ll){var I1I1I111=this;I1I1I111.zoomPx+=10,I1I1I111.zoomScale=(I1I1I111.mc_width+I1I1I111.zoomPx)/I1I1I111.mc_width,$(document.body).css("zoom",I1I1I111.zoomScale)},event2ZoomSmall:function(l1I111I1){var I1I1I11l=this;I1I1I11l.zoomPx-=10,I1I1I11l.zoomScale=(I1I1I11l.mc_width+I1I1I11l.zoomPx)/I1I1I11l.mc_width,I1I1I11l.zoomScale<.5&&(I1I1I11l.zoomPx+=10,I1I1I11l.zoomScale=(I1I1I11l.mc_width+I1I1I11l.zoomPx)/I1I1I11l.mc_width),$(document.body).css("zoom",I1I1I11l.zoomScale)},event2contextMenu:function(l1I111Il){var I1I1I111,l1I11II1l,I1lllll1=this,I1l1ll11I=I1lllll1.putContextMenu4event(l1I111Il),l1l1111l1=I1lllll1.nodeIdMap,l1lll1lll=I1l1ll11I.nodeId,I1l1l1l1=(I1lllll1.getFlowUi(),I1lllll1.workflowTreeNode),I1111l11=(I1l1l1l1.states[l1lll1lll],l1l1111l1[l1lll1lll].attr);if(!l1l1111l1[l1lll1lll].isEnd){I1lllll1.operNode4design=I1lllll1.contextMenus,$("#flow-ui-contextMenus")[0].innerHTML=I1l1ll11I.content,I1I1I111=I1111l11.x,l1I11II1l=I1111l11.y;var I1l1111l=$("#ouiflow").position(),I1ll111l1=I1I1I111+I1l1111l.left-$("#flow-ui-contextMenus").width()/2,l1II1IIIl=l1I11II1l+I1l1111l.top;if(I1l1ll11I.isLine&&(I1lllll1.isIndex||I1lllll1.isPreview)){var l11I1III=l1I111Il.e,I111I111=document.documentElement.scrollLeft||document.body.scrollLeft,l1IIII1I=document.documentElement.scrollTop||document.body.scrollTop;I1ll111l1=l11I1III.pageX||l11I1III.clientX+I111I111,l1II1IIIl=l11I1III.pageY||l11I1III.clientY+l1IIII1I,l1II1IIIl+=8,I1ll111l1-=$("#flow-ui-contextMenus").width()/2}else l1l1111l1[l1lll1lll].isJoin?(I1ll111l1-=8,l1II1IIIl-=$("#flow-ui-contextMenus").height()/2,l1II1IIIl+=7):(I1ll111l1+=20,l1II1IIIl-=8),I1ll111l1+=12,I1lllll1.isIndex&&(I1ll111l1+=$("#flow-ui-contextMenus").width()/2,I1ll111l1+=30,l1II1IIIl+=40);$("#flow-ui-contextMenus").css({position:"absolute",display:"",left:I1ll111l1,top:l1II1IIIl})}},event2contextMenu_TEST:function(I1l111lI){var l1l1l11I=this,l1I11II11=l1l1l11I.putContextMenu4event(I1l111lI),l1lllll1=oui.showTips({el:l1I11II11.el,content:l1I11II11.content}),I1I1II11I=$(l1lllll1.getEl()),I1I1111II=(oui.flow.FlowBiz.nodeIdMap,$(l1I11II11.el).attr("nodeId"));console.log($(l1I11II11.el).attr("x")),console.log($(l1I11II11.el).attr("y")),console.log($(l1I11II11.el).attr("width")),console.log($(l1I11II11.el).attr("height"));var l1lll1lll=parseFloat($(l1I11II11.el).attr("x")),I1I1I1II=parseFloat($(l1I11II11.el).attr("y")),I1111l1I=l1l1l11I.workflowTreeNode,l1l1111l=(I1111l1I.states[I1I1111II],l1l1l11I.nodeIdMap[I1I1111II].attr);l1lll1lll=l1l1111l.x,I1I1I1II=l1l1111l.y;var I1ll111l1,l1II1III1;if(oui.browser.ie){$("rect[nodeid="+I1I1111II+"]").offset();I1ll111l1=I1l111lI.e.pageX-I1I1II11I.width()/2,l1II1III1=I1l111lI.e.pageY+10}else I1ll111l1=l1lll1lll+l1l1l11I.nodeWidth-l1l1l11I.y_distance+$("svg").offset().left,l1II1III1=I1I1I1II+l1l1l11I.nodeHeight,l1II1III1=l1II1III1+$("#ouiflow").scrollTop()+l1l1l11I.nodeHeight/2,l1II1III1+=55,l1l1l11I.nodeIdMap[I1I1111II].isJoin&&(I1ll111l1-=l1l1l11I.nodeWidth/2,I1ll111l1+=l1l1111l.width/2,l1II1III1-=20);I1I1II11I.css({top:l1II1III1+"px",left:I1ll111l1+"px"})}};I1l1l11I=$.extend(!0,{},I1l1l11I.getSuper(),I1l1l11I),I1l1l11I=oui.createClass(I1l1l11I),I1l1l11I.getPosByEl=function(I1l111lI){if("undefined"!=typeof I1l111lI.offsetParent)for(var I1I1I11I=0,l1l11ll11=0;I1l111lI;I1l111lI=I1l111lI.offsetParent)I1I1I11I+=I1l111lI.offsetLeft,l1l11ll11+=I1l111lI.offsetTop;return{x:I1I1I11I,y:l1l11ll11}},I1l1l11I.hideContextMenu=function(I1I111I1){var I1I1I111=$("#flow-ui-contextMenus");I1I1I111.length<=0||I1I1I111.hide()},I1l1l11I.hideTips=function(I1I111I1){var I1l1l11l=I1I111I1.e,I1I11II11=$("#flow-ui-contextMenus");I1I11II11.length<=0||oui.isInDom(I1l1l11l.target,I1I11II11[0])||I1I11II11.hide()}}(oui.flow.FlowUi);








